import{c as E}from"./vendor-1g1b-BsmccLtz.js";import{i as z}from"./vendor-E0E3-vedrsmtS.js";import{A as M,C as S,E as T,d as N,e as A,D as _}from"./vendor-SBXC-DnSHQime.js";const I=(e,s,t)=>{const{itemSize:i}=e,{items:a,lastVisitedIndex:n}=t;if(s>n){let o=0;if(n>=0){const r=a[n];o=r.offset+r.size}for(let r=n+1;r<=s;r++){const m=i(r);a[r]={offset:o,size:m},o+=m}t.lastVisitedIndex=s}return a[s]},L=(e,s,t)=>{const{items:i,lastVisitedIndex:a}=s;return(a>0?i[a].offset:0)>=t?l(e,s,0,a,t):x(e,s,Math.max(0,a),t)},l=(e,s,t,i,a)=>{for(;t<=i;){const n=t+Math.floor((i-t)/2),o=I(e,n,s).offset;if(o===a)return n;o<a?t=n+1:o>a&&(i=n-1)}return Math.max(0,t-1)},x=(e,s,t,i)=>{const{total:a}=e;let n=1;for(;t<a&&I(e,t,s).offset<i;)t+=n,n*=2;return l(e,s,Math.floor(t/2),Math.min(t,a-1),i)},h=({total:e},{items:s,estimatedItemSize:t,lastVisitedIndex:i})=>{let a=0;if(i>=e&&(i=e-1),i>=0){const r=s[i];a=r.offset+r.size}const o=(e-i-1)*t;return a+o},U=E({name:"ElDynamicSizeList",getItemOffset:(e,s,t)=>I(e,s,t).offset,getItemSize:(e,s,{items:t})=>t[s].size,getEstimatedTotalSize:h,getOffset:(e,s,t,i,a)=>{const{height:n,layout:o,width:r}=e,m=z(o)?r:n,u=I(e,s,a),d=h(e,a),c=Math.max(0,Math.min(d-m,u.offset)),f=Math.max(0,u.offset-m+u.size);switch(t===A&&(i>=f-m&&i<=c+m?t=M:t=S),t){case N:return c;case T:return f;case S:return Math.round(f+(c-f)/2);case M:default:return i>=f&&i<=c?i:i<f?f:c}},getStartIndexForOffset:(e,s,t)=>L(e,t,s),getStopIndexForStartIndex:(e,s,t,i)=>{const{height:a,total:n,layout:o,width:r}=e,m=z(o)?r:a,u=I(e,s,i),d=t+m;let c=u.offset+u.size,f=s;for(;f<n-1&&c<d;)f++,c+=I(e,f,i).size;return f},initCache({estimatedItemSize:e=_},s){const t={items:{},estimatedItemSize:e,lastVisitedIndex:-1};return t.clearCacheAfterIndex=(i,a=!0)=>{var n,o;t.lastVisitedIndex=Math.min(t.lastVisitedIndex,i-1),(n=s.exposed)==null||n.getItemStyleCache(-1),a&&((o=s.proxy)==null||o.$forceUpdate())},t},clearCache:!1,validateProps:({itemSize:e})=>{}});export{U as D};
