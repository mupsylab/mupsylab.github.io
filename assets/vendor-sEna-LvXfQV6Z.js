import{b as R,T as D}from"./vendor-8F4M-BzORa8vA.js";import{a as S}from"./vendor-5WKb-KWd2YoVw.js";import{s as N}from"./vendor-NC2I-DdSA8pf9.js";import{B as A,r as O}from"./vendor-E3jz-B2mB0_6C.js";import{t as j}from"./vendor-KvHA-DJOhYIGB.js";import{_ as K}from"./vendor-pM4a-CqGSI99y.js";import{u as U}from"./vendor-unoq-CFxLHdLI.js";import{t as I}from"./vendor-0rdd-Cq9Fpw4b.js";import{d as V,l as q,c as g,j as F,f as G,o as J,h as Q,y as W,b as y}from"./vendor-RE7Z-DOm9JKld.js";import{r as v,b as P,u as l}from"./vendor-eqDO-Ti6p_k8X.js";import{n as C,a as X}from"./vendor-7avT-DhdrFwTb.js";import{i as Y}from"./vendor-k87t-DYFOtHqs.js";const Z="Thumb",$=V({__name:"thumb",props:j,setup(T){const u=T,o=q(N),c=U("scrollbar");o||I(Z,"can not inject scrollbar context");const s=v(),n=v(),f=v({}),i=v(!1);let m=!1,d=!1,p=Y?document.onselectstart:null;const e=g(()=>A[u.vertical?"vertical":"horizontal"]),k=g(()=>O({size:u.size,move:u.move,bar:e.value})),E=g(()=>s.value[e.value.offset]**2/o.wrapElement[e.value.scrollSize]/u.ratio/n.value[e.value.offset]),z=t=>{var a;if(t.stopPropagation(),t.ctrlKey||[1,2].includes(t.button))return;(a=window.getSelection())==null||a.removeAllRanges(),x(t);const r=t.currentTarget;r&&(f.value[e.value.axis]=r[e.value.offset]-(t[e.value.client]-r.getBoundingClientRect()[e.value.direction]))},B=t=>{if(!n.value||!s.value||!o.wrapElement)return;const a=Math.abs(t.target.getBoundingClientRect()[e.value.direction]-t[e.value.client]),r=n.value[e.value.offset]/2,h=(a-r)*100*E.value/s.value[e.value.offset];o.wrapElement[e.value.scroll]=h*o.wrapElement[e.value.scrollSize]/100},x=t=>{t.stopImmediatePropagation(),m=!0,document.addEventListener("mousemove",w),document.addEventListener("mouseup",b),p=document.onselectstart,document.onselectstart=()=>!1},w=t=>{if(!s.value||!n.value||m===!1)return;const a=f.value[e.value.axis];if(!a)return;const r=(s.value.getBoundingClientRect()[e.value.direction]-t[e.value.client])*-1,h=n.value[e.value.offset]-a,H=(r-h)*100*E.value/s.value[e.value.offset];o.wrapElement[e.value.scroll]=H*o.wrapElement[e.value.scrollSize]/100},b=()=>{m=!1,f.value[e.value.axis]=0,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",b),_(),d&&(i.value=!1)},L=()=>{d=!1,i.value=!!u.size},M=()=>{d=!0,i.value=m};F(()=>{_(),document.removeEventListener("mouseup",b)});const _=()=>{document.onselectstart!==p&&(document.onselectstart=p)};return S(P(o,"scrollbarElement"),"mousemove",L),S(P(o,"scrollbarElement"),"mouseleave",M),(t,a)=>(J(),G(D,{name:l(c).b("fade"),persisted:""},{default:Q(()=>[W(y("div",{ref_key:"instance",ref:s,class:C([l(c).e("bar"),l(c).is(l(e).key)]),onMousedown:B},[y("div",{ref_key:"thumb",ref:n,class:C(l(c).e("thumb")),style:X(l(k)),onMousedown:z},null,38)],34),[[R,t.always||i.value]])]),_:1},8,["name"]))}});var ve=K($,[["__file","thumb.vue"]]);export{ve as T};
