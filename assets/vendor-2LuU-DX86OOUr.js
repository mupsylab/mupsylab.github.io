import{t as N}from"./vendor-VU0V-CahdVGVn.js";import{t as w}from"./vendor-v0xL-8dsNMGDx.js";import{d as T}from"./vendor-BvAT-kxCwF96_.js";var A=T("start","end","cancel","interrupt"),R=[],x=0,E=1,l=2,d=3,y=4,g=5,p=6;function U(a,e,t,i,u,c){var _=a.__transition;if(!_)a.__transition={};else if(t in _)return;S(a,t,{name:e,index:i,group:u,on:A,tween:R,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:x})}function b(a,e){var t=D(a,e);if(t.state>x)throw new Error("too late; already scheduled");return t}function j(a,e){var t=D(a,e);if(t.state>d)throw new Error("too late; already running");return t}function D(a,e){var t=a.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function S(a,e,t){var i=a.__transition,u;i[e]=t,t.timer=N(c,0,t.time);function c(o){t.state=E,t.timer.restart(_,t.delay,t.time),t.delay<=o&&_(o-t.delay)}function _(o){var n,m,s,r;if(t.state!==E)return v();for(n in i)if(r=i[n],r.name===t.name){if(r.state===d)return w(_);r.state===y?(r.state=p,r.timer.stop(),r.on.call("interrupt",a,a.__data__,r.index,r.group),delete i[n]):+n<e&&(r.state=p,r.timer.stop(),r.on.call("cancel",a,a.__data__,r.index,r.group),delete i[n])}if(w(function(){t.state===d&&(t.state=y,t.timer.restart(h,t.delay,t.time),h(o))}),t.state=l,t.on.call("start",a,a.__data__,t.index,t.group),t.state===l){for(t.state=d,u=new Array(s=t.tween.length),n=0,m=-1;n<s;++n)(r=t.tween[n].value.call(a,a.__data__,t.index,t.group))&&(u[++m]=r);u.length=m+1}}function h(o){for(var n=o<t.duration?t.ease.call(null,o/t.duration):(t.timer.restart(v),t.state=g,1),m=-1,s=u.length;++m<s;)u[m].call(a,n);t.state===g&&(t.on.call("end",a,a.__data__,t.index,t.group),v())}function v(){t.state=p,t.timer.stop(),delete i[e];for(var o in i)return;delete a.__transition}}export{g as E,l as S,p as a,U as b,D as g,b as i,j as s};
