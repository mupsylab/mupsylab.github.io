import{f as he}from"./vendor-8F4M-BzORa8vA.js";import{S as be}from"./vendor-A4pQ-9PlIezaS.js";import{f as ge}from"./vendor-dp5X-Vx0xvMZC.js";import{F as ye}from"./vendor-8OGP-F4ToIqxC.js";import{a as _e,f as B}from"./vendor-clQw-JAUZZBS7.js";import{_ as Se}from"./vendor-pM4a-CqGSI99y.js";import{g as R}from"./vendor-X8P5-CF3LkWx9.js";import{u as Ie}from"./vendor-hmuK-B6xHqdWm.js";import{u as Fe}from"./vendor-unoq-CFxLHdLI.js";import{u as Ce}from"./vendor-9Byw-aJtbE-z4.js";import{b as E}from"./vendor-7XBs-C2ZIZBcB.js";import{c as we}from"./vendor-UUu6-BeUS1t8s.js";import{c as Ve,a as A,n as b,t as D,d as qe,i as Re}from"./vendor-7avT-DhdrFwTb.js";import{j as xe}from"./vendor-k87t-DYFOtHqs.js";import{c as L}from"./vendor-sJES-T5Eo13Ui.js";import{c as T}from"./vendor-oqgF-wtU8Lgb8.js";import{d as Q,u as ze,l as G,c as i,w as K,e as We,j as $e,a as Me,o as U,z as O,b as H,h as x,f as Pe,C as J,i as je,r as z,E as ke,t as Ne,p as Be}from"./vendor-RE7Z-DOm9JKld.js";import{r as g,a as Ee,t as Ae,u as s}from"./vendor-eqDO-Ti6p_k8X.js";const De=Q({name:"ElFormItem"}),Le=Q({...De,props:ge,setup(X,{expose:Y}){const r=X,W=ze(),t=G(_e,void 0),Z=G(B,void 0),y=Ie(void 0,{formItem:!1}),n=Fe("form-item"),_=Ce().value,d=g([]),c=g(""),ee=xe(c,100),m=g(""),$=g();let M,p=!1;const h=i(()=>r.labelPosition||(t==null?void 0:t.labelPosition)),P=i(()=>{if(h.value==="top")return{};const e=E(r.labelWidth||(t==null?void 0:t.labelWidth)||"");return e?{width:e}:{}}),te=i(()=>{if(h.value==="top"||t!=null&&t.inline)return{};if(!r.label&&!r.labelWidth&&ae)return{};const e=E(r.labelWidth||(t==null?void 0:t.labelWidth)||"");return!r.label&&!W.label?{marginLeft:e}:{}}),re=i(()=>[n.b(),n.m(y.value),n.is("error",c.value==="error"),n.is("validating",c.value==="validating"),n.is("success",c.value==="success"),n.is("required",ue.value||r.required),n.is("no-asterisk",t==null?void 0:t.hideRequiredAsterisk),(t==null?void 0:t.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[n.m("feedback")]:t==null?void 0:t.statusIcon,[n.m(`label-${h.value}`)]:h.value}]),oe=i(()=>we(r.inlineMessage)?r.inlineMessage:(t==null?void 0:t.inlineMessage)||!1),se=i(()=>[n.e("error"),{[n.em("error","inline")]:oe.value}]),le=i(()=>r.prop?Ve(r.prop)?r.prop:r.prop.join("."):""),S=i(()=>!!(r.label||W.label)),I=i(()=>r.for||(d.value.length===1?d.value[0]:void 0)),F=i(()=>!I.value&&S.value),ae=!!Z,C=i(()=>{const e=t==null?void 0:t.model;if(!(!e||!r.prop))return R(e,r.prop).value}),w=i(()=>{const{required:e}=r,o=[];r.rules&&o.push(...L(r.rules));const a=t==null?void 0:t.rules;if(a&&r.prop){const l=R(a,r.prop).value;l&&o.push(...L(l))}if(e!==void 0){const l=o.map((u,v)=>[u,v]).filter(([u])=>Object.keys(u).includes("required"));if(l.length>0)for(const[u,v]of l)u.required!==e&&(o[v]={...u,required:e});else o.push({required:e})}return o}),ie=i(()=>w.value.length>0),ne=e=>w.value.filter(a=>!a.trigger||!e?!0:Re(a.trigger)?a.trigger.includes(e):a.trigger===e).map(({trigger:a,...l})=>l),ue=i(()=>w.value.some(e=>e.required)),de=i(()=>{var e;return ee.value==="error"&&r.showMessage&&((e=t==null?void 0:t.showMessage)!=null?e:!0)}),j=i(()=>`${r.label||""}${(t==null?void 0:t.labelSuffix)||""}`),f=e=>{c.value=e},ce=e=>{var o,a;const{errors:l,fields:u}=e;(!l||!u)&&console.error(e),f("error"),m.value=l?(a=(o=l==null?void 0:l[0])==null?void 0:o.message)!=null?a:`${r.prop} is required`:"",t==null||t.emit("validate",r.prop,!1,m.value)},me=()=>{f("success"),t==null||t.emit("validate",r.prop,!0,"")},fe=async e=>{const o=le.value;return new be({[o]:e}).validate({[o]:C.value},{firstFields:!0}).then(()=>(me(),!0)).catch(l=>(ce(l),Promise.reject(l)))},k=async(e,o)=>{if(p||!r.prop)return!1;const a=qe(o);if(!ie.value)return o==null||o(!1),!1;const l=ne(e);return l.length===0?(o==null||o(!0),!0):(f("validating"),fe(l).then(()=>(o==null||o(!0),!0)).catch(u=>{const{fields:v}=u;return o==null||o(!1,v),a?!1:Promise.reject(v)}))},V=()=>{f(""),m.value="",p=!1},N=async()=>{const e=t==null?void 0:t.model;if(!e||!r.prop)return;const o=R(e,r.prop);p=!0,o.value=T(M),await Ne(),V(),p=!1},ve=e=>{d.value.includes(e)||d.value.push(e)},pe=e=>{d.value=d.value.filter(o=>o!==e)};K(()=>r.error,e=>{m.value=e||"",f(e?"error":"")},{immediate:!0}),K(()=>r.validateStatus,e=>f(e||""));const q=Ee({...Ae(r),$el:$,size:y,validateState:c,labelId:_,inputIds:d,isGroup:F,hasLabel:S,fieldValue:C,addInputId:ve,removeInputId:pe,resetField:N,clearValidate:V,validate:k});return Be(B,q),We(()=>{r.prop&&(t==null||t.addField(q),M=T(C.value))}),$e(()=>{t==null||t.removeField(q)}),Y({size:y,validateMessage:m,validateState:c,validate:k,clearValidate:V,resetField:N}),(e,o)=>{var a;return U(),Me("div",{ref_key:"formItemRef",ref:$,class:b(s(re)),role:s(F)?"group":void 0,"aria-labelledby":s(F)?s(_):void 0},[O(s(ye),{"is-auto-width":s(P).width==="auto","update-all":((a=s(t))==null?void 0:a.labelWidth)==="auto"},{default:x(()=>[s(S)?(U(),Pe(je(s(I)?"label":"div"),{key:0,id:s(_),for:s(I),class:b(s(n).e("label")),style:A(s(P))},{default:x(()=>[z(e.$slots,"label",{label:s(j)},()=>[ke(D(s(j)),1)])]),_:3},8,["id","for","class","style"])):J("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),H("div",{class:b(s(n).e("content")),style:A(s(te))},[z(e.$slots,"default"),O(he,{name:`${s(n).namespace.value}-zoom-in-top`},{default:x(()=>[s(de)?z(e.$slots,"error",{key:0,error:m.value},()=>[H("div",{class:b(s(se))},D(m.value),3)]):J("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var it=Se(Le,[["__file","form-item.vue"]]);export{it as F};
