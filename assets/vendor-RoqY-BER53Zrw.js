import{a as p}from"./vendor-5WKb-KWd2YoVw.js";import{u as y}from"./vendor-unoq-CFxLHdLI.js";import{E as l}from"./vendor-bP7i-BUADUvnR.js";import{s as m}from"./vendor-eqDO-Ti6p_k8X.js";import{e as h,q as b,w as k}from"./vendor-RE7Z-DOm9JKld.js";function E({el$:n},d){const u=y("tree"),t=m([]),s=m([]);h(()=>{v()}),b(()=>{t.value=Array.from(n.value.querySelectorAll("[role=treeitem]")),s.value=Array.from(n.value.querySelectorAll("input[type=checkbox]"))}),k(s,r=>{r.forEach(a=>{a.setAttribute("tabindex","-1")})}),p(n,"keydown",r=>{const a=r.target;if(!a.className.includes(u.b("node")))return;const c=r.code;t.value=Array.from(n.value.querySelectorAll(`.${u.is("focusable")}[role=treeitem]`));const o=t.value.indexOf(a);let e;if([l.up,l.down].includes(c)){if(r.preventDefault(),c===l.up){e=o===-1?0:o!==0?o-1:t.value.length-1;const i=e;for(;!d.value.getNode(t.value[e].dataset.key).canFocus;){if(e--,e===i){e=-1;break}e<0&&(e=t.value.length-1)}}else{e=o===-1?0:o<t.value.length-1?o+1:0;const i=e;for(;!d.value.getNode(t.value[e].dataset.key).canFocus;){if(e++,e===i){e=-1;break}e>=t.value.length&&(e=0)}}e!==-1&&t.value[e].focus()}[l.left,l.right].includes(c)&&(r.preventDefault(),a.click());const f=a.querySelector('[type="checkbox"]');[l.enter,l.numpadEnter,l.space].includes(c)&&f&&(r.preventDefault(),f.click())});const v=()=>{var r;t.value=Array.from(n.value.querySelectorAll(`.${u.is("focusable")}[role=treeitem]`)),s.value=Array.from(n.value.querySelectorAll("input[type=checkbox]"));const a=n.value.querySelectorAll(`.${u.is("checked")}[role=treeitem]`);if(a.length){a[0].setAttribute("tabindex","0");return}(r=t.value[0])==null||r.setAttribute("tabindex","0")}}export{E as u};
