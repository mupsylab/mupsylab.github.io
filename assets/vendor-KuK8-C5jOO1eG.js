import{G as $}from"./vendor-dtTa-BJZJvsXb.js";import{O as J}from"./vendor-IvkO-DeDBtv1q.js";import{u as Q}from"./vendor-PaCD-BGOM4hNh.js";import{s as W}from"./vendor-xMAo-BVVr2ZPm.js";import{F as X}from"./vendor-jZZc-osznSK5I.js";import{D as Y}from"./vendor-872A-DOKnFUU8.js";import{u as Z}from"./vendor-unoq-CFxLHdLI.js";import{a as ee}from"./vendor-UUu6-BeUS1t8s.js";import{E as te}from"./vendor-bP7i-BUADUvnR.js";import{j as _}from"./vendor-7avT-DhdrFwTb.js";import{g as f}from"./vendor-sXNC-Da9ghdLI.js";import{d as oe,l as se,c as S,w as ne,z as d,H as K}from"./vendor-RE7Z-DOm9JKld.js";import{r as N,u as v,c as re}from"./vendor-eqDO-Ti6p_k8X.js";const ie={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var ze=oe({name:"ElSelectDropdown",props:ie,setup(h,{slots:n,expose:T}){const s=se(W),b=Z("select"),{getLabel:k,getValue:y,getDisabled:L}=Q(s.props),j=N([]),m=N(),P=S(()=>h.data.length);ne(()=>P.value,()=>{var e,t;(t=(e=s.tooltipRef.value).updatePopper)==null||t.call(e)});const u=S(()=>ee(s.props.estimatedOptionHeight)),I=S(()=>u.value?{itemSize:s.props.itemHeight}:{estimatedSize:s.props.estimatedOptionHeight,itemSize:e=>j.value[e]}),V=(e=[],t)=>{const{props:{valueKey:o}}=s;return _(t)?e&&e.some(r=>re(f(r,o))===f(t,o)):e.includes(t)},A=(e,t)=>{if(_(t)){const{valueKey:o}=s.props;return f(e,o)===f(t,o)}else return e===t},z=(e,t)=>s.props.multiple?V(e,y(t)):A(e,y(t)),E=(e,t)=>{const{disabled:o,multiple:r,multipleLimit:i}=s.props;return o||!t&&(r?i>0&&e.length>=i:!1)},H=e=>h.hoveringIndex===e;T({listRef:m,isSized:u,isItemDisabled:E,isItemHovering:H,isItemSelected:z,scrollToItem:e=>{const t=m.value;t&&t.scrollToItem(e)},resetScrollTop:()=>{const e=m.value;e&&e.resetScrollTop()}});const F=e=>{const{index:t,data:o,style:r}=e,i=v(u),{itemSize:l,estimatedSize:p}=v(I),{modelValue:c}=s.props,{onSelect:g,onHover:w}=s,a=o[t];if(a.type==="Group")return d($,{item:a,style:r,height:i?l:p},null);const D=z(c,a),C=E(c,D),M=H(t);return d(J,K(e,{selected:D,disabled:L(a)||C,created:!!a.created,hovering:M,item:a,onSelect:g,onHover:w}),{default:U=>{var O;return((O=n.default)==null?void 0:O.call(n,U))||d("span",null,[k(a)])}})},{onKeyboardNavigate:x,onKeyboardSelect:G}=s,R=()=>{x("forward")},q=()=>{x("backward")},B=e=>{const{code:t}=e,{tab:o,esc:r,down:i,up:l,enter:p,numpadEnter:c}=te;switch(t!==o&&(e.preventDefault(),e.stopPropagation()),t){case o:case r:break;case i:R();break;case l:q();break;case p:case c:G();break}};return()=>{var e,t,o,r;const{data:i,width:l}=h,{height:p,multiple:c,scrollbarAlwaysOn:g}=s.props,w=v(u)?X:Y;return d("div",{class:[b.b("dropdown"),b.is("multiple",c)],style:{width:`${l}px`}},[(e=n.header)==null?void 0:e.call(n),((t=n.loading)==null?void 0:t.call(n))||((o=n.empty)==null?void 0:o.call(n))||d(w,K({ref:m},v(I),{className:b.be("dropdown","list"),scrollbarAlwaysOn:g,data:i,height:p,width:l,total:i.length,onKeydown:B}),{default:a=>d(F,a,null)}),(r=n.footer)==null?void 0:r.call(n)])}}});export{ze as E};
