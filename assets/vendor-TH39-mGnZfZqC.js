import{a as y,u as B}from"./vendor-hmuK-B6xHqdWm.js";import{a as G}from"./vendor-UUu6-BeUS1t8s.js";import{C as s,U as v,I as H}from"./vendor-lLeK-BB_Ol6Sd.js";import{E}from"./vendor-bP7i-BUADUvnR.js";import{u as K}from"./vendor-GuIu-Dc0c8fP9.js";import{d as C}from"./vendor-0rdd-Cq9Fpw4b.js";import{u as M}from"./vendor-5iTR-BBy9iiW8.js";import{s as W,r as j}from"./vendor-eqDO-Ti6p_k8X.js";import{c as f,w as q}from"./vendor-RE7Z-DOm9JKld.js";function la({props:e,emit:o,formItem:n}){const m=y(),_=B(),i=W(),r=j(),p=f(()=>["small"].includes(_.value)?"small":"default"),T=f(()=>{var a;return(a=e.modelValue)!=null&&a.length?void 0:e.placeholder}),D=f(()=>!(e.readonly||m.value)),h=f(()=>{var a,l;return G(e.max)?!1:((l=(a=e.modelValue)==null?void 0:a.length)!=null?l:0)>=e.max}),b=a=>{if(h.value){r.value=void 0;return}g.value||o(H,a.target.value)},w=a=>{var l;if(!g.value)switch(a.code){case e.trigger:a.preventDefault(),a.stopPropagation(),c();break;case E.numpadEnter:e.trigger===E.enter&&(a.preventDefault(),a.stopPropagation(),c());break;case E.backspace:!r.value&&((l=e.modelValue)!=null&&l.length)&&(a.preventDefault(),a.stopPropagation(),V(e.modelValue.length-1));break}},c=()=>{var a,l;const t=(a=r.value)==null?void 0:a.trim();if(!t||h.value)return;const u=[...(l=e.modelValue)!=null?l:[],t];o(v,u),o(s,u),o("add-tag",t),r.value=void 0},V=a=>{var l;const t=((l=e.modelValue)!=null?l:[]).slice(),[u]=t.splice(a,1);o(v,t),o(s,t),o("remove-tag",u)},N=()=>{r.value=void 0,o(v,void 0),o(s,void 0),o("clear")},F=(a,l,t)=>{var u;const d=((u=e.modelValue)!=null?u:[]).slice(),[L]=d.splice(a,1),O=l>a&&t==="before"?-1:l<a&&t==="after"?1:0;d.splice(l+O,0,L),o(v,d),o(s,d)},P=()=>{var a;(a=i.value)==null||a.focus()},U=()=>{var a;(a=i.value)==null||a.blur()},{wrapperRef:k,isFocused:R}=K(i,{beforeFocus(){return m.value},afterBlur(){var a;c(),e.validateEvent&&((a=n==null?void 0:n.validate)==null||a.call(n,"blur").catch(l=>C()))}}),{isComposing:g,handleCompositionStart:z,handleCompositionUpdate:A,handleCompositionEnd:S}=M({afterComposition:b});return q(()=>e.modelValue,()=>{var a;e.validateEvent&&((a=n==null?void 0:n.validate)==null||a.call(n,s).catch(l=>C()))}),{inputRef:i,wrapperRef:k,isFocused:R,isComposing:g,inputValue:r,size:_,tagSize:p,placeholder:T,closable:D,disabled:m,inputLimit:h,handleDragged:F,handleInput:b,handleKeydown:w,handleAddTag:c,handleRemoveTag:V,handleClear:N,handleCompositionStart:z,handleCompositionUpdate:A,handleCompositionEnd:S,focus:P,blur:U}}export{la as u};
