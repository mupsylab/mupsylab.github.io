import{w as Te}from"./vendor-8F4M-BzORa8vA.js";import{u as He}from"./vendor-5WKb-KWd2YoVw.js";import{E as k}from"./vendor-AQSj-DFJim-ok.js";import{A as Le,B as Oe,c as Ae}from"./vendor-Fq1d-qefZ2EtI.js";import{c as ue}from"./vendor-rEUJ-DaErfv0N.js";import{i as De,a as Ke}from"./vendor-KDNv-DmbVfGd7.js";import{_ as Ue}from"./vendor-pM4a-CqGSI99y.js";import{u as We}from"./vendor-g2q2-CIPiop1j.js";import{u as je,a as Ye}from"./vendor-eqCW-DCj8_tuZ.js";import{u as qe,a as Ge}from"./vendor-hmuK-B6xHqdWm.js";import{u as Je}from"./vendor-GuIu-Dc0c8fP9.js";import{V as Qe}from"./vendor-9yxy-Cbwm2u4R.js";import{u as Xe}from"./vendor-5iTR-BBy9iiW8.js";import{u as Ze}from"./vendor-N5CD-D9_btB0E.js";import{u as pe}from"./vendor-unoq-CFxLHdLI.js";import{d as de}from"./vendor-0rdd-Cq9Fpw4b.js";import{n as l,N as _e,t as $,a as ce,j as fe}from"./vendor-7avT-DhdrFwTb.js";import{U as me}from"./vendor-lLeK-BB_Ol6Sd.js";import{d as he,R as ea,u as aa,c as i,w as O,t as S,e as oa,a as p,o as n,C as r,F as A,b,r as M,f,h as z,i as N,H as ve,z as sa}from"./vendor-RE7Z-DOm9JKld.js";import{i as ta}from"./vendor-16Vo-CHIgUVhi.js";import{s as D,r as K,b as na,u as a}from"./vendor-eqDO-Ti6p_k8X.js";import{i as ra}from"./vendor-k87t-DYFOtHqs.js";const la=he({name:"ElInput",inheritAttrs:!1}),ia=he({...la,props:Ke,emits:De,setup(ye,{expose:we,emit:u}){const o=ye,U=ea(),W=We(),g=aa(),be=i(()=>[o.type==="textarea"?q.b():s.b(),s.m(Ce.value),s.is("disabled",v.value),s.is("exceed",Ve.value),{[s.b("group")]:g.prepend||g.append,[s.m("prefix")]:g.prefix||o.prefixIcon,[s.m("suffix")]:g.suffix||o.suffixIcon||o.clearable||o.showPassword,[s.bm("suffix","password-clear")]:P.value&&T.value,[s.b("hidden")]:o.type==="hidden"},U.class]),ge=i(()=>[s.e("wrapper"),s.is("focus",F.value)]),{form:j,formItem:d}=je(),{inputId:Y}=Ye(o,{formItemContext:d}),Ce=qe(),v=Ge(),s=pe("input"),q=pe("textarea"),V=D(),c=D(),B=K(!1),E=K(!1),G=K(),R=D(o.inputStyle),h=i(()=>V.value||c.value),{wrapperRef:Ie,isFocused:F,handleFocus:xe,handleBlur:ke}=Je(h,{beforeFocus(){return v.value},afterBlur(){var e;o.validateEvent&&((e=d==null?void 0:d.validate)==null||e.call(d,"blur").catch(t=>de()))}}),J=i(()=>{var e;return(e=j==null?void 0:j.statusIcon)!=null?e:!1}),C=i(()=>(d==null?void 0:d.validateState)||""),Q=i(()=>C.value&&Qe[C.value]),Se=i(()=>E.value?Le:Oe),ze=i(()=>[U.style]),X=i(()=>[o.inputStyle,R.value,{resize:o.resize}]),m=i(()=>ta(o.modelValue)?"":String(o.modelValue)),P=i(()=>o.clearable&&!v.value&&!o.readonly&&!!m.value&&(F.value||B.value)),T=i(()=>o.showPassword&&!v.value&&!!m.value&&(!!m.value||F.value)),y=i(()=>o.showWordLimit&&!!o.maxlength&&(o.type==="text"||o.type==="textarea")&&!v.value&&!o.readonly&&!o.showPassword),H=i(()=>m.value.length),Ve=i(()=>!!y.value&&H.value>Number(o.maxlength)),Ee=i(()=>!!g.suffix||!!o.suffixIcon||P.value||o.showPassword||y.value||!!C.value&&J.value),[Z,_]=Ze(V);He(c,e=>{if(Re(),!y.value||o.resize!=="both")return;const t=e[0],{width:w}=t.contentRect;G.value={right:`calc(100% - ${w+15+6}px)`}});const I=()=>{const{type:e,autosize:t}=o;if(!(!ra||e!=="textarea"||!c.value))if(t){const w=fe(t)?t.minRows:void 0,le=fe(t)?t.maxRows:void 0,ie=ue(c.value,w,le);R.value={overflowY:"hidden",...ie},S(()=>{c.value.offsetHeight,R.value=ie})}else R.value={minHeight:ue(c.value).minHeight}},Re=(e=>{let t=!1;return()=>{var w;if(t||!o.autosize)return;((w=c.value)==null?void 0:w.offsetParent)===null||(e(),t=!0)}})(I),x=()=>{const e=h.value,t=o.formatter?o.formatter(m.value):m.value;!e||e.value===t||(e.value=t)},L=async e=>{Z();let{value:t}=e.target;if(o.formatter&&(t=o.parser?o.parser(t):t),!ae.value){if(t===m.value){x();return}u(me,t),u("input",t),await S(),x(),_()}},ee=e=>{u("change",e.target.value)},{isComposing:ae,handleCompositionStart:oe,handleCompositionUpdate:se,handleCompositionEnd:te}=Xe({emit:u,afterComposition:L}),Fe=()=>{Z(),E.value=!E.value,setTimeout(_)},Pe=()=>{var e;return(e=h.value)==null?void 0:e.focus()},$e=()=>{var e;return(e=h.value)==null?void 0:e.blur()},Me=e=>{B.value=!1,u("mouseleave",e)},Ne=e=>{B.value=!0,u("mouseenter",e)},ne=e=>{u("keydown",e)},Be=()=>{var e;(e=h.value)==null||e.select()},re=()=>{u(me,""),u("change",""),u("clear"),u("input","")};return O(()=>o.modelValue,()=>{var e;S(()=>I()),o.validateEvent&&((e=d==null?void 0:d.validate)==null||e.call(d,"change").catch(t=>de()))}),O(m,()=>x()),O(()=>o.type,async()=>{await S(),x(),I()}),oa(()=>{!o.formatter&&o.parser,x(),S(I)}),we({input:V,textarea:c,ref:h,textareaStyle:X,autosize:na(o,"autosize"),isComposing:ae,focus:Pe,blur:$e,select:Be,clear:re,resizeTextarea:I}),(e,t)=>(n(),p("div",{class:l([a(be),{[a(s).bm("group","append")]:e.$slots.append,[a(s).bm("group","prepend")]:e.$slots.prepend}]),style:ce(a(ze)),onMouseenter:Ne,onMouseleave:Me},[r(" input "),e.type!=="textarea"?(n(),p(A,{key:0},[r(" prepend slot "),e.$slots.prepend?(n(),p("div",{key:0,class:l(a(s).be("group","prepend"))},[M(e.$slots,"prepend")],2)):r("v-if",!0),b("div",{ref_key:"wrapperRef",ref:Ie,class:l(a(ge))},[r(" prefix slot "),e.$slots.prefix||e.prefixIcon?(n(),p("span",{key:0,class:l(a(s).e("prefix"))},[b("span",{class:l(a(s).e("prefix-inner"))},[M(e.$slots,"prefix"),e.prefixIcon?(n(),f(a(k),{key:0,class:l(a(s).e("icon"))},{default:z(()=>[(n(),f(N(e.prefixIcon)))]),_:1},8,["class"])):r("v-if",!0)],2)],2)):r("v-if",!0),b("input",ve({id:a(Y),ref_key:"input",ref:V,class:a(s).e("inner")},a(W),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?E.value?"text":"password":e.type,disabled:a(v),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,onCompositionstart:a(oe),onCompositionupdate:a(se),onCompositionend:a(te),onInput:L,onChange:ee,onKeydown:ne}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),r(" suffix slot "),a(Ee)?(n(),p("span",{key:1,class:l(a(s).e("suffix"))},[b("span",{class:l(a(s).e("suffix-inner"))},[!a(P)||!a(T)||!a(y)?(n(),p(A,{key:0},[M(e.$slots,"suffix"),e.suffixIcon?(n(),f(a(k),{key:0,class:l(a(s).e("icon"))},{default:z(()=>[(n(),f(N(e.suffixIcon)))]),_:1},8,["class"])):r("v-if",!0)],64)):r("v-if",!0),a(P)?(n(),f(a(k),{key:1,class:l([a(s).e("icon"),a(s).e("clear")]),onMousedown:Te(a(_e),["prevent"]),onClick:re},{default:z(()=>[sa(a(Ae))]),_:1},8,["class","onMousedown"])):r("v-if",!0),a(T)?(n(),f(a(k),{key:2,class:l([a(s).e("icon"),a(s).e("password")]),onClick:Fe},{default:z(()=>[(n(),f(N(a(Se))))]),_:1},8,["class"])):r("v-if",!0),a(y)?(n(),p("span",{key:3,class:l(a(s).e("count"))},[b("span",{class:l(a(s).e("count-inner"))},$(a(H))+" / "+$(e.maxlength),3)],2)):r("v-if",!0),a(C)&&a(Q)&&a(J)?(n(),f(a(k),{key:4,class:l([a(s).e("icon"),a(s).e("validateIcon"),a(s).is("loading",a(C)==="validating")])},{default:z(()=>[(n(),f(N(a(Q))))]),_:1},8,["class"])):r("v-if",!0)],2)],2)):r("v-if",!0)],2),r(" append slot "),e.$slots.append?(n(),p("div",{key:1,class:l(a(s).be("group","append"))},[M(e.$slots,"append")],2)):r("v-if",!0)],64)):(n(),p(A,{key:1},[r(" textarea "),b("textarea",ve({id:a(Y),ref_key:"textarea",ref:c,class:[a(q).e("inner"),a(s).is("focus",a(F))]},a(W),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:a(v),readonly:e.readonly,autocomplete:e.autocomplete,style:a(X),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:a(oe),onCompositionupdate:a(se),onCompositionend:a(te),onInput:L,onFocus:a(xe),onBlur:a(ke),onChange:ee,onKeydown:ne}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),a(y)?(n(),p("span",{key:0,style:ce(G.value),class:l(a(s).e("count"))},$(a(H))+" / "+$(e.maxlength),7)):r("v-if",!0)],64))],38))}});var $a=Ue(ia,[["__file","input.vue"]]);export{$a as I};
