import{a as C,w as T}from"./vendor-8F4M-BzORa8vA.js";import{d as _}from"./vendor-v13v-B_uL0f_K.js";import{b as z}from"./vendor-w8zH-BzOb67_A.js";import{d as $,c as Y}from"./vendor-4YxN-Ca0MF-br.js";import{E as q}from"./vendor-MzsW-CDimbJ-j.js";import{_ as G}from"./vendor-pM4a-CqGSI99y.js";import{u as H}from"./vendor-unoq-CFxLHdLI.js";import{u as J}from"./vendor-cebD-BGFhTQCu.js";import{c as p}from"./vendor-8z51-DLeBPiYL.js";import{h as O}from"./vendor-7XBs-C2ZIZBcB.js";import{d as Q,c as U,w as W,t as X,a as h,o as D,b as Z,F as V,D as I,z as ee}from"./vendor-RE7Z-DOm9JKld.js";import{r as u,u as f}from"./vendor-eqDO-Ti6p_k8X.js";import{n as R}from"./vendor-7avT-DhdrFwTb.js";const te=Q({__name:"basic-month-table",props:z,emits:["changerange","pick","select"],setup(A,{expose:B,emit:m}){const e=A,E=H("month-table"),{t:v,lang:y}=J(),k=u(),g=u(),P=u(e.date.locale("en").localeData().monthsShort().map(a=>a.toLowerCase())),j=u([[],[],[]]),S=u(),M=u(),N=U(()=>{var a,o;const t=j.value,r=_().locale(y.value).startOf("month");for(let n=0;n<3;n++){const i=t[n];for(let s=0;s<4;s++){const c=i[s]||(i[s]={row:n,column:s,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});c.type="normal";const b=n*4+s,l=e.date.startOf("year").month(b),d=e.rangeState.endDate||e.maxDate||e.rangeState.selecting&&e.minDate||null;c.inRange=!!(e.minDate&&l.isSameOrAfter(e.minDate,"month")&&d&&l.isSameOrBefore(d,"month"))||!!(e.minDate&&l.isSameOrBefore(e.minDate,"month")&&d&&l.isSameOrAfter(d,"month")),(a=e.minDate)!=null&&a.isSameOrAfter(d)?(c.start=!!(d&&l.isSame(d,"month")),c.end=e.minDate&&l.isSame(e.minDate,"month")):(c.start=!!(e.minDate&&l.isSame(e.minDate,"month")),c.end=!!(d&&l.isSame(d,"month"))),r.isSame(l)&&(c.type="today"),c.text=b,c.disabled=((o=e.disabledDate)==null?void 0:o.call(e,l.toDate()))||!1}}return t}),F=()=>{var a;(a=g.value)==null||a.focus()},K=a=>{const o={},t=e.date.year(),r=new Date,n=a.text;return o.disabled=e.disabledDate?$(t,n,y.value).every(e.disabledDate):!1,o.current=p(e.parsedValue).findIndex(i=>_.isDayjs(i)&&i.year()===t&&i.month()===n)>=0,o.today=r.getFullYear()===t&&r.getMonth()===n,a.inRange&&(o["in-range"]=!0,a.start&&(o["start-date"]=!0),a.end&&(o["end-date"]=!0)),o},w=a=>{const o=e.date.year(),t=a.text;return p(e.date).findIndex(r=>r.year()===o&&r.month()===t)>=0},L=a=>{var o;if(!e.rangeState.selecting)return;let t=a.target;if(t.tagName==="SPAN"&&(t=(o=t.parentNode)==null?void 0:o.parentNode),t.tagName==="DIV"&&(t=t.parentNode),t.tagName!=="TD")return;const r=t.parentNode.rowIndex,n=t.cellIndex;N.value[r][n].disabled||(r!==S.value||n!==M.value)&&(S.value=r,M.value=n,m("changerange",{selecting:!0,endDate:e.date.startOf("year").month(r*4+n)}))},x=a=>{var o;const t=(o=a.target)==null?void 0:o.closest("td");if((t==null?void 0:t.tagName)!=="TD"||O(t,"disabled"))return;const r=t.cellIndex,i=t.parentNode.rowIndex*4+r,s=e.date.startOf("year").month(i);if(e.selectionMode==="months"){if(a.type==="keydown"){m("pick",p(e.parsedValue),!1);return}const c=Y(e.date.year(),i,y.value,e.disabledDate),b=O(t,"current")?p(e.parsedValue).filter(l=>(l==null?void 0:l.month())!==c.month()):p(e.parsedValue).concat([_(c)]);m("pick",b)}else e.selectionMode==="range"?e.rangeState.selecting?(e.minDate&&s>=e.minDate?m("pick",{minDate:e.minDate,maxDate:s}):m("pick",{minDate:s,maxDate:e.minDate}),m("select",!1)):(m("pick",{minDate:s,maxDate:null}),m("select",!0)):m("pick",i)};return W(()=>e.date,async()=>{var a,o;(a=k.value)!=null&&a.contains(document.activeElement)&&(await X(),(o=g.value)==null||o.focus())}),B({focus:F}),(a,o)=>(D(),h("table",{role:"grid","aria-label":f(v)("el.datepicker.monthTablePrompt"),class:R(f(E).b()),onClick:x,onMousemove:L},[Z("tbody",{ref_key:"tbodyRef",ref:k},[(D(!0),h(V,null,I(f(N),(t,r)=>(D(),h("tr",{key:r},[(D(!0),h(V,null,I(t,(n,i)=>(D(),h("td",{key:i,ref_for:!0,ref:s=>w(n)&&(g.value=s),class:R(K(n)),"aria-selected":`${w(n)}`,"aria-label":f(v)(`el.datepicker.month${+n.text+1}`),tabindex:w(n)?0:-1,onKeydown:[C(T(x,["prevent","stop"]),["space"]),C(T(x,["prevent","stop"]),["enter"])]},[ee(f(q),{cell:{...n,renderText:f(v)("el.datepicker.months."+P.value[n.text])}},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var De=G(te,[["__file","basic-month-table.vue"]]);export{De as M};
