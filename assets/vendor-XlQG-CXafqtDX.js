import{E as ms}from"./vendor-MxHc-DHRJLLZd.js";import{E as V}from"./vendor-AQSj-DFJim-ok.js";import{p as ds,k as ps}from"./vendor-Fq1d-qefZ2EtI.js";import{t as z}from"./vendor-vM9O-Cv4B9otZ.js";import{b as N}from"./vendor-CCI2-D_GY1FD7.js";import{b as fs}from"./vendor-rmZF-F0KlLFic.js";import{g as hs}from"./vendor-ZCF9-BTnwXcZT.js";import{_ as bs}from"./vendor-pM4a-CqGSI99y.js";import{v as U}from"./vendor-QmjE-CI3KpIRn.js";import{u as ws}from"./vendor-unoq-CFxLHdLI.js";import{g as gs}from"./vendor-7XBs-C2ZIZBcB.js";import{i as vs}from"./vendor-UUu6-BeUS1t8s.js";import{d as Ss}from"./vendor-9Eji-ZqQOO7NL.js";import{d as _s,l as ks,c as k,e as Cs,t as q,w as Ms,a as l,o as i,C as B,F as u,D as C,f as x,h as F,E as M,y as K,b as Ds,z as G}from"./vendor-RE7Z-DOm9JKld.js";import{r as D,u as n}from"./vendor-eqDO-Ti6p_k8X.js";import{n as m,t as h}from"./vendor-7avT-DhdrFwTb.js";const $s=_s({__name:"basic-time-spinner",props:fs,emits:["change","select-range","set-option"],setup(J,{emit:g}){const a=J,O=ks("EP_PICKER_BASE"),{isRange:Q}=O.props,c=ws("time"),{getHoursList:W,getMinutesList:X,getSecondsList:Y}=hs(a.disabledHours,a.disabledMinutes,a.disabledSeconds);let $=!1;const v=D(),Z=D(),y=D(),ss=D(),f={hours:Z,minutes:y,seconds:ss},H=k(()=>a.showSeconds?z:z.slice(0,2)),d=k(()=>{const{spinnerDate:s}=a,o=s.hour(),e=s.minute(),r=s.second();return{hours:o,minutes:e,seconds:r}}),S=k(()=>{const{hours:s,minutes:o}=n(d),{role:e,spinnerDate:r}=a,t=Q?void 0:r;return{hours:W(e,t),minutes:X(s,e,t),seconds:Y(s,o,e,t)}}),es=k(()=>{const{hours:s,minutes:o,seconds:e}=n(d);return{hours:N(s,23),minutes:N(o,59),seconds:N(e,59)}}),os=Ss(s=>{$=!1,b(s)},200),I=s=>{if(!!!a.amPmMode)return"";const e=a.amPmMode==="A";let r=s<12?" am":" pm";return e&&(r=r.toUpperCase()),r},p=s=>{let o;switch(s){case"hours":o=[0,2];break;case"minutes":o=[3,5];break;case"seconds":o=[6,8];break}const[e,r]=o;g("select-range",e,r),v.value=s},b=s=>{P(s,n(d)[s])},A=()=>{b("hours"),b("minutes"),b("seconds")},E=s=>s.querySelector(`.${c.namespace.value}-scrollbar__wrap`),P=(s,o)=>{if(a.arrowControl)return;const e=n(f[s]);e&&e.$el&&(E(e.$el).scrollTop=Math.max(0,o*R(s)))},R=s=>{const o=n(f[s]),e=o==null?void 0:o.$el.querySelector("li");return e&&Number.parseFloat(gs(e,"height"))||0},ns=()=>{T(1)},rs=()=>{T(-1)},T=s=>{v.value||p("hours");const o=v.value,e=n(d)[o],r=v.value==="hours"?24:60,t=ts(o,e,s,r);L(o,t),P(o,t),q(()=>p(o))},ts=(s,o,e,r)=>{let t=(o+e+r)%r;const w=n(S)[s];for(;w[t]&&t!==o;)t=(t+e+r)%r;return t},L=(s,o)=>{if(n(S)[s][o])return;const{hours:t,minutes:w,seconds:j}=n(d);let _;switch(s){case"hours":_=a.spinnerDate.hour(o).minute(w).second(j);break;case"minutes":_=a.spinnerDate.hour(t).minute(o).second(j);break;case"seconds":_=a.spinnerDate.hour(t).minute(w).second(o);break}g("change",_)},as=(s,{value:o,disabled:e})=>{e||(L(s,o),p(s),P(s,o))},is=s=>{const o=n(f[s]);if(!o)return;$=!0,os(s);const e=Math.min(Math.round((E(o.$el).scrollTop-(cs(s)*.5-10)/R(s)+3)/R(s)),s==="hours"?23:59);L(s,e)},cs=s=>n(f[s]).$el.offsetHeight,ls=()=>{const s=o=>{const e=n(f[o]);e&&e.$el&&(E(e.$el).onscroll=()=>{is(o)})};s("hours"),s("minutes"),s("seconds")};Cs(()=>{q(()=>{!a.arrowControl&&ls(),A(),a.role==="start"&&p("hours")})});const us=(s,o)=>{f[o].value=s??void 0};return g("set-option",[`${a.role}_scrollDown`,T]),g("set-option",[`${a.role}_emitSelectRange`,p]),Ms(()=>a.spinnerDate,()=>{$||A()}),(s,o)=>(i(),l("div",{class:m([n(c).b("spinner"),{"has-seconds":s.showSeconds}])},[s.arrowControl?B("v-if",!0):(i(!0),l(u,{key:0},C(n(H),e=>(i(),x(n(ms),{key:e,ref_for:!0,ref:r=>us(r,e),class:m(n(c).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":n(c).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:r=>p(e),onMousemove:r=>b(e)},{default:F(()=>[(i(!0),l(u,null,C(n(S)[e],(r,t)=>(i(),l("li",{key:t,class:m([n(c).be("spinner","item"),n(c).is("active",t===n(d)[e]),n(c).is("disabled",r)]),onClick:w=>as(e,{value:t,disabled:r})},[e==="hours"?(i(),l(u,{key:0},[M(h(("0"+(s.amPmMode?t%12||12:t)).slice(-2))+h(I(t)),1)],64)):(i(),l(u,{key:1},[M(h(("0"+t).slice(-2)),1)],64))],10,["onClick"]))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),s.arrowControl?(i(!0),l(u,{key:1},C(n(H),e=>(i(),l("div",{key:e,class:m([n(c).be("spinner","wrapper"),n(c).is("arrow")]),onMouseenter:r=>p(e)},[K((i(),x(n(V),{class:m(["arrow-up",n(c).be("spinner","arrow")])},{default:F(()=>[G(n(ds))]),_:1},8,["class"])),[[n(U),rs]]),K((i(),x(n(V),{class:m(["arrow-down",n(c).be("spinner","arrow")])},{default:F(()=>[G(n(ps))]),_:1},8,["class"])),[[n(U),ns]]),Ds("ul",{class:m(n(c).be("spinner","list"))},[(i(!0),l(u,null,C(n(es)[e],(r,t)=>(i(),l("li",{key:t,class:m([n(c).be("spinner","item"),n(c).is("active",r===n(d)[e]),n(c).is("disabled",n(S)[e][r])])},[n(vs)(r)?(i(),l(u,{key:0},[e==="hours"?(i(),l(u,{key:0},[M(h(("0"+(s.amPmMode?r%12||12:r)).slice(-2))+h(I(r)),1)],64)):(i(),l(u,{key:1},[M(h(("0"+r).slice(-2)),1)],64))],64)):B("v-if",!0)],2))),128))],2)],42,["onMouseenter"]))),128)):B("v-if",!0)],2))}});var qs=bs($s,[["__file","basic-time-spinner.vue"]]);export{qs as T};
