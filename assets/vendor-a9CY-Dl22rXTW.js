import{a as C,w as Y}from"./vendor-8F4M-BzORa8vA.js";import{d as u}from"./vendor-v13v-B_uL0f_K.js";import{b as $}from"./vendor-j177-B8gYcGXD.js";import{a as q}from"./vendor-4YxN-Ca0MF-br.js";import{E as G}from"./vendor-MzsW-CDimbJ-j.js";import{_ as H}from"./vendor-pM4a-CqGSI99y.js";import{u as J}from"./vendor-unoq-CFxLHdLI.js";import{u as Q}from"./vendor-cebD-BGFhTQCu.js";import{c as f}from"./vendor-8z51-DLeBPiYL.js";import{r as U}from"./vendor-CCI2-D_GY1FD7.js";import{h as R}from"./vendor-7XBs-C2ZIZBcB.js";import{d as W,c as T,w as X,t as Z,a as m,o as y,b as ee,F as V,D as I,z as ae}from"./vendor-RE7Z-DOm9JKld.js";import{r as p,u as b}from"./vendor-eqDO-Ti6p_k8X.js";import{n as M}from"./vendor-7avT-DhdrFwTb.js";const te=W({__name:"basic-year-table",props:$,emits:["changerange","pick","select"],setup(A,{expose:B,emit:d}){const e=A,E=(t,a)=>{const r=u(String(t)).locale(a).startOf("year"),o=r.endOf("year").dayOfYear();return U(o).map(l=>r.add(l,"day").toDate())},N=J("year-table"),{t:K,lang:D}=Q(),_=p(),g=p(),x=T(()=>Math.floor(e.date.year()/10)*10),P=p([[],[],[]]),S=p(),O=p(),h=T(()=>{var t;const a=P.value,r=u().locale(D.value).startOf("year");for(let s=0;s<3;s++){const o=a[s];for(let l=0;l<4&&!(s*4+l>=10);l++){let n=o[l];n||(n={row:s,column:l,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1}),n.type="normal";const v=s*4+l+x.value,i=u().year(v),c=e.rangeState.endDate||e.maxDate||e.rangeState.selecting&&e.minDate||null;n.inRange=!!(e.minDate&&i.isSameOrAfter(e.minDate,"year")&&c&&i.isSameOrBefore(c,"year"))||!!(e.minDate&&i.isSameOrBefore(e.minDate,"year")&&c&&i.isSameOrAfter(c,"year")),(t=e.minDate)!=null&&t.isSameOrAfter(c)?(n.start=!!(c&&i.isSame(c,"year")),n.end=!!(e.minDate&&i.isSame(e.minDate,"year"))):(n.start=!!(e.minDate&&i.isSame(e.minDate,"year")),n.end=!!(c&&i.isSame(c,"year"))),r.isSame(i)&&(n.type="today"),n.text=v;const L=i.toDate();n.disabled=e.disabledDate&&e.disabledDate(L)||!1,o[l]=n}}return a}),j=()=>{var t;(t=g.value)==null||t.focus()},z=t=>{const a={},r=u().locale(D.value),s=t.text;return a.disabled=e.disabledDate?E(s,D.value).every(e.disabledDate):!1,a.today=r.year()===s,a.current=f(e.parsedValue).findIndex(o=>o.year()===s)>=0,t.inRange&&(a["in-range"]=!0,t.start&&(a["start-date"]=!0),t.end&&(a["end-date"]=!0)),a},w=t=>{const a=t.text;return f(e.date).findIndex(r=>r.year()===a)>=0},k=t=>{var a;const r=(a=t.target)==null?void 0:a.closest("td");if(!r||!r.textContent||R(r,"disabled"))return;const s=r.cellIndex,l=r.parentNode.rowIndex*4+s+x.value,n=u().year(l);if(e.selectionMode==="range")e.rangeState.selecting?(e.minDate&&n>=e.minDate?d("pick",{minDate:e.minDate,maxDate:n}):d("pick",{minDate:n,maxDate:e.minDate}),d("select",!1)):(d("pick",{minDate:n,maxDate:null}),d("select",!0));else if(e.selectionMode==="years"){if(t.type==="keydown"){d("pick",f(e.parsedValue),!1);return}const v=q(n.startOf("year"),D.value,e.disabledDate),i=R(r,"current")?f(e.parsedValue).filter(c=>(c==null?void 0:c.year())!==l):f(e.parsedValue).concat([v]);d("pick",i)}else d("pick",l)},F=t=>{var a;if(!e.rangeState.selecting)return;const r=(a=t.target)==null?void 0:a.closest("td");if(!r)return;const s=r.parentNode.rowIndex,o=r.cellIndex;h.value[s][o].disabled||(s!==S.value||o!==O.value)&&(S.value=s,O.value=o,d("changerange",{selecting:!0,endDate:u().year(x.value).add(s*4+o,"year")}))};return X(()=>e.date,async()=>{var t,a;(t=_.value)!=null&&t.contains(document.activeElement)&&(await Z(),(a=g.value)==null||a.focus())}),B({focus:j}),(t,a)=>(y(),m("table",{role:"grid","aria-label":b(K)("el.datepicker.yearTablePrompt"),class:M(b(N).b()),onClick:k,onMousemove:F},[ee("tbody",{ref_key:"tbodyRef",ref:_},[(y(!0),m(V,null,I(b(h),(r,s)=>(y(),m("tr",{key:s},[(y(!0),m(V,null,I(r,(o,l)=>(y(),m("td",{key:`${s}_${l}`,ref_for:!0,ref:n=>w(o)&&(g.value=n),class:M(["available",z(o)]),"aria-selected":w(o),"aria-label":String(o.text),tabindex:w(o)?0:-1,onKeydown:[C(Y(k,["prevent","stop"]),["space"]),C(Y(k,["prevent","stop"]),["enter"])]},[ae(b(G),{cell:o},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var be=H(te,[["__file","basic-year-table.vue"]]);export{be as Y};
