import{d as S}from"./vendor-v13v-B_uL0f_K.js";import{p as be}from"./vendor-SGAo-7msEqaTP.js";import{u as ve}from"./vendor-5ihg-u6jKzBFW.js";import{u as ge,b as ke}from"./vendor-ZCF9-BTnwXcZT.js";import{T as U}from"./vendor-XlQG-CXafqtDX.js";import{_ as he}from"./vendor-pM4a-CqGSI99y.js";import{u as Se}from"./vendor-cebD-BGFhTQCu.js";import{u as G}from"./vendor-unoq-CFxLHdLI.js";import{n as u,t as T,i as O}from"./vendor-7avT-DhdrFwTb.js";import{E as Ce}from"./vendor-bP7i-BUADUvnR.js";import{u as E}from"./vendor-UToN-BPHzNV8u.js";import{d as De,l as _e,c as m,a as Te,C as we,o as Ve,b as d,z as L}from"./vendor-RE7Z-DOm9JKld.js";import{r as Re,u as t}from"./vendor-eqDO-Ti6p_k8X.js";const xe=De({__name:"panel-time-range",props:be,emits:["pick","select-range","set-picker-option"],setup(q,{emit:c}){const i=q,g=(e,n)=>{const a=[];for(let o=e;o<=n;o++)a.push(o);return a},{t:C,lang:h}=Se(),s=G("time"),F=G("picker"),J=_e("EP_PICKER_BASE"),{arrowControl:D,disabledHours:P,disabledMinutes:H,disabledSeconds:y,defaultValue:w}=J.props,Q=m(()=>[s.be("range-picker","body"),s.be("panel","content"),s.is("arrow",D),v.value?"has-seconds":""]),W=m(()=>[s.be("range-picker","body"),s.be("panel","content"),s.is("arrow",D),v.value?"has-seconds":""]),f=m(()=>i.parsedValue[0]),b=m(()=>i.parsedValue[1]),X=ge(i),Y=()=>{c("pick",X.value,!1)},v=m(()=>i.format.includes("ss")),B=m(()=>i.format.includes("A")?"A":i.format.includes("a")?"a":""),Z=(e=!1)=>{c("pick",[f.value,b.value],e)},ee=e=>{K(e.millisecond(0),b.value)},ne=e=>{K(f.value,e.millisecond(0))},te=e=>{const n=e.map(o=>S(o).locale(h.value)),a=I(n);return n[0].isSame(a[0])&&n[1].isSame(a[1])},K=(e,n)=>{i.visible&&c("pick",[e,n],!0)},ae=m(()=>f.value>b.value),_=Re([0,2]),oe=(e,n)=>{c("select-range",e,n,"min"),_.value=[e,n]},N=m(()=>v.value?11:8),se=(e,n)=>{c("select-range",e,n,"max");const a=t(N);_.value=[e+a,n+a]},re=e=>{const n=v.value?[0,3,6,11,14,17]:[0,3,8,11],a=["hours","minutes"].concat(v.value?["seconds"]:[]),r=(n.indexOf(_.value[0])+e+n.length)%n.length,l=n.length/2;r<l?A.start_emitSelectRange(a[r]):A.end_emitSelectRange(a[r-l])},le=e=>{const n=e.code,{left:a,right:o,up:r,down:l}=Ce;if([a,o].includes(n)){re(n===a?-1:1),e.preventDefault();return}if([r,l].includes(n)){const p=n===r?-1:1,k=_.value[0]<N.value?"start":"end";A[`${k}_scrollDown`](p),e.preventDefault();return}},V=(e,n)=>{const a=P?P(e):[],o=e==="start",l=(n||(o?b.value:f.value)).hour(),p=o?g(l+1,23):g(0,l-1);return E(a,p)},R=(e,n,a)=>{const o=H?H(e,n):[],r=n==="start",l=a||(r?b.value:f.value),p=l.hour();if(e!==p)return o;const k=l.minute(),M=r?g(k+1,59):g(0,k-1);return E(o,M)},x=(e,n,a,o)=>{const r=y?y(e,n,a):[],l=a==="start",p=o||(l?b.value:f.value),k=p.hour(),M=p.minute();if(e!==k||n!==M)return r;const z=p.second(),fe=l?g(z+1,59):g(0,z-1);return E(r,fe)},I=([e,n])=>[$(e,"start",!0,n),$(n,"end",!1,e)],{getAvailableHours:ce,getAvailableMinutes:ie,getAvailableSeconds:ue}=ke(V,R,x),{timePickerOptions:A,getAvailableTime:$,onSetOption:j}=ve({getAvailableHours:ce,getAvailableMinutes:ie,getAvailableSeconds:ue}),pe=e=>e?O(e)?e.map(n=>S(n,i.format).locale(h.value)):S(e,i.format).locale(h.value):null,de=e=>e?O(e)?e.map(n=>n.format(i.format)):e.format(i.format):null,me=()=>{if(O(w))return w.map(n=>S(n).locale(h.value));const e=S(w).locale(h.value);return[e,e.add(60,"m")]};return c("set-picker-option",["formatToString",de]),c("set-picker-option",["parseUserInput",pe]),c("set-picker-option",["isValidValue",te]),c("set-picker-option",["handleKeydownInput",le]),c("set-picker-option",["getDefaultValue",me]),c("set-picker-option",["getRangeAvailableTime",I]),(e,n)=>e.actualVisible?(Ve(),Te("div",{key:0,class:u([t(s).b("range-picker"),t(F).b("panel")])},[d("div",{class:u(t(s).be("range-picker","content"))},[d("div",{class:u(t(s).be("range-picker","cell"))},[d("div",{class:u(t(s).be("range-picker","header"))},T(t(C)("el.datepicker.startTime")),3),d("div",{class:u(t(Q))},[L(U,{ref:"minSpinner",role:"start","show-seconds":t(v),"am-pm-mode":t(B),"arrow-control":t(D),"spinner-date":t(f),"disabled-hours":V,"disabled-minutes":R,"disabled-seconds":x,onChange:ee,onSetOption:t(j),onSelectRange:oe},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),d("div",{class:u(t(s).be("range-picker","cell"))},[d("div",{class:u(t(s).be("range-picker","header"))},T(t(C)("el.datepicker.endTime")),3),d("div",{class:u(t(W))},[L(U,{ref:"maxSpinner",role:"end","show-seconds":t(v),"am-pm-mode":t(B),"arrow-control":t(D),"spinner-date":t(b),"disabled-hours":V,"disabled-minutes":R,"disabled-seconds":x,onChange:ne,onSetOption:t(j),onSelectRange:se},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),d("div",{class:u(t(s).be("panel","footer"))},[d("button",{type:"button",class:u([t(s).be("panel","btn"),"cancel"]),onClick:a=>Y()},T(t(C)("el.datepicker.cancel")),11,["onClick"]),d("button",{type:"button",class:u([t(s).be("panel","btn"),"confirm"]),disabled:t(ae),onClick:a=>Z()},T(t(C)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):we("v-if",!0)}});var ze=he(xe,[["__file","panel-time-range.vue"]]);export{ze as T};
