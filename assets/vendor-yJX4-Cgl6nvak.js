import{b as J,a as Q}from"./vendor-8F4M-BzORa8vA.js";import{E as X}from"./vendor-p3Vz-yJM6arTP.js";import{E as Y}from"./vendor-AQSj-DFJim-ok.js";import{E as Ce}from"./vendor-NFpn-BrHihosC.js";import{E as ye}from"./vendor-pkf1-gHYU-KiM.js";import{k as Ee,e as _e}from"./vendor-Fq1d-qefZ2EtI.js";import{A as Ve}from"./vendor-Cnt1-BoLe3ROl.js";import{H as Ae}from"./vendor-0C59-CP3IunBi.js";import{P as Pe}from"./vendor-9ADf-CETqnEOW.js";import{S as Fe}from"./vendor-Cc2l-B9gdpgxU.js";import{C as I}from"./vendor-YycU-0ls5sTst.js";import{a as Se,b as Ie,c as Be}from"./vendor-5bES-BMYVgoHO.js";import{_ as De}from"./vendor-pM4a-CqGSI99y.js";import{C as $e}from"./vendor-UDEi-Bp1F1IF-.js";import{u as ze}from"./vendor-cebD-BGFhTQCu.js";import{u as Ke}from"./vendor-unoq-CFxLHdLI.js";import{u as Te,a as Le}from"./vendor-eqCW-DCj8_tuZ.js";import{u as Ne,a as Re}from"./vendor-hmuK-B6xHqdWm.js";import{u as He}from"./vendor-GuIu-Dc0c8fP9.js";import{U as B}from"./vendor-lLeK-BB_Ol6Sd.js";import{d as Z}from"./vendor-0rdd-Cq9Fpw4b.js";import{E as A}from"./vendor-bP7i-BUADUvnR.js";import{d as Oe}from"./vendor-9Eji-ZqQOO7NL.js";import{d as le,c as C,e as Ue,w as y,t as P,f as D,o as E,h,b as f,H as Me,a as ee,C as $,y as z,z as n,E as oe,p as We}from"./vendor-RE7Z-DOm9JKld.js";import{r as i,a as je,u as o}from"./vendor-eqDO-Ti6p_k8X.js";import{n as t,a as qe,t as ae}from"./vendor-7avT-DhdrFwTb.js";const xe=le({name:"ElColorPicker"}),Ge=le({...xe,props:Ie,emits:Se,setup(re,{expose:se,emit:m}){const a=re,{t:_}=ze(),l=Ke("color"),{formItem:p}=Te(),te=Ne(),d=Re(),{inputId:ne,isLabeledByFormItem:K}=Le(a,{formItemContext:p}),T=i(),L=i(),N=i(),R=i(),k=i(),H=i(),{isFocused:O,handleFocus:ie,handleBlur:ue}=He(k,{beforeFocus(){return d.value},beforeBlur(e){var s;return(s=R.value)==null?void 0:s.isFocusInsideContent(e)},afterBlur(){g(!1),b()}});let F=!0;const r=je(new I({enableAlpha:a.showAlpha,format:a.colorFormat||"",value:a.modelValue})),v=i(!1),u=i(!1),w=i(""),ce=C(()=>!a.modelValue&&!u.value?"transparent":me(r,a.showAlpha)),S=C(()=>!a.modelValue&&!u.value?"":r.value),pe=C(()=>K.value?void 0:a.ariaLabel||_("el.colorpicker.defaultLabel")),de=C(()=>K.value?p==null?void 0:p.labelId:void 0),fe=C(()=>[l.b("picker"),l.is("disabled",d.value),l.bm("picker",te.value),l.is("focused",O.value)]);function me(e,s){if(!(e instanceof I))throw new TypeError("color should be instance of _color Class");const{r:c,g:x,b:G}=e.toRgb();return s?`rgba(${c}, ${x}, ${G}, ${e.get("alpha")/100})`:`rgb(${c}, ${x}, ${G})`}function g(e){v.value=e}const V=Oe(g,100,{leading:!0});function U(){d.value||g(!0)}function M(){V(!1),b()}function b(){P(()=>{a.modelValue?r.fromString(a.modelValue):(r.value="",P(()=>{u.value=!1}))})}function ve(){d.value||(v.value&&b(),V(!v.value))}function W(){r.fromString(w.value)}function be(){const e=r.value;m(B,e),m("change",e),a.validateEvent&&(p==null||p.validate("change").catch(s=>Z())),V(!1),P(()=>{const s=new I({enableAlpha:a.showAlpha,format:a.colorFormat||"",value:a.modelValue});r.compare(s)||b()})}function he(){V(!1),m(B,null),m("change",null),a.modelValue!==null&&a.validateEvent&&(p==null||p.validate("change").catch(e=>Z())),b()}function ke(){v.value&&(M(),O.value&&q())}function j(e){e.preventDefault(),e.stopPropagation(),g(!1),b()}function we(e){switch(e.code){case A.enter:case A.numpadEnter:case A.space:e.preventDefault(),e.stopPropagation(),U(),H.value.focus();break;case A.esc:j(e);break}}function q(){k.value.focus()}function ge(){k.value.blur()}return Ue(()=>{a.modelValue&&(w.value=S.value)}),y(()=>a.modelValue,e=>{e?e&&e!==r.value&&(F=!1,r.fromString(e)):u.value=!1}),y(()=>[a.colorFormat,a.showAlpha],()=>{r.enableAlpha=a.showAlpha,r.format=a.colorFormat||r.format,r.doOnChange(),m(B,r.value)}),y(()=>S.value,e=>{w.value=e,F&&m("activeChange",e),F=!0}),y(()=>r.value,()=>{!a.modelValue&&!u.value&&(u.value=!0)}),y(()=>v.value,()=>{P(()=>{var e,s,c;(e=T.value)==null||e.update(),(s=L.value)==null||s.update(),(c=N.value)==null||c.update()})}),We(Be,{currentColor:S}),se({color:r,show:U,hide:M,focus:q,blur:ge}),(e,s)=>(E(),D(o(Ce),{ref_key:"popper",ref:R,visible:v.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[o(l).be("picker","panel"),o(l).b("dropdown"),e.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:e.teleported,transition:`${o(l).namespace.value}-zoom-in-top`,persistent:"",onHide:c=>g(!1)},{content:h(()=>[z((E(),ee("div",{onKeydown:Q(j,["esc"])},[f("div",{class:t(o(l).be("dropdown","main-wrapper"))},[n(Ae,{ref_key:"hue",ref:T,class:"hue-slider",color:o(r),vertical:""},null,8,["color"]),n(Fe,{ref_key:"sv",ref:L,color:o(r)},null,8,["color"])],2),e.showAlpha?(E(),D(Ve,{key:0,ref_key:"alpha",ref:N,color:o(r)},null,8,["color"])):$("v-if",!0),e.predefine?(E(),D(Pe,{key:1,ref:"predefine","enable-alpha":e.showAlpha,color:o(r),colors:e.predefine},null,8,["enable-alpha","color","colors"])):$("v-if",!0),f("div",{class:t(o(l).be("dropdown","btns"))},[f("span",{class:t(o(l).be("dropdown","value"))},[n(o(ye),{ref_key:"inputRef",ref:H,modelValue:w.value,"onUpdate:modelValue":c=>w.value=c,"validate-event":!1,size:"small",onKeyup:Q(W,["enter"]),onBlur:W},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),n(o(X),{class:t(o(l).be("dropdown","link-btn")),text:"",size:"small",onClick:he},{default:h(()=>[oe(ae(o(_)("el.colorpicker.clear")),1)]),_:1},8,["class"]),n(o(X),{plain:"",size:"small",class:t(o(l).be("dropdown","btn")),onClick:be},{default:h(()=>[oe(ae(o(_)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[o($e),ke,k.value]])]),default:h(()=>[f("div",Me({id:o(ne),ref_key:"triggerRef",ref:k},e.$attrs,{class:o(fe),role:"button","aria-label":o(pe),"aria-labelledby":o(de),"aria-description":o(_)("el.colorpicker.description",{color:e.modelValue||""}),"aria-disabled":o(d),tabindex:o(d)?-1:e.tabindex,onKeydown:we,onFocus:o(ie),onBlur:o(ue)}),[o(d)?(E(),ee("div",{key:0,class:t(o(l).be("picker","mask"))},null,2)):$("v-if",!0),f("div",{class:t(o(l).be("picker","trigger")),onClick:ve},[f("span",{class:t([o(l).be("picker","color"),o(l).is("alpha",e.showAlpha)])},[f("span",{class:t(o(l).be("picker","color-inner")),style:qe({backgroundColor:o(ce)})},[z(n(o(Y),{class:t([o(l).be("picker","icon"),o(l).is("icon-arrow-down")])},{default:h(()=>[n(o(Ee))]),_:1},8,["class"]),[[J,e.modelValue||u.value]]),z(n(o(Y),{class:t([o(l).be("picker","empty"),o(l).is("icon-close")])},{default:h(()=>[n(o(_e))]),_:1},8,["class"]),[[J,!e.modelValue&&!u.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var yo=De(Ge,[["__file","color-picker.vue"]]);export{yo as C};
