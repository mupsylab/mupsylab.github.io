import{w as C}from"./vendor-8F4M-BzORa8vA.js";import{f as N,H as x,g as k}from"./vendor-SBXC-DnSHQime.js";import{a as O}from"./vendor-CGpD-CGzusPM6.js";import{r as _}from"./vendor-E0E3-vedrsmtS.js";import{B as F}from"./vendor-E3jz-B2mB0_6C.js";import{u as L}from"./vendor-unoq-CFxLHdLI.js";import{c as H,r as G}from"./vendor-M4SU-CS8WeRvG.js";import{d as V,c as r,w as Z,j as $,n as R}from"./vendor-RE7Z-DOm9JKld.js";import{r as p,a as K,u as d}from"./vendor-eqDO-Ti6p_k8X.js";const te=V({name:"ElVirtualScrollBar",props:O,emits:["scroll","start-move","stop-move"],setup(t,{emit:u}){const b=r(()=>t.startGap+t.endGap),z=L("virtual-scrollbar"),B=L("scrollbar"),f=p(),s=p();let S=null,h=null;const n=K({isDragging:!1,traveled:0}),a=r(()=>F[t.layout]),M=r(()=>t.clientSize-d(b)),I=r(()=>({position:"absolute",width:`${x===t.layout?M.value:t.scrollbarSize}px`,height:`${x===t.layout?t.scrollbarSize:M.value}px`,[N[t.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),g=r(()=>{const e=t.ratio,o=t.clientSize;if(e>=100)return Number.POSITIVE_INFINITY;if(e>=50)return e*o/100;const l=o/3;return Math.floor(Math.min(Math.max(e*o,k),l))}),A=r(()=>{if(!Number.isFinite(g.value))return{display:"none"};const e=`${g.value}px`;return _({bar:a.value,size:e,move:n.traveled},t.layout)}),i=r(()=>Math.floor(t.clientSize-g.value-d(b))),T=()=>{window.addEventListener("mousemove",v),window.addEventListener("mouseup",c);const e=d(s);e&&(h=document.onselectstart,document.onselectstart=()=>!1,e.addEventListener("touchmove",v,{passive:!0}),e.addEventListener("touchend",c))},w=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",c),document.onselectstart=h,h=null;const e=d(s);e&&(e.removeEventListener("touchmove",v),e.removeEventListener("touchend",c))},y=e=>{e.stopImmediatePropagation(),!(e.ctrlKey||[1,2].includes(e.button))&&(n.isDragging=!0,n[a.value.axis]=e.currentTarget[a.value.offset]-(e[a.value.client]-e.currentTarget.getBoundingClientRect()[a.value.direction]),u("start-move"),T())},c=()=>{n.isDragging=!1,n[a.value.axis]=0,u("stop-move"),w()},v=e=>{const{isDragging:o}=n;if(!o||!s.value||!f.value)return;const l=n[a.value.axis];if(!l)return;H(S);const m=(f.value.getBoundingClientRect()[a.value.direction]-e[a.value.client])*-1,P=s.value[a.value.offset]-l,E=m-P;S=G(()=>{n.traveled=Math.max(t.startGap,Math.min(E,i.value)),u("scroll",E,i.value)})},D=e=>{const o=Math.abs(e.target.getBoundingClientRect()[a.value.direction]-e[a.value.client]),l=s.value[a.value.offset]/2,m=o-l;n.traveled=Math.max(0,Math.min(m,i.value)),u("scroll",m,i.value)};return Z(()=>t.scrollFrom,e=>{n.isDragging||(n.traveled=Math.ceil(e*i.value))}),$(()=>{w()}),()=>R("div",{role:"presentation",ref:f,class:[z.b(),t.class,(t.alwaysOn||n.isDragging)&&"always-on"],style:I.value,onMousedown:C(D,["stop","prevent"]),onTouchstartPrevent:y},R("div",{ref:s,class:B.e("thumb"),style:A.value,onMousedown:y},[]))}});export{te as S};
