import{E as A}from"./vendor-p3Vz-yJM6arTP.js";import{E as Y}from"./vendor-NFpn-BrHihosC.js";import{E as q}from"./vendor-MxHc-DHRJLLZd.js";import{E as Q}from"./vendor-AQSj-DFJim-ok.js";import{E as X}from"./vendor-pOPs-CSVut5GS.js";import{k as Z}from"./vendor-Fq1d-qefZ2EtI.js";import{d as x,E as ee}from"./vendor-V0YI-B9fqkwur.js";import{D as oe}from"./vendor-UmjJ-CY12KJ7e.js";import{_ as ne}from"./vendor-pM4a-CqGSI99y.js";import{O as re}from"./vendor-AOR9-uAzfTwai.js";import{u as te}from"./vendor-unoq-CFxLHdLI.js";import{u as le}from"./vendor-cebD-BGFhTQCu.js";import{b as ae}from"./vendor-7XBs-C2ZIZBcB.js";import{u as ie}from"./vendor-9Byw-aJtbE-z4.js";import{u as se}from"./vendor-hmuK-B6xHqdWm.js";import{c as de}from"./vendor-sJES-T5Eo13Ui.js";import{d as pe,v as t,a as ue,o as D,z as l,f as fe,C as ce,A as me,h as r,r as k,H as O,c,w as ve,j as ge,p as L,g as be}from"./vendor-RE7Z-DOm9JKld.js";import{n as F}from"./vendor-7avT-DhdrFwTb.js";import{r as i,b as H,u as he}from"./vendor-eqDO-Ti6p_k8X.js";const{ButtonGroup:we}=A,Ee=pe({name:"ElDropdown",components:{ElButton:A,ElButtonGroup:we,ElScrollbar:q,ElDropdownCollection:ee,ElTooltip:Y,ElRovingFocusGroup:X,ElOnlyChild:re,ElIcon:Q,ArrowDown:Z},props:x,emits:["visible-change","click","command"],setup(e,{emit:p}){const T=be(),w=te("dropdown"),{t:I}=le(),s=i(),m=i(),u=i(null),a=i(null),E=i(null),f=i(null),v=i(!1),g=c(()=>({maxHeight:ae(e.maxHeight)})),C=c(()=>[w.m(B.value)]),b=c(()=>de(e.trigger)),y=ie().value,S=c(()=>e.id||y);ve([s,b],([o,n],[d])=>{var _,R,z;(_=d==null?void 0:d.$el)!=null&&_.removeEventListener&&d.$el.removeEventListener("pointerenter",h),(R=o==null?void 0:o.$el)!=null&&R.removeEventListener&&o.$el.removeEventListener("pointerenter",h),(z=o==null?void 0:o.$el)!=null&&z.addEventListener&&n.includes("hover")&&o.$el.addEventListener("pointerenter",h)},{immediate:!0}),ge(()=>{var o,n;(n=(o=s.value)==null?void 0:o.$el)!=null&&n.removeEventListener&&s.value.$el.removeEventListener("pointerenter",h)});function N(){$()}function $(){var o;(o=u.value)==null||o.onClose()}function P(){var o;(o=u.value)==null||o.onOpen()}const B=se();function K(...o){p("command",...o)}function h(){var o,n;(n=(o=s.value)==null?void 0:o.$el)==null||n.focus()}function G(){}function M(){const o=he(a);b.value.includes("hover")&&(o==null||o.focus()),f.value=null}function U(o){f.value=o}function V(o){v.value||(o.preventDefault(),o.stopImmediatePropagation())}function j(){p("visible-change",!0)}function J(o){(o==null?void 0:o.type)==="keydown"&&a.value.focus()}function W(){p("visible-change",!1)}return L(oe,{contentRef:a,role:c(()=>e.role),triggerId:S,isUsingKeyboard:v,onItemEnter:G,onItemLeave:M}),L("elDropdown",{instance:T,dropdownSize:B,handleClick:N,commandHandler:K,trigger:H(e,"trigger"),hideOnClick:H(e,"hideOnClick")}),{t:I,ns:w,scrollbar:E,wrapStyle:g,dropdownTriggerKls:C,dropdownSize:B,triggerId:S,currentTabId:f,handleCurrentTabIdChange:U,handlerMainButtonClick:o=>{p("click",o)},handleEntryFocus:V,handleClose:$,handleOpen:P,handleBeforeShowTooltip:j,handleShowTooltip:J,handleBeforeHideTooltip:W,onFocusAfterTrapped:o=>{var n,d;o.preventDefault(),(d=(n=a.value)==null?void 0:n.focus)==null||d.call(n,{preventScroll:!0})},popperRef:u,contentRef:a,triggeringElementRef:s,referenceElementRef:m}}});function Ce(e,p,T,w,I,s){var m;const u=t("el-dropdown-collection"),a=t("el-roving-focus-group"),E=t("el-scrollbar"),f=t("el-only-child"),v=t("el-tooltip"),g=t("el-button"),C=t("arrow-down"),b=t("el-icon"),y=t("el-button-group");return D(),ue("div",{class:F([e.ns.b(),e.ns.is("disabled",e.disabled)])},[l(v,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(m=e.referenceElementRef)==null?void 0:m.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},me({content:r(()=>[l(E,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:r(()=>[l(a,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:r(()=>[l(u,null,{default:r(()=>[k(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:r(()=>[l(f,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:r(()=>[k(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(D(),fe(y,{key:0},{default:r(()=>[l(g,O({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:r(()=>[k(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),l(g,O({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:r(()=>[l(b,{class:F(e.ns.e("icon"))},{default:r(()=>[l(C)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):ce("v-if",!0)],2)}var Ue=ne(Ee,[["render",Ce],["__file","dropdown.vue"]]);export{Ue as D};
