import{b as Te,w as oe,a as Je,v as Qe}from"./vendor-8F4M-BzORa8vA.js";import{u as Xe,g as Ye}from"./vendor-5WKb-KWd2YoVw.js";import{E as Ze}from"./vendor-kcQe-Cm_5pE0F.js";import{E as ea}from"./vendor-pkf1-gHYU-KiM.js";import{E as we}from"./vendor-NFpn-BrHihosC.js";import{E as aa}from"./vendor-MxHc-DHRJLLZd.js";import{E as _e}from"./vendor-WXXn-CEyMwSfL.js";import{E as ne}from"./vendor-AQSj-DFJim-ok.js";import{m as ta,c as la,k as sa}from"./vendor-Fq1d-qefZ2EtI.js";import{c as oa,a as na}from"./vendor-j1KW-D_92aXeF.js";import{_ as ra}from"./vendor-pM4a-CqGSI99y.js";import{C as ia}from"./vendor-UDEi-Bp1F1IF-.js";import{u as Se}from"./vendor-unoq-CFxLHdLI.js";import{u as ua}from"./vendor-cebD-BGFhTQCu.js";import{u as ca}from"./vendor-eqCW-DCj8_tuZ.js";import{a as pa}from"./vendor-wml0-D8cMrmnG.js";import{u as da}from"./vendor-5iTR-BBy9iiW8.js";import{u as fa}from"./vendor-hmuK-B6xHqdWm.js";import{U as va,C as ma}from"./vendor-lLeK-BB_Ol6Sd.js";import{d as ha}from"./vendor-0rdd-Cq9Fpw4b.js";import{A as ga,n as f,t as x,a as Ca}from"./vendor-7avT-DhdrFwTb.js";import{E as h}from"./vendor-bP7i-BUADUvnR.js";import{f as ka,g as ba}from"./vendor-NXsq-DDPfcrtu.js";import{c as ya}from"./vendor-wm62-DP3OYY5P.js";import{d as Ea}from"./vendor-9Eji-ZqQOO7NL.js";import{d as Ve,R as Ta,c as r,w as D,t as I,e as wa,f as w,o as i,h as p,y as H,C as U,z,r as L,a as k,F as re,D as ie,b as F,A as _a}from"./vendor-RE7Z-DOm9JKld.js";import{r as u,u as l,i as Sa}from"./vendor-eqDO-Ti6p_k8X.js";import{i as Va}from"./vendor-k87t-DYFOtHqs.js";const $a="ElCascader",Na=Ve({name:$a}),Pa=Ve({...Na,props:na,emits:oa,setup($e,{expose:Ne,emit:b}){const o=$e,Pe={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:a,placement:t}=e;["right","left","bottom","top"].includes(t)||(a.arrow.x=35)},requires:["arrow"]}]},ue=Ta();let $=0,W=0;const n=Se("cascader"),q=Se("input"),{t:ce}=ua(),{form:pe,formItem:M}=ca(),{valueOnClear:xe}=pa(o),{isComposing:de,handleComposition:V}=da({afterComposition(e){var a;const t=(a=e.target)==null?void 0:a.value;se(t)}}),G=u(null),N=u(null),fe=u(null),d=u(null),A=u(null),v=u(!1),j=u(!1),y=u(!1),J=u(!1),B=u(""),_=u(""),S=u([]),Q=u([]),X=u([]),De=r(()=>ue.style),E=r(()=>o.disabled||(pe==null?void 0:pe.disabled)),ve=r(()=>o.placeholder||ce("el.cascader.placeholder")),Ie=r(()=>_.value||S.value.length>0||de.value?"":ve.value),K=fa(),me=r(()=>K.value==="small"?"small":"default"),T=r(()=>!!o.props.multiple),he=r(()=>!o.filterable||T.value),ge=r(()=>T.value?_.value:B.value),R=r(()=>{var e;return((e=d.value)==null?void 0:e.checkedNodes)||[]}),ze=r(()=>!o.clearable||E.value||y.value||!j.value?!1:!!R.value.length),O=r(()=>{const{showAllLevels:e,separator:a}=o,t=R.value;return t.length?T.value?"":t[0].calcText(e,a):""}),Fe=r(()=>(M==null?void 0:M.validateState)||""),Y=r({get(){return ya(o.modelValue)},set(e){const a=e??xe.value;b(va,a),b(ma,a),o.validateEvent&&(M==null||M.validate("change").catch(t=>ha()))}}),Me=r(()=>[n.b(),n.m(K.value),n.is("disabled",E.value),ue.class]),Ae=r(()=>[q.e("icon"),"icon-arrow-down",n.is("reverse",v.value)]),Be=r(()=>n.is("focus",v.value||J.value)),Ce=r(()=>{var e,a;return(a=(e=G.value)==null?void 0:e.popperRef)==null?void 0:a.contentRef}),c=e=>{var a,t,s;E.value||(e=e??!v.value,e!==v.value&&(v.value=e,(t=(a=N.value)==null?void 0:a.input)==null||t.setAttribute("aria-expanded",`${e}`),e?(P(),I((s=d.value)==null?void 0:s.scrollToExpandingNode)):o.filterable&&le(),b("visibleChange",e)))},P=()=>{I(()=>{var e;(e=G.value)==null||e.updatePopper()})},Z=()=>{y.value=!1},ee=e=>{const{showAllLevels:a,separator:t}=o;return{node:e,key:e.uid,text:e.calcText(a,t),hitState:!1,closable:!E.value&&!e.isDisabled,isCollapseTag:!1}},ae=e=>{var a;const t=e.node;t.doCheck(!1),(a=d.value)==null||a.calculateCheckedValue(),b("removeTag",t.valueByOption)},Ke=()=>{if(!T.value)return;const e=R.value,a=[],t=[];if(e.forEach(s=>t.push(ee(s))),Q.value=t,e.length){e.slice(0,o.maxCollapseTags).forEach(m=>a.push(ee(m)));const s=e.slice(o.maxCollapseTags),g=s.length;g&&(o.collapseTags?a.push({key:-1,text:`+ ${g}`,closable:!1,isCollapseTag:!0}):s.forEach(m=>a.push(ee(m))))}S.value=a},ke=()=>{var e,a;const{filterMethod:t,showAllLevels:s,separator:g}=o,m=(a=(e=d.value)==null?void 0:e.getFlattedNodes(!o.props.checkStrictly))==null?void 0:a.filter(C=>C.isDisabled?!1:(C.calcText(s,g),t(C,ge.value)));T.value&&(S.value.forEach(C=>{C.hitState=!1}),Q.value.forEach(C=>{C.hitState=!1})),y.value=!0,X.value=m,P()},Re=()=>{var e;let a;y.value&&A.value?a=A.value.$el.querySelector(`.${n.e("suggestion-item")}`):a=(e=d.value)==null?void 0:e.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`),a&&(a.focus(),!y.value&&a.click())},te=()=>{var e,a;const t=(e=N.value)==null?void 0:e.input,s=fe.value,g=(a=A.value)==null?void 0:a.$el;if(!(!Va||!t)){if(g){const m=g.querySelector(`.${n.e("suggestion-list")}`);m.style.minWidth=`${t.offsetWidth}px`}if(s){const{offsetHeight:m}=s,C=S.value.length>0?`${Math.max(m,$)-2}px`:`${$}px`;t.style.height=C,P()}}},Oe=e=>{var a;return(a=d.value)==null?void 0:a.getCheckedNodes(e)},He=e=>{P(),b("expandChange",e)},Ue=e=>{if(!de.value)switch(e.code){case h.enter:case h.numpadEnter:c();break;case h.down:c(!0),I(Re),e.preventDefault();break;case h.esc:v.value===!0&&(e.preventDefault(),e.stopPropagation(),c(!1));break;case h.tab:c(!1);break}},Le=()=>{var e;(e=d.value)==null||e.clearCheckedNodes(),!v.value&&o.filterable&&le(),c(!1),b("clear")},le=()=>{const{value:e}=O;B.value=e,_.value=e},We=e=>{var a,t;const{checked:s}=e;T.value?(a=d.value)==null||a.handleCheckChange(e,!s,!1):(!s&&((t=d.value)==null||t.handleCheckChange(e,!0,!1)),c(!1))},qe=e=>{const a=e.target,{code:t}=e;switch(t){case h.up:case h.down:{e.preventDefault();const s=t===h.up?-1:1;ka(ba(a,s,`.${n.e("suggestion-item")}[tabindex="-1"]`));break}case h.enter:case h.numpadEnter:a.click();break}},Ge=()=>{const e=S.value,a=e[e.length-1];W=_.value?0:W+1,!(!a||!W||o.collapseTags&&e.length>1)&&(a.hitState?ae(a):a.hitState=!0)},be=e=>{const a=e.target,t=n.e("search-input");a.className===t&&(J.value=!0),b("focus",e)},ye=e=>{J.value=!1,b("blur",e)},je=Ea(()=>{const{value:e}=ge;if(!e)return;const a=o.beforeFilter(e);ga(a)?a.then(ke).catch(()=>{}):a!==!1?ke():Z()},o.debounce),se=(e,a)=>{!v.value&&c(!0),!(a!=null&&a.isComposing)&&(e?je():Z())},Ee=e=>Number.parseFloat(Ye(q.cssVarName("input-height"),e).value)-2;return D(y,P),D([R,E,()=>o.collapseTags],Ke),D(S,()=>{I(()=>te())}),D(K,async()=>{await I();const e=N.value.input;$=Ee(e)||$,te()}),D(O,le,{immediate:!0}),wa(()=>{const e=N.value.input,a=Ee(e);$=e.offsetHeight||a,Xe(e,te)}),Ne({getCheckedNodes:Oe,cascaderPanelRef:d,togglePopperVisible:c,contentRef:Ce,presentText:O}),(e,a)=>(i(),w(l(we),{ref_key:"tooltipRef",ref:G,visible:v.value,teleported:e.teleported,"popper-class":[l(n).e("dropdown"),e.popperClass],"popper-options":Pe,"fallback-placements":e.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:e.placement,transition:`${l(n).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:e.persistent,onHide:Z},{default:p(()=>[H((i(),k("div",{class:f(l(Me)),style:Ca(l(De)),onClick:()=>c(l(he)?void 0:!0),onKeydown:Ue,onMouseenter:t=>j.value=!0,onMouseleave:t=>j.value=!1},[z(l(ea),{ref_key:"input",ref:N,modelValue:B.value,"onUpdate:modelValue":t=>B.value=t,placeholder:l(Ie),readonly:l(he),disabled:l(E),"validate-event":!1,size:l(K),class:f(l(Be)),tabindex:l(T)&&e.filterable&&!l(E)?-1:void 0,onCompositionstart:l(V),onCompositionupdate:l(V),onCompositionend:l(V),onFocus:be,onBlur:ye,onInput:se},_a({suffix:p(()=>[l(ze)?(i(),w(l(ne),{key:"clear",class:f([l(q).e("icon"),"icon-circle-close"]),onClick:oe(Le,["stop"])},{default:p(()=>[z(l(la))]),_:1},8,["class","onClick"])):(i(),w(l(ne),{key:"arrow-down",class:f(l(Ae)),onClick:oe(t=>c(),["stop"])},{default:p(()=>[z(l(sa))]),_:1},8,["class","onClick"]))]),_:2},[e.$slots.prefix?{name:"prefix",fn:p(()=>[L(e.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),l(T)?(i(),k("div",{key:0,ref_key:"tagWrapper",ref:fe,class:f([l(n).e("tags"),l(n).is("validate",!!l(Fe))])},[(i(!0),k(re,null,ie(S.value,t=>(i(),w(l(_e),{key:t.key,type:e.tagType,size:l(me),effect:e.tagEffect,hit:t.hitState,closable:t.closable,"disable-transitions":"",onClose:s=>ae(t)},{default:p(()=>[t.isCollapseTag===!1?(i(),k("span",{key:0},x(t.text),1)):(i(),w(l(we),{key:1,disabled:v.value||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:p(()=>[F("span",null,x(t.text),1)]),content:p(()=>[F("div",{class:f(l(n).e("collapse-tags"))},[(i(!0),k(re,null,ie(Q.value.slice(e.maxCollapseTags),(s,g)=>(i(),k("div",{key:g,class:f(l(n).e("collapse-tag"))},[(i(),w(l(_e),{key:s.key,class:"in-tooltip",type:e.tagType,size:l(me),effect:e.tagEffect,hit:s.hitState,closable:s.closable,"disable-transitions":"",onClose:m=>ae(s)},{default:p(()=>[F("span",null,x(s.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),e.filterable&&!l(E)?H((i(),k("input",{key:0,"onUpdate:modelValue":t=>_.value=t,type:"text",class:f(l(n).e("search-input")),placeholder:l(O)?"":l(ve),onInput:t=>se(_.value,t),onClick:oe(t=>c(!0),["stop"]),onKeydown:Je(Ge,["delete"]),onCompositionstart:l(V),onCompositionupdate:l(V),onCompositionend:l(V),onFocus:be,onBlur:ye},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[Qe,_.value]]):U("v-if",!0)],2)):U("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[l(ia),()=>c(!1),l(Ce)]])]),content:p(()=>[H(z(l(Ze),{ref_key:"cascaderPanelRef",ref:d,modelValue:l(Y),"onUpdate:modelValue":t=>Sa(Y)?Y.value=t:null,options:e.options,props:o.props,border:!1,"render-label":e.$slots.default,onExpandChange:He,onClose:t=>e.$nextTick(()=>c(!1))},{empty:p(()=>[L(e.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Te,!y.value]]),e.filterable?H((i(),w(l(aa),{key:0,ref_key:"suggestionPanel",ref:A,tag:"ul",class:f(l(n).e("suggestion-panel")),"view-class":l(n).e("suggestion-list"),onKeydown:qe},{default:p(()=>[X.value.length?(i(!0),k(re,{key:0},ie(X.value,t=>(i(),k("li",{key:t.uid,class:f([l(n).e("suggestion-item"),l(n).is("checked",t.checked)]),tabindex:-1,onClick:s=>We(t)},[L(e.$slots,"suggestion-item",{item:t},()=>[F("span",null,x(t.text),1),t.checked?(i(),w(l(ne),{key:0},{default:p(()=>[z(l(ta))]),_:1})):U("v-if",!0)])],10,["onClick"]))),128)):L(e.$slots,"empty",{key:1},()=>[F("li",{class:f(l(n).e("empty-text"))},x(l(ce)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Te,y.value]]):U("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var ot=ra(Pa,[["__file","cascader.vue"]]);export{ot as C};
