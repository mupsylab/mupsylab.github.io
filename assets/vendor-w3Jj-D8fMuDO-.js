import{E as S}from"./vendor-9OgG-Ci4EYNcD.js";import{c as T}from"./vendor-UGbD-imxzj0Ke.js";import{t as v,a as b,i as O,b as x,c as A}from"./vendor-JR6N-F9ZQfz8B.js";import{e as D}from"./vendor-W2mj-CCBXsyCN.js";import{U as C}from"./vendor-lLeK-BB_Ol6Sd.js";import{d as P}from"./vendor-7avT-DhdrFwTb.js";import{f as R}from"./vendor-UUu6-BeUS1t8s.js";import{i as z}from"./vendor-ys5x-C1IsWqtu.js";import{p as F}from"./vendor-4rcf-DOLgXHSV.js";import{i as H}from"./vendor-16Vo-CHIgUVhi.js";import{w as I,t as N,c as K}from"./vendor-RE7Z-DOm9JKld.js";import{t as U}from"./vendor-eqDO-Ti6p_k8X.js";const ee=(e,{attrs:s,slots:E,emit:k},{select:m,tree:t,key:V})=>{I(()=>e.modelValue,()=>{e.showCheckbox&&N(()=>{const l=t.value;l&&!z(l.getCheckedKeys(),v(e.modelValue))&&l.setCheckedKeys(v(e.modelValue))})},{immediate:!0,deep:!0});const w=K(()=>({value:V.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),i=(l,c)=>{var a;const n=w.value[l];return P(n)?n(c,(a=t.value)==null?void 0:a.getNode(i("value",c))):c[n]},g=v(e.modelValue).map(l=>b(e.data||[],c=>i("value",c)===l,c=>i("children",c),(c,a,n,o)=>o&&i("value",o))).filter(l=>O(l)),L=K(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const l=[];return x(e.data.concat(e.cacheData),c=>{const a=i("value",c);l.push({value:a,currentLabel:i("label",c),isDisabled:i("disabled",c)})},c=>i("children",c)),l}),_=()=>{var l;return(l=t.value)==null?void 0:l.getCheckedKeys().filter(c=>{var a;const n=(a=t.value)==null?void 0:a.getNode(c);return!H(n)&&R(n.childNodes)})};return{...F(U(e),Object.keys(S.props)),...s,nodeKey:V,expandOnClickNode:K(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:K(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(g):g),renderContent:(l,{node:c,data:a,store:n})=>l(T,{value:i("value",a),label:i("label",a),disabled:i("disabled",a),visible:c.visible},e.renderContent?()=>e.renderContent(l,{node:c,data:a,store:n}):E.default?()=>E.default({node:c,data:a,store:n}):void 0),filterNodeMethod:(l,c,a)=>e.filterNodeMethod?e.filterNodeMethod(l,c,a):l?new RegExp(D(l),"i").test(i("label",c)||""):!0,onNodeClick:(l,c,a)=>{var n,o,h,r;if((n=s.onNodeClick)==null||n.call(s,l,c,a),!(e.showCheckbox&&e.checkOnClickNode)){if(!e.showCheckbox&&(e.checkStrictly||c.isLeaf)){if(!i("disabled",l)){const f=(o=m.value)==null?void 0:o.states.options.get(i("value",l));(h=m.value)==null||h.handleOptionSelect(f)}}else e.expandOnClickNode&&a.proxy.handleExpandIconClick();(r=m.value)==null||r.focus()}},onCheck:(l,c)=>{var a;if(!e.showCheckbox)return;const n=i("value",l),o={};x([t.value.store.root],d=>o[d.key]=d,d=>d.childNodes);const h=c.checkedKeys,r=e.multiple?v(e.modelValue).filter(d=>!(d in o)&&!h.includes(d)):[],f=r.concat(h);if(e.checkStrictly)k(C,e.multiple?f:f.includes(n)?n:void 0);else if(e.multiple){const d=_();k(C,r.concat(d))}else{const d=b([l],u=>!A(i("children",u))&&!i("disabled",u),u=>i("children",u)),y=d?i("value",d):void 0,M=O(e.modelValue)&&!!b([l],u=>i("value",u)===e.modelValue,u=>i("children",u));k(C,y===e.modelValue||M?void 0:y)}N(()=>{var d;const y=v(e.modelValue);t.value.setCheckedKeys(y),(d=s.onCheck)==null||d.call(s,l,{checkedKeys:t.value.getCheckedKeys(),checkedNodes:t.value.getCheckedNodes(),halfCheckedKeys:t.value.getHalfCheckedKeys(),halfCheckedNodes:t.value.getHalfCheckedNodes()})}),(a=m.value)==null||a.focus()},onNodeExpand:(l,c,a)=>{var n;(n=s.onNodeExpand)==null||n.call(s,l,c,a),N(()=>{if(!e.checkStrictly&&e.lazy&&e.multiple&&c.checked){const o={},h=t.value.getCheckedKeys();x([t.value.store.root],d=>o[d.key]=d,d=>d.childNodes);const r=v(e.modelValue).filter(d=>!(d in o)&&!h.includes(d)),f=_();k(C,r.concat(f))}})},cacheOptions:L}};export{ee as u};
