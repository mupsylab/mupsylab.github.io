import{w as I,a as T,b as L,T as re}from"./vendor-8F4M-BzORa8vA.js";import{E as ie}from"./vendor-p3Vz-yJM6arTP.js";import{E as ue}from"./vendor-pkf1-gHYU-KiM.js";import{E as de}from"./vendor-mB53-Q8QczjEc.js";import{E as ce}from"./vendor-AQSj-DFJim-ok.js";import{l as G}from"./vendor-Fq1d-qefZ2EtI.js";import{E as fe}from"./vendor-dKFv-DtdAHhrL.js";import{_ as pe}from"./vendor-pM4a-CqGSI99y.js";import{T as me}from"./vendor-JUs3-Dh7xMKvW.js";import{T as ve,a as W}from"./vendor-9yxy-Cbwm2u4R.js";import{i as ge}from"./vendor-kG4H-CBJXsQNf.js";import{a as ye}from"./vendor-sC5d-B-dxDEiz.js";import{u as Z}from"./vendor-9Byw-aJtbE-z4.js";import{u as Ce}from"./vendor-9ktq-BCismRJE.js";import{n as a,a as J,t as h,d as he,c as be}from"./vendor-7avT-DhdrFwTb.js";import{u as Be}from"./vendor-3lLS-CtPjs864.js";import{u as we}from"./vendor-Uoq2-arn3CEBW.js";import{d as Ee,v as b,f as i,o as s,h as u,y as V,z as B,b as d,a as $,C as v,i as w,r as ke,E as A,c as p,w as Q,t as S,e as Me,j as Ie}from"./vendor-RE7Z-DOm9JKld.js";import{r as g,a as Te,m as X,t as Se}from"./vendor-eqDO-Ti6p_k8X.js";const Re=Ee({name:"ElMessageBox",directives:{TrapFocus:me},components:{ElButton:ie,ElFocusTrap:fe,ElInput:ue,ElOverlay:de,ElIcon:ce,...ve},inheritAttrs:!1,props:{buttonSize:{type:String,validator:ge},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:K}){const{locale:H,zIndex:O,ns:R,size:D}=ye("message-box",p(()=>e.buttonSize)),{t:f}=H,{nextZIndex:E}=O,c=g(!1),o=Te({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:X(G),cancelButtonLoadingIcon:X(G),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:E()}),z=p(()=>{const n=o.type;return{[R.bm("icon",n)]:n&&W[n]}}),r=Z(),Y=Z(),_=p(()=>{const n=o.type;return o.icon||n&&W[n]||""}),x=p(()=>!!o.message),m=g(),P=g(),y=g(),k=g(),U=g(),ee=p(()=>o.confirmButtonClass);Q(()=>o.inputValue,async n=>{await S(),e.boxType==="prompt"&&n&&F()},{immediate:!0}),Q(()=>c.value,n=>{var t,l;n&&(e.boxType!=="prompt"&&(o.autofocus?y.value=(l=(t=U.value)==null?void 0:t.$el)!=null?l:m.value:y.value=m.value),o.zIndex=E()),e.boxType==="prompt"&&(n?S().then(()=>{var j;k.value&&k.value.$el&&(o.autofocus?y.value=(j=te())!=null?j:m.value:y.value=m.value)}):(o.editorErrorMessage="",o.validateError=!1))});const oe=p(()=>e.draggable),ne=p(()=>e.overflow);Ce(m,P,oe,ne),Me(async()=>{await S(),e.closeOnHashChange&&window.addEventListener("hashchange",C)}),Ie(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",C)});function C(){c.value&&(c.value=!1,S(()=>{o.action&&K("action",o.action)}))}const q=()=>{e.closeOnClickModal&&M(o.distinguishCancelAndClose?"close":"cancel")},ae=we(q),se=n=>{if(o.inputType!=="textarea")return n.preventDefault(),M("confirm")},M=n=>{var t;e.boxType==="prompt"&&n==="confirm"&&!F()||(o.action=n,o.beforeClose?(t=o.beforeClose)==null||t.call(o,n,o,C):C())},F=()=>{if(e.boxType==="prompt"){const n=o.inputPattern;if(n&&!n.test(o.inputValue||""))return o.editorErrorMessage=o.inputErrorMessage||f("el.messagebox.error"),o.validateError=!0,!1;const t=o.inputValidator;if(he(t)){const l=t(o.inputValue);if(l===!1)return o.editorErrorMessage=o.inputErrorMessage||f("el.messagebox.error"),o.validateError=!0,!1;if(be(l))return o.editorErrorMessage=l,o.validateError=!0,!1}}return o.editorErrorMessage="",o.validateError=!1,!0},te=()=>{var n,t;const l=(n=k.value)==null?void 0:n.$refs;return(t=l==null?void 0:l.input)!=null?t:l==null?void 0:l.textarea},N=()=>{M("close")},le=()=>{e.closeOnPressEscape&&N()};return e.lockScroll&&Be(c),{...Se(o),ns:R,overlayEvent:ae,visible:c,hasMessage:x,typeClass:z,contentId:r,inputId:Y,btnSize:D,iconComponent:_,confirmButtonClasses:ee,rootRef:m,focusStartRef:y,headerRef:P,inputRef:k,confirmRef:U,doClose:C,handleClose:N,onCloseRequested:le,handleWrapperClick:q,handleInputEnter:se,handleAction:M,t:f}}});function ze(e,K,H,O,R,D){const f=b("el-icon"),E=b("el-input"),c=b("el-button"),o=b("el-focus-trap"),z=b("el-overlay");return s(),i(re,{name:"fade-in-linear",onAfterLeave:r=>e.$emit("vanish"),persisted:""},{default:u(()=>[V(B(z,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:u(()=>[d("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:a(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[B(o,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:u(()=>[d("div",{ref:"rootRef",class:a([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:J(e.customStyle),tabindex:"-1",onClick:I(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(s(),$("div",{key:0,ref:"headerRef",class:a([e.ns.e("header"),{"show-close":e.showClose}])},[d("div",{class:a(e.ns.e("title"))},[e.iconComponent&&e.center?(s(),i(f,{key:0,class:a([e.ns.e("status"),e.typeClass])},{default:u(()=>[(s(),i(w(e.iconComponent)))]),_:1},8,["class"])):v("v-if",!0),d("span",null,h(e.title),1)],2),e.showClose?(s(),$("button",{key:0,type:"button",class:a(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:T(I(r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[B(f,{class:a(e.ns.e("close"))},{default:u(()=>[(s(),i(w(e.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):v("v-if",!0)],2)):v("v-if",!0),d("div",{id:e.contentId,class:a(e.ns.e("content"))},[d("div",{class:a(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(s(),i(f,{key:0,class:a([e.ns.e("status"),e.typeClass])},{default:u(()=>[(s(),i(w(e.iconComponent)))]),_:1},8,["class"])):v("v-if",!0),e.hasMessage?(s(),$("div",{key:1,class:a(e.ns.e("message"))},[ke(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(s(),i(w(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(s(),i(w(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:u(()=>[A(h(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):v("v-if",!0)],2),V(d("div",{class:a(e.ns.e("input"))},[B(E,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":r=>e.inputValue=r,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:a({invalid:e.validateError}),onKeydown:T(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),d("div",{class:a(e.ns.e("errormsg")),style:J({visibility:e.editorErrorMessage?"visible":"hidden"})},h(e.editorErrorMessage),7)],2),[[L,e.showInput]])],10,["id"]),d("div",{class:a(e.ns.e("btns"))},[e.showCancelButton?(s(),i(c,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:a([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:r=>e.handleAction("cancel"),onKeydown:T(I(r=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:u(()=>[A(h(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):v("v-if",!0),V(B(c,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:a([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:r=>e.handleAction("confirm"),onKeydown:T(I(r=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:u(()=>[A(h(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[L,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[L,e.visible]])]),_:3},8,["onAfterLeave"])}var Xe=pe(Re,[["render",ze],["__file","index.vue"]]);export{Xe as M};
