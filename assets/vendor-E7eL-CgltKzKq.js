import{W as f,c as m,g as b,e as p,q as y,I as C}from"./vendor-RE7Z-DOm9JKld.js";function A(u){const h=b();f(()=>{l.value.addObserver(h)}),p(()=>{i(l.value),d(l.value)}),y(()=>{i(l.value),d(l.value)}),C(()=>{l.value.removeObserver(h)});const l=m(()=>{const t=u.layout;if(!t)throw new Error("Can not find table layout.");return t}),i=t=>{var r;const o=((r=u.vnode.el)==null?void 0:r.querySelectorAll("colgroup > col"))||[];if(!o.length)return;const c=t.getFlattenColumns(),a={};c.forEach(e=>{a[e.id]=e});for(let e=0,s=o.length;e<s;e++){const n=o[e],g=n.getAttribute("name"),v=a[g];v&&n.setAttribute("width",v.realWidth||v.width)}},d=t=>{var r,o;const c=((r=u.vnode.el)==null?void 0:r.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let e=0,s=c.length;e<s;e++)c[e].setAttribute("width",t.scrollY.value?t.gutterWidth:"0");const a=((o=u.vnode.el)==null?void 0:o.querySelectorAll("th.gutter"))||[];for(let e=0,s=a.length;e<s;e++){const n=a[e];n.style.width=t.scrollY.value?`${t.gutterWidth}px`:"0",n.style.display=t.scrollY.value?"":"none"}};return{tableLayout:l.value,onColumnsChange:i,onScrollableChange:d}}export{A as u};
