import{h as b,c as d}from"./vendor-7avT-DhdrFwTb.js";const _=function(a,t,e){return[a,t*e/((a=(2-t)*e)<1?a:2-a)||0,a/2]},C=function(a){return d(a)&&a.includes(".")&&Number.parseFloat(a)===1},k=function(a){return d(a)&&a.includes("%")},l=function(a,t){C(a)&&(a="100%");const e=k(a);return a=Math.min(t,Math.max(0,Number.parseFloat(`${a}`))),e&&(a=Number.parseInt(`${a*t}`,10)/100),Math.abs(a-t)<1e-6?1:a%t/Number.parseFloat(t)},$={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},f=a=>{a=Math.min(Math.round(a),255);const t=Math.floor(a/16),e=a%16;return`${$[t]||t}${$[e]||e}`},g=function({r:a,g:t,b:e}){return Number.isNaN(+a)||Number.isNaN(+t)||Number.isNaN(+e)?"":`#${f(a)}${f(t)}${f(e)}`},p={A:10,B:11,C:12,D:13,E:14,F:15},c=function(a){return a.length===2?(p[a[0].toUpperCase()]||+a[0])*16+(p[a[1].toUpperCase()]||+a[1]):p[a[1].toUpperCase()]||+a[1]},A=function(a,t,e){t=t/100,e=e/100;let s=t;const n=Math.max(e,.01);e*=2,t*=e<=1?e:2-e,s*=n<=1?n:2-n;const h=(e+t)/2,r=e===0?2*s/(n+s):2*t/(e+t);return{h:a,s:r*100,v:h*100}},M=(a,t,e)=>{a=l(a,255),t=l(t,255),e=l(e,255);const s=Math.max(a,t,e),n=Math.min(a,t,e);let h;const r=s,i=s-n,o=s===0?0:i/s;if(s===n)h=0;else{switch(s){case a:{h=(t-e)/i+(t<e?6:0);break}case t:{h=(e-a)/i+2;break}case e:{h=(a-t)/i+4;break}}h/=6}return{h:h*360,s:o*100,v:r*100}},u=function(a,t,e){a=l(a,360)*6,t=l(t,100),e=l(e,100);const s=Math.floor(a),n=a-s,h=e*(1-t),r=e*(1-n*t),i=e*(1-(1-n)*t),o=s%6,m=[e,r,h,h,i,e][o],N=[i,e,e,r,h,h][o],F=[h,h,i,e,e,r][o];return{r:Math.round(m*255),g:Math.round(N*255),b:Math.round(F*255)}};class I{constructor(t={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const e in t)b(t,e)&&(this[e]=t[e]);t.value?this.fromString(t.value):this.doOnChange()}set(t,e){if(arguments.length===1&&typeof t=="object"){for(const s in t)b(t,s)&&this.set(s,t[s]);return}this[`_${t}`]=e,this.doOnChange()}get(t){return t==="alpha"?Math.floor(this[`_${t}`]):this[`_${t}`]}toRgb(){return u(this._hue,this._saturation,this._value)}fromString(t){if(!t){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const e=(s,n,h)=>{this._hue=Math.max(0,Math.min(360,s)),this._saturation=Math.max(0,Math.min(100,n)),this._value=Math.max(0,Math.min(100,h)),this.doOnChange()};if(t.includes("hsl")){const s=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,h)=>h>2?Number.parseFloat(n):Number.parseInt(n,10));if(s.length===4?this._alpha=Number.parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3){const{h:n,s:h,v:r}=A(s[0],s[1],s[2]);e(n,h,r)}}else if(t.includes("hsv")){const s=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,h)=>h>2?Number.parseFloat(n):Number.parseInt(n,10));s.length===4?this._alpha=Number.parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3&&e(s[0],s[1],s[2])}else if(t.includes("rgb")){const s=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,h)=>h>2?Number.parseFloat(n):Number.parseInt(n,10));if(s.length===4?this._alpha=Number.parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3){const{h:n,s:h,v:r}=M(s[0],s[1],s[2]);e(n,h,r)}}else if(t.includes("#")){const s=t.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(s))return;let n,h,r;s.length===3?(n=c(s[0]+s[0]),h=c(s[1]+s[1]),r=c(s[2]+s[2])):(s.length===6||s.length===8)&&(n=c(s.slice(0,2)),h=c(s.slice(2,4)),r=c(s.slice(4,6))),s.length===8?this._alpha=c(s.slice(6))/255*100:(s.length===3||s.length===6)&&(this._alpha=100);const{h:i,s:o,v:m}=M(n,h,r);e(i,o,m)}}compare(t){return Math.abs(t._hue-this._hue)<2&&Math.abs(t._saturation-this._saturation)<1&&Math.abs(t._value-this._value)<1&&Math.abs(t._alpha-this._alpha)<1}doOnChange(){const{_hue:t,_saturation:e,_value:s,_alpha:n,format:h}=this;if(this.enableAlpha)switch(h){case"hsl":{const r=_(t,e/100,s/100);this.value=`hsla(${t}, ${Math.round(r[1]*100)}%, ${Math.round(r[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${t}, ${Math.round(e)}%, ${Math.round(s)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${g(u(t,e,s))}${f(n*255/100)}`;break}default:{const{r,g:i,b:o}=u(t,e,s);this.value=`rgba(${r}, ${i}, ${o}, ${this.get("alpha")/100})`}}else switch(h){case"hsl":{const r=_(t,e/100,s/100);this.value=`hsl(${t}, ${Math.round(r[1]*100)}%, ${Math.round(r[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${t}, ${Math.round(e)}%, ${Math.round(s)}%)`;break}case"rgb":{const{r,g:i,b:o}=u(t,e,s);this.value=`rgb(${r}, ${i}, ${o})`;break}default:this.value=g(u(t,e,s))}}}export{I as C};
