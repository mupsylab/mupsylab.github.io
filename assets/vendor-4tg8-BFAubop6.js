import{a as q}from"./vendor-5WKb-KWd2YoVw.js";import{s as G}from"./vendor-KAxH-CM15vxmE.js";import{E as l}from"./vendor-bP7i-BUADUvnR.js";import{U as I}from"./vendor-lLeK-BB_Ol6Sd.js";import{d as K}from"./vendor-9Eji-ZqQOO7NL.js";import{l as J,c as E,w as Q,t as Z}from"./vendor-RE7Z-DOm9JKld.js";import{r as y}from"./vendor-eqDO-Ti6p_k8X.js";const D=(n,e,m)=>{const u=y(),r=y(!1),a=E(()=>e.value instanceof Function),c=E(()=>a.value&&e.value(n.modelValue)||n.modelValue),f=K(()=>{m.value&&(r.value=!0)},50),b=K(()=>{m.value&&(r.value=!1)},50);return{tooltip:u,tooltipVisible:r,formatValue:c,displayTooltip:f,hideTooltip:b}},ue=(n,e,m)=>{const{disabled:u,min:r,max:a,step:c,showTooltip:f,persistent:b,precision:N,sliderSize:P,formatTooltip:x,emitChange:g,resetSize:C,updateDragging:F}=J(G),{tooltip:k,tooltipVisible:S,formatValue:M,displayTooltip:L,hideTooltip:T}=D(n,x,f),V=y(),w=E(()=>`${(n.modelValue-r.value)/(a.value-r.value)*100}%`),U=E(()=>n.vertical?{bottom:w.value}:{left:w.value}),_=()=>{e.hovering=!0,L()},z=()=>{e.hovering=!1,e.dragging||T()},X=o=>{u.value||(o.preventDefault(),$(o),window.addEventListener("mousemove",h),window.addEventListener("touchmove",h),window.addEventListener("mouseup",i),window.addEventListener("touchend",i),window.addEventListener("contextmenu",i),V.value.focus())},p=o=>{u.value||(e.newPosition=Number.parseFloat(w.value)+o/(a.value-r.value)*100,d(e.newPosition),g())},B=()=>{p(-c.value)},O=()=>{p(c.value)},j=()=>{p(-c.value*4)},A=()=>{p(c.value*4)},H=()=>{u.value||(d(0),g())},R=()=>{u.value||(d(100),g())},W=o=>{let t=!0;switch(o.code){case l.left:case l.down:B();break;case l.right:case l.up:O();break;case l.home:H();break;case l.end:R();break;case l.pageDown:j();break;case l.pageUp:A();break;default:t=!1;break}t&&o.preventDefault()},Y=o=>{let t,s;return o.type.startsWith("touch")?(s=o.touches[0].clientY,t=o.touches[0].clientX):(s=o.clientY,t=o.clientX),{clientX:t,clientY:s}},$=o=>{e.dragging=!0,e.isClick=!0;const{clientX:t,clientY:s}=Y(o);n.vertical?e.startY=s:e.startX=t,e.startPosition=Number.parseFloat(w.value),e.newPosition=e.startPosition},h=o=>{if(e.dragging){e.isClick=!1,L(),C();let t;const{clientX:s,clientY:v}=Y(o);n.vertical?(e.currentY=v,t=(e.startY-e.currentY)/P.value*100):(e.currentX=s,t=(e.currentX-e.startX)/P.value*100),e.newPosition=e.startPosition+t,d(e.newPosition)}},i=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||T(),e.isClick||d(e.newPosition),g()},0),window.removeEventListener("mousemove",h),window.removeEventListener("touchmove",h),window.removeEventListener("mouseup",i),window.removeEventListener("touchend",i),window.removeEventListener("contextmenu",i))},d=async o=>{if(o===null||Number.isNaN(+o))return;o<0?o=0:o>100&&(o=100);const t=100/((a.value-r.value)/c.value);let v=Math.round(o/t)*t*(a.value-r.value)*.01+r.value;v=Number.parseFloat(v.toFixed(N.value)),v!==n.modelValue&&m(I,v),!e.dragging&&n.modelValue!==e.oldValue&&(e.oldValue=n.modelValue),await Z(),e.dragging&&L(),k.value.updatePopper()};return Q(()=>e.dragging,o=>{F(o)}),q(V,"touchstart",X,{passive:!1}),{disabled:u,button:V,tooltip:k,tooltipVisible:S,showTooltip:f,persistent:b,wrapperStyle:U,formatValue:M,handleMouseEnter:_,handleMouseLeave:z,onButtonDown:X,onKeyDown:W,setPosition:d}};export{ue as u};
