import{c as M}from"./vendor-deea-C-hkH4Pg.js";import{j as D}from"./vendor-TevV-BDucN0Ls.js";function C(e){return e.index}function E(e,d){var h=e.get(d);if(!h)throw new Error("node not found: "+d);return h}function H(e){var d=C,h=l,y,p=M(30),w,c,o,j,z,A=1;e==null&&(e=[]);function l(n){return 1/Math.min(o[n.source.index],o[n.target.index])}function r(n){for(var i=0,g=e.length;i<A;++i)for(var a=0,t,u,f,v,x,m,s;a<g;++a)t=e[a],u=t.source,f=t.target,v=f.x+f.vx-u.x-u.vx||D(z),x=f.y+f.vy-u.y-u.vy||D(z),m=Math.sqrt(v*v+x*x),m=(m-w[a])/m*n*y[a],v*=m,x*=m,f.vx-=v*(s=j[a]),f.vy-=x*s,u.vx+=v*(s=1-s),u.vy+=x*s}function S(){if(c){var n,i=c.length,g=e.length,a=new Map(c.map((u,f)=>[d(u,f,c),u])),t;for(n=0,o=new Array(i);n<g;++n)t=e[n],t.index=n,typeof t.source!="object"&&(t.source=E(a,t.source)),typeof t.target!="object"&&(t.target=E(a,t.target)),o[t.source.index]=(o[t.source.index]||0)+1,o[t.target.index]=(o[t.target.index]||0)+1;for(n=0,j=new Array(g);n<g;++n)t=e[n],j[n]=o[t.source.index]/(o[t.source.index]+o[t.target.index]);y=new Array(g),q(),w=new Array(g),B()}}function q(){if(c)for(var n=0,i=e.length;n<i;++n)y[n]=+h(e[n],n,e)}function B(){if(c)for(var n=0,i=e.length;n<i;++n)w[n]=+p(e[n],n,e)}return r.initialize=function(n,i){c=n,z=i,S()},r.links=function(n){return arguments.length?(e=n,S(),r):e},r.id=function(n){return arguments.length?(d=n,r):d},r.iterations=function(n){return arguments.length?(A=+n,r):A},r.strength=function(n){return arguments.length?(h=typeof n=="function"?n:M(+n),q(),r):h},r.distance=function(n){return arguments.length?(p=typeof n=="function"?n:M(+n),B(),r):p},r}export{H as l};
