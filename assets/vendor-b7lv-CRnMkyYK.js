import{F as G}from"./vendor-4ELM-B6Z_mWXb.js";import{i as M}from"./vendor-UUu6-BeUS1t8s.js";import{d as N}from"./vendor-9Eji-ZqQOO7NL.js";import{g as O,c as T}from"./vendor-RE7Z-DOm9JKld.js";import{s as c,r as f,u as s}from"./vendor-eqDO-Ti6p_k8X.js";const Q=(a,{mainTableRef:x,leftTableRef:w,rightTableRef:H,tableInstance:A,ns:E,isScrolling:y})=>{const _=O(),{emit:F}=_,v=c(!1),R=f(a.defaultExpandedRowKeys||[]),m=f(-1),u=c(null),d=f({}),h=f({}),b=c({}),p=c({}),I=c({}),C=T(()=>M(a.estimatedRowHeight));function L(e){var n;(n=a.onRowsRendered)==null||n.call(a,e),e.rowCacheEnd>s(m)&&(m.value=e.rowCacheEnd)}function S({hovered:e,rowKey:n}){if(y.value)return;A.vnode.el.querySelectorAll(`[rowkey="${String(n)}"]`).forEach(l=>{e?l.classList.add(E.is("hovered")):l.classList.remove(E.is("hovered"))})}function $({expanded:e,rowData:n,rowIndex:o,rowKey:t}){var l,r;const i=[...s(R)],g=i.indexOf(t);e?g===-1&&i.push(t):g>-1&&i.splice(g,1),R.value=i,F("update:expandedRowKeys",i),(l=a.onRowExpand)==null||l.call(a,{expanded:e,rowData:n,rowIndex:o,rowKey:t}),(r=a.onExpandedRowsChange)==null||r.call(a,i)}const k=N(()=>{var e,n,o,t;v.value=!0,d.value={...s(d),...s(h)},U(s(u),!1),h.value={},u.value=null,(e=x.value)==null||e.forceUpdate(),(n=w.value)==null||n.forceUpdate(),(o=H.value)==null||o.forceUpdate(),(t=_.proxy)==null||t.$forceUpdate(),v.value=!1},0);function U(e,n=!1){s(C)&&[x,w,H].forEach(o=>{const t=s(o);t&&t.resetAfterRowIndex(e,n)})}function q(e,n,o){const t=s(u);(t===null||t>o)&&(u.value=o),h.value[e]=n}function D({rowKey:e,height:n,rowIndex:o},t){t?t===G.RIGHT?I.value[e]=n:b.value[e]=n:p.value[e]=n;const l=Math.max(...[b,I,p].map(r=>r.value[e]||0));s(d)[e]!==l&&(q(e,l,o),k())}return{expandedRowKeys:R,lastRenderedRowIndex:m,isDynamic:C,isResetting:v,rowHeights:d,resetAfterIndex:U,onRowExpanded:$,onRowHovered:S,onRowsRendered:L,onRowHeightChange:D}};export{Q as u};
