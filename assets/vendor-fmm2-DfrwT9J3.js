import{d as L,y as O}from"./vendor-06AU-DQhx1zgu.js";import{b as Q,a as K,c as D,n as j}from"./vendor-cSZE-CwUZkr_R.js";import{c as y}from"./vendor-91xQ-nDF9U2Tk.js";import{D as M}from"./vendor-qNNA-sRdNmH9Q.js";import{d as R}from"./vendor-BvAT-kxCwF96_.js";import{s as N}from"./vendor-1p6O-CVynMCuh.js";import{p as P}from"./vendor-GalV-F1hJZ_RD.js";function U(a){return!a.ctrlKey&&!a.button}function V(){return this.parentNode}function W(a,i){return i??{x:a.x,y:a.y}}function Z(){return navigator.maxTouchPoints||"ontouchstart"in this}function et(){var a=U,i=V,b=W,w=Z,l={},d=R("start","drag","end"),h=0,E,v,m,g,x=0;function u(t){t.on("mousedown.drag",S).filter(w).on("touchstart.drag",B).on("touchmove.drag",G,Q).on("touchend.drag touchcancel.drag",H).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(t,o){if(!(g||!a.call(this,t,o))){var n=X(this,i.call(this,t,o),t,o,"mouse");n&&(N(t.view).on("mousemove.drag",z,K).on("mouseup.drag",A,K),L(t.view),D(t),m=!1,E=t.clientX,v=t.clientY,n("start",t))}}function z(t){if(j(t),!m){var o=t.clientX-E,n=t.clientY-v;m=o*o+n*n>x}l.mouse("drag",t)}function A(t){N(t.view).on("mousemove.drag mouseup.drag",null),O(t.view,m),j(t),l.mouse("end",t)}function B(t,o){if(a.call(this,t,o)){var n=t.changedTouches,r=i.call(this,t,o),e=n.length,c,f;for(c=0;c<e;++c)(f=X(this,r,t,o,n[c].identifier,n[c]))&&(D(t),f("start",t,n[c]))}}function G(t){var o=t.changedTouches,n=o.length,r,e;for(r=0;r<n;++r)(e=l[o[r].identifier])&&(j(t),e("drag",t,o[r]))}function H(t){var o=t.changedTouches,n=o.length,r,e;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),r=0;r<n;++r)(e=l[o[r].identifier])&&(D(t),e("end",t,o[r]))}function X(t,o,n,r,e,c){var f=d.copy(),s=P(c||n,o),Y,q,p;if((p=b.call(t,new M("beforestart",{sourceEvent:n,target:u,identifier:e,active:h,x:s[0],y:s[1],dx:0,dy:0,dispatch:f}),r))!=null)return Y=p.x-s[0]||0,q=p.y-s[1]||0,function I(T,C,J){var F=s,k;switch(T){case"start":l[e]=I,k=h++;break;case"end":delete l[e],--h;case"drag":s=P(J||C,o),k=h;break}f.call(T,t,new M(T,{sourceEvent:C,subject:p,target:u,identifier:e,active:k,x:s[0]+Y,y:s[1]+q,dx:s[0]-F[0],dy:s[1]-F[1],dispatch:f}),r)}}return u.filter=function(t){return arguments.length?(a=typeof t=="function"?t:y(!!t),u):a},u.container=function(t){return arguments.length?(i=typeof t=="function"?t:y(t),u):i},u.subject=function(t){return arguments.length?(b=typeof t=="function"?t:y(t),u):b},u.touchable=function(t){return arguments.length?(w=typeof t=="function"?t:y(!!t),u):w},u.on=function(){var t=d.on.apply(d,arguments);return t===d?u:t},u.clickDistance=function(t){return arguments.length?(x=(t=+t)*t,u):Math.sqrt(x)},u}export{et as d};
