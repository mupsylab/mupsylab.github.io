import{g as x,s as C}from"./vendor-7XBs-C2ZIZBcB.js";import{u as E}from"./vendor-unoq-CFxLHdLI.js";import{a as p}from"./vendor-UUu6-BeUS1t8s.js";import{s as M,r as B}from"./vendor-eqDO-Ti6p_k8X.js";function O({wrapperRef:c,handleDragged:$,afterDragged:g}){const u=E("input-tag"),v=M(),i=B(!1);let e,a,l,t;function m(o){return`.${u.e("inner")} .${u.namespace.value}-tag:nth-child(${o+1})`}function P(o,n){e=n,a=c.value.querySelector(m(n)),a&&(a.style.opacity="0.5"),o.dataTransfer.effectAllowed="move"}function w(o,n){if(l=n,o.preventDefault(),o.dataTransfer.dropEffect="move",p(e)||e===n){i.value=!1;return}const r=c.value.querySelector(m(n)).getBoundingClientRect(),h=e+1!==n,y=e-1!==n,T=o.clientX-r.left,N=h?y?.5:1:-1,b=y?h?.5:0:1;T<=r.width*N?t="before":T>r.width*b?t="after":t=void 0;const D=c.value.querySelector(`.${u.e("inner")}`),s=D.getBoundingClientRect(),f=Number.parseFloat(x(D,"gap"))/2,q=r.top-s.top;let d=-9999;if(t==="before")d=Math.max(r.left-s.left-f,Math.floor(-f/2));else if(t==="after"){const S=r.right-s.left;d=S+(s.width===S?Math.floor(f/2):f)}C(v.value,{top:`${q}px`,left:`${d}px`}),i.value=!!t}function I(o){o.preventDefault(),a&&(a.style.opacity=""),t&&!p(e)&&!p(l)&&e!==l&&$(e,l,t),i.value=!1,e=void 0,a=null,l=void 0,t=void 0,g==null||g()}return{dropIndicatorRef:v,showDropIndicator:i,handleDragStart:P,handleDragOver:w,handleDragEnd:I}}export{O as u};
