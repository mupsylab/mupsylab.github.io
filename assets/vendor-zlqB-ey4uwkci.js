import{i as X,j as Y,u as G}from"./vendor-5WKb-KWd2YoVw.js";import{E as P}from"./vendor-AQSj-DFJim-ok.js";import{a as J,b as Q,e as Z}from"./vendor-Fq1d-qefZ2EtI.js";import{T as ee}from"./vendor-PNcc-BznmmDXw.js";import{t as te}from"./vendor-mj3a-BBL2-yn9.js";import{b as ae,d as se}from"./vendor-BvSU-CYRVtLwv.js";import{m as oe}from"./vendor-FQCA-Bp3YSIOJ.js";import{t as le}from"./vendor-0rdd-Cq9Fpw4b.js";import{u as ne}from"./vendor-unoq-CFxLHdLI.js";import{E as T}from"./vendor-bP7i-BUADUvnR.js";import{c as y}from"./vendor-W2mj-CCBXsyCN.js";import{d as ie,l as re,c as F,w as M,e as ce,q as ue,z as i,t as fe}from"./vendor-RE7Z-DOm9JKld.js";import{r as d}from"./vendor-eqDO-Ti6p_k8X.js";const ve=ae({panes:{type:se(Array),default:()=>oe([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),be={tabClick:(v,N,w)=>w instanceof Event,tabRemove:(v,N)=>N instanceof Event},I="ElTabNav",Se=ie({name:I,props:ve,emits:be,setup(v,{expose:N,emit:w}){const m=re(te);m||le(I,"<el-tabs><tab-nav /></el-tabs>");const o=ne("tabs"),q=X(),K=Y(),f=d(),h=d(),$=d(),z=d(),r=d(!1),c=d(0),O=d(!1),x=d(!0),g=F(()=>["top","bottom"].includes(m.props.tabPosition)?"width":"height"),V=F(()=>({transform:`translate${g.value==="width"?"X":"Y"}(-${c.value}px)`})),j=()=>{if(!f.value)return;const t=f.value[`offset${y(g.value)}`],a=c.value;if(!a)return;const e=a>t?a-t:0;c.value=e},D=()=>{if(!f.value||!h.value)return;const t=h.value[`offset${y(g.value)}`],a=f.value[`offset${y(g.value)}`],e=c.value;if(t-e<=a)return;const l=t-e>a*2?e+a:t-a;c.value=l},B=async()=>{const t=h.value;if(!r.value||!$.value||!f.value||!t)return;await fe();const a=$.value.querySelector(".is-active");if(!a)return;const e=f.value,l=["top","bottom"].includes(m.props.tabPosition),s=a.getBoundingClientRect(),n=e.getBoundingClientRect(),C=l?t.offsetWidth-n.width:t.offsetHeight-n.height,b=c.value;let u=b;l?(s.left<n.left&&(u=b-(n.left-s.left)),s.right>n.right&&(u=b+s.right-n.right)):(s.top<n.top&&(u=b-(n.top-s.top)),s.bottom>n.bottom&&(u=b+(s.bottom-n.bottom))),u=Math.max(u,0),c.value=Math.min(u,C)},R=()=>{var t;if(!h.value||!f.value)return;v.stretch&&((t=z.value)==null||t.update());const a=h.value[`offset${y(g.value)}`],e=f.value[`offset${y(g.value)}`],l=c.value;e<a?(r.value=r.value||{},r.value.prev=l,r.value.next=l+e<a,a-l<e&&(c.value=a-e)):(r.value=!1,l>0&&(c.value=0))},H=t=>{let a=0;switch(t.code){case T.left:case T.up:a=-1;break;case T.right:case T.down:a=1;break;default:return}const e=Array.from(t.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let s=e.indexOf(t.target)+a;s<0?s=e.length-1:s>=e.length&&(s=0),e[s].focus({preventScroll:!0}),e[s].click(),A()},A=()=>{x.value&&(O.value=!0)},S=()=>O.value=!1;return M(q,t=>{t==="hidden"?x.value=!1:t==="visible"&&setTimeout(()=>x.value=!0,50)}),M(K,t=>{t?setTimeout(()=>x.value=!0,50):x.value=!1}),G($,R),ce(()=>setTimeout(()=>B(),0)),ue(()=>R()),N({scrollToActiveTab:B,removeFocus:S}),()=>{const t=r.value?[i("span",{class:[o.e("nav-prev"),o.is("disabled",!r.value.prev)],onClick:j},[i(P,null,{default:()=>[i(J,null,null)]})]),i("span",{class:[o.e("nav-next"),o.is("disabled",!r.value.next)],onClick:D},[i(P,null,{default:()=>[i(Q,null,null)]})])]:null,a=v.panes.map((e,l)=>{var s,n,C,b;const u=e.uid,E=e.props.disabled,k=(n=(s=e.props.name)!=null?s:e.index)!=null?n:`${l}`,_=!E&&(e.isClosable||v.editable);e.index=`${l}`;const L=_?i(P,{class:"is-icon-close",onClick:p=>w("tabRemove",e,p)},{default:()=>[i(Z,null,null)]}):null,W=((b=(C=e.slots).label)==null?void 0:b.call(C))||e.props.label,U=!E&&e.active?0:-1;return i("div",{ref:`tab-${u}`,class:[o.e("item"),o.is(m.props.tabPosition),o.is("active",e.active),o.is("disabled",E),o.is("closable",_),o.is("focus",O.value)],id:`tab-${k}`,key:`tab-${u}`,"aria-controls":`pane-${k}`,role:"tab","aria-selected":e.active,tabindex:U,onFocus:()=>A(),onBlur:()=>S(),onClick:p=>{S(),w("tabClick",e,k,p)},onKeydown:p=>{_&&(p.code===T.delete||p.code===T.backspace)&&w("tabRemove",e,p)}},[W,L])});return i("div",{ref:$,class:[o.e("nav-wrap"),o.is("scrollable",!!r.value),o.is(m.props.tabPosition)]},[t,i("div",{class:o.e("nav-scroll"),ref:f},[i("div",{class:[o.e("nav"),o.is(m.props.tabPosition),o.is("stretch",v.stretch&&["top","bottom"].includes(m.props.tabPosition))],ref:h,style:V.value,role:"tablist",onKeydown:H},[v.type?null:i(ee,{ref:z,tabs:[...v.panes]},null),a])])])}}});export{Se as T};
