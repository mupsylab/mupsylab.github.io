import{b as A}from"./vendor-8F4M-BzORa8vA.js";import{E as P}from"./vendor-AQSj-DFJim-ok.js";import{r as ce,a as de}from"./vendor-8Yi5-BO3EUidm.js";import{_ as me}from"./vendor-pM4a-CqGSI99y.js";import{a as fe,f as ve}from"./vendor-clQw-JAUZZBS7.js";import{u as pe}from"./vendor-hmuK-B6xHqdWm.js";import{u as he}from"./vendor-unoq-CFxLHdLI.js";import{a as Ve}from"./vendor-eqCW-DCj8_tuZ.js";import{i as I,j as R,c as W,n as f,a as g,t as we}from"./vendor-7avT-DhdrFwTb.js";import{U as E}from"./vendor-lLeK-BB_Ol6Sd.js";import{E as w}from"./vendor-bP7i-BUADUvnR.js";import{h as U}from"./vendor-7XBs-C2ZIZBcB.js";import{d as Q,l as q,c as i,w as be,a as v,o as c,C as _,F as D,D as xe,z as X,h as G,y as J,f as b,i as x}from"./vendor-RE7Z-DOm9JKld.js";import{r as M,m as S,u as o}from"./vendor-eqDO-Ti6p_k8X.js";const Ce=Q({name:"ElRate"}),ye=Q({...Ce,props:de,emits:ce,setup(Y,{expose:Z,emit:p}){const e=Y;function C(a,l){const t=n=>R(n),u=Object.keys(l).map(n=>+n).filter(n=>{const V=l[n];return(t(V)?V.excluded:!1)?a<n:a<=n}).sort((n,V)=>n-V),h=l[u[0]];return t(h)&&h.value||h}const T=q(fe,void 0),k=q(ve,void 0),ee=pe(),r=he("rate"),{inputId:ae,isLabeledByFormItem:H}=Ve(e,{formItemContext:k}),s=M(e.modelValue),y=M(-1),m=M(!0),le=i(()=>[r.b(),r.m(ee.value)]),d=i(()=>e.disabled||(T==null?void 0:T.disabled)),oe=i(()=>r.cssVarBlock({"void-color":e.voidColor,"disabled-void-color":e.disabledVoidColor,"fill-color":j.value})),F=i(()=>{let a="";return e.showScore?a=e.scoreTemplate.replace(/\{\s*value\s*\}/,d.value?`${e.modelValue}`:`${s.value}`):e.showText&&(a=e.texts[Math.ceil(s.value)-1]),a}),N=i(()=>e.modelValue*100-Math.floor(e.modelValue)*100),te=i(()=>I(e.colors)?{[e.lowThreshold]:e.colors[0],[e.highThreshold]:{value:e.colors[1],excluded:!0},[e.max]:e.colors[2]}:e.colors),j=i(()=>{const a=C(s.value,te.value);return R(a)?"":a}),se=i(()=>{let a="";return d.value?a=`${N.value}%`:e.allowHalf&&(a="50%"),{color:j.value,width:a}}),z=i(()=>{let a=I(e.icons)?[...e.icons]:{...e.icons};return a=S(a),I(a)?{[e.lowThreshold]:a[0],[e.highThreshold]:{value:a[1],excluded:!0},[e.max]:a[2]}:a}),re=i(()=>C(e.modelValue,z.value)),B=i(()=>d.value?W(e.disabledVoidIcon)?e.disabledVoidIcon:S(e.disabledVoidIcon):W(e.voidIcon)?e.voidIcon:S(e.voidIcon)),ne=i(()=>C(s.value,z.value));function K(a){const l=d.value&&N.value>0&&a-1<e.modelValue&&a>e.modelValue,t=e.allowHalf&&m.value&&a-.5<=s.value&&a>s.value;return l||t}function L(a){e.clearable&&a===e.modelValue&&(a=0),p(E,a),e.modelValue!==a&&p("change",a)}function ie(a){d.value||(e.allowHalf&&m.value?L(s.value):L(a))}function ue(a){if(d.value)return;let l=s.value;const t=a.code;return t===w.up||t===w.right?(e.allowHalf?l+=.5:l+=1,a.stopPropagation(),a.preventDefault()):(t===w.left||t===w.down)&&(e.allowHalf?l-=.5:l-=1,a.stopPropagation(),a.preventDefault()),l=l<0?0:l,l=l>e.max?e.max:l,p(E,l),p("change",l),l}function O(a,l){if(!d.value){if(e.allowHalf&&l){let t=l.target;U(t,r.e("item"))&&(t=t.querySelector(`.${r.e("icon")}`)),(t.clientWidth===0||U(t,r.e("decimal")))&&(t=t.parentNode),m.value=l.offsetX*2<=t.clientWidth,s.value=m.value?a-.5:a}else s.value=a;y.value=a}}function $(){d.value||(e.allowHalf&&(m.value=e.modelValue!==Math.floor(e.modelValue)),s.value=e.modelValue,y.value=-1)}return be(()=>e.modelValue,a=>{s.value=a,m.value=e.modelValue!==Math.floor(e.modelValue)}),e.modelValue||p(E,0),Z({setCurrentValue:O,resetCurrentValue:$}),(a,l)=>{var t;return c(),v("div",{id:o(ae),class:f([o(le),o(r).is("disabled",o(d))]),role:"slider","aria-label":o(H)?void 0:a.ariaLabel||"rating","aria-labelledby":o(H)?(t=o(k))==null?void 0:t.labelId:void 0,"aria-valuenow":s.value,"aria-valuetext":o(F)||void 0,"aria-valuemin":"0","aria-valuemax":a.max,tabindex:"0",style:g(o(oe)),onKeydown:ue},[(c(!0),v(D,null,xe(a.max,(u,h)=>(c(),v("span",{key:h,class:f(o(r).e("item")),onMousemove:n=>O(u,n),onMouseleave:$,onClick:n=>ie(u)},[X(o(P),{class:f([o(r).e("icon"),{hover:y.value===u},o(r).is("active",u<=s.value)])},{default:G(()=>[K(u)?_("v-if",!0):(c(),v(D,{key:0},[J((c(),b(x(o(ne)),null,null,512)),[[A,u<=s.value]]),J((c(),b(x(o(B)),null,null,512)),[[A,!(u<=s.value)]])],64)),K(u)?(c(),v(D,{key:1},[(c(),b(x(o(B)),{class:f([o(r).em("decimal","box")])},null,8,["class"])),X(o(P),{style:g(o(se)),class:f([o(r).e("icon"),o(r).e("decimal")])},{default:G(()=>[(c(),b(x(o(re))))]),_:1},8,["style","class"])],64)):_("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),a.showText||a.showScore?(c(),v("span",{key:0,class:f(o(r).e("text")),style:g({color:a.textColor})},we(o(F)),7)):_("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var Ke=me(ye,[["__file","rate.vue"]]);export{Ke as R};
