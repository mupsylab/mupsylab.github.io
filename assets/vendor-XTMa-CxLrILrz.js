import{a as O}from"./vendor-5WKb-KWd2YoVw.js";import{E as re}from"./vendor-eNyA-DUpMROd_.js";import{i as se,a as oe}from"./vendor-KvNJ-CvauQnX9.js";import{_ as ae}from"./vendor-pM4a-CqGSI99y.js";import{i as ie}from"./vendor-aqi2-CgBKjudC.js";import{u as te}from"./vendor-cebD-BGFhTQCu.js";import{u as le}from"./vendor-unoq-CFxLHdLI.js";import{u as ne}from"./vendor-g2q2-CIPiop1j.js";import{i as ue,t as ce,n as C,e as T,c as fe}from"./vendor-7avT-DhdrFwTb.js";import{b as de}from"./vendor-UUu6-BeUS1t8s.js";import{a as me}from"./vendor-HWBx-H0iAIG7V.js";import{f as ve}from"./vendor-c256-Dx9PT-t0.js";import{d as K,R as pe,c as t,w as ge,e as we,a as c,o as l,r as v,C as p,b as F,F as M,H as j,f as he,h as E,B as D,t as ye}from"./vendor-RE7Z-DOm9JKld.js";import{r as f,u as r}from"./vendor-eqDO-Ti6p_k8X.js";import{i as g,k as Le}from"./vendor-k87t-DYFOtHqs.js";const ke=K({name:"ElImage",inheritAttrs:!1}),ze=K({...ke,props:oe,emits:se,setup(N,{expose:R,emit:d}){const s=N;let b="";const{t:Y}=te(),i=le("image"),q=pe(),I=t(()=>ve(Object.entries(q).filter(([e])=>/^(data-|on[A-Z])/i.test(e)||["id","style"].includes(e)))),W=ne({excludeListeners:!0,excludeKeys:t(()=>Object.keys(I.value))}),h=f(),m=f(!1),n=f(!0),y=f(!1),w=f(),a=f(),Z=g&&"loading"in HTMLImageElement.prototype;let L,k;const G=t(()=>[i.e("inner"),z.value&&i.e("preview"),n.value&&i.is("loading")]),J=t(()=>{const{fit:e}=s;return g&&e?{objectFit:e}:{}}),z=t(()=>{const{previewSrcList:e}=s;return ue(e)&&e.length>0}),Q=t(()=>{const{previewSrcList:e,initialIndex:o}=s;let u=o;return o>e.length-1&&(u=0),u}),A=t(()=>s.loading==="eager"?!1:!Z&&s.loading==="lazy"||s.lazy),S=()=>{g&&(n.value=!0,m.value=!1,h.value=s.src)};function U(e){n.value=!1,m.value=!1,d("load",e)}function X(e){n.value=!1,m.value=!0,d("error",e)}function P(){ie(w.value,a.value)&&(S(),B())}const $=Le(P,200,!0);async function V(){var e;if(!g)return;await ye();const{scrollContainer:o}=s;de(o)?a.value=o:fe(o)&&o!==""?a.value=(e=document.querySelector(o))!=null?e:void 0:w.value&&(a.value=me(w.value)),a.value&&(L=O(a,"scroll",$),setTimeout(()=>P(),100))}function B(){!g||!a.value||!$||(L==null||L(),a.value=void 0)}function x(e){if(e.ctrlKey){if(e.deltaY<0)return e.preventDefault(),!1;if(e.deltaY>0)return e.preventDefault(),!1}}function H(){z.value&&(k=O("wheel",x,{passive:!1}),b=document.body.style.overflow,document.body.style.overflow="hidden",y.value=!0,d("show"))}function _(){k==null||k(),document.body.style.overflow=b,y.value=!1,d("close")}function ee(e){d("switch",e)}return ge(()=>s.src,()=>{A.value?(n.value=!0,m.value=!1,B(),V()):S()}),we(()=>{A.value?V():S()}),R({showPreview:H}),(e,o)=>(l(),c("div",j({ref_key:"container",ref:w},r(I),{class:[r(i).b(),e.$attrs.class]}),[m.value?v(e.$slots,"error",{key:0},()=>[F("div",{class:C(r(i).e("error"))},ce(r(Y)("el.image.error")),3)]):(l(),c(M,{key:1},[h.value!==void 0?(l(),c("img",j({key:0},r(W),{src:h.value,loading:e.loading,style:r(J),class:r(G),crossorigin:e.crossorigin,onClick:H,onLoad:U,onError:X}),null,16,["src","loading","crossorigin"])):p("v-if",!0),n.value?(l(),c("div",{key:1,class:C(r(i).e("wrapper"))},[v(e.$slots,"placeholder",{},()=>[F("div",{class:C(r(i).e("placeholder"))},null,2)])],2)):p("v-if",!0)],64)),r(z)?(l(),c(M,{key:2},[y.value?(l(),he(r(re),{key:0,"z-index":e.zIndex,"initial-index":r(Q),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"show-progress":e.showProgress,"url-list":e.previewSrcList,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:_,onSwitch:ee},{progress:E(u=>[v(e.$slots,"progress",T(D(u)))]),toolbar:E(u=>[v(e.$slots,"toolbar",T(D(u)))]),default:E(()=>[e.$slots.viewer?(l(),c("div",{key:0},[v(e.$slots,"viewer")])):p("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):p("v-if",!0)],64)):p("v-if",!0)],16))}});var je=ae(ze,[["__file","image.vue"]]);export{je as I};
