import{w as d,a as b,v as L,b as H}from"./vendor-8F4M-BzORa8vA.js";import{E as P}from"./vendor-NFpn-BrHihosC.js";import{E as N}from"./vendor-WXXn-CEyMwSfL.js";import{E as O}from"./vendor-AQSj-DFJim-ok.js";import{E as A}from"./vendor-KuK8-C5jOO1eG.js";import{u as F}from"./vendor-jFcD-kb6GRqTo.js";import{s as U,S as j}from"./vendor-oVbA-BG_i4ENy.js";import{s as W}from"./vendor-xMAo-BVVr2ZPm.js";import{_ as q}from"./vendor-pM4a-CqGSI99y.js";import{C as G}from"./vendor-UDEi-Bp1F1IF-.js";import{e as J,n as l,t as m,a as w,i as Q}from"./vendor-7avT-DhdrFwTb.js";import{u as X}from"./vendor-7wHf-C8xLjhw8.js";import{d as Y,v as h,x as Z,y as k,a as r,o as a,z as c,h as n,A as x,r as i,B as _,b as o,C as f,f as v,F as R,D as z,E,i as V,c as M,p as ee}from"./vendor-RE7Z-DOm9JKld.js";import{a as K,t as D}from"./vendor-eqDO-Ti6p_k8X.js";const le=Y({name:"ElSelectV2",components:{ElSelectMenu:A,ElTag:N,ElTooltip:P,ElIcon:O},directives:{ClickOutside:G},props:j,emits:U,setup(e,{emit:$}){const S=M(()=>{const{modelValue:p,multiple:u}=e,y=u?[]:void 0;return Q(p)?u?p:y:u?y:p}),t=F(K({...D(e),modelValue:S}),$),{calculatorRef:T,inputStyle:I}=X();ee(W,{props:K({...D(e),height:t.popupHeight,modelValue:S}),expanded:t.expanded,tooltipRef:t.tooltipRef,onSelect:t.onSelect,onHover:t.onHover,onKeyboardNavigate:t.onKeyboardNavigate,onKeyboardSelect:t.onKeyboardSelect});const g=M(()=>e.multiple?t.states.cachedOptions.map(p=>p.label):t.states.selectedLabel);return{...t,modelValue:S,selectedLabel:g,calculatorRef:T,inputStyle:I}}});function se(e,$,S,t,T,I){const g=h("el-tag"),p=h("el-tooltip"),u=h("el-icon"),y=h("el-select-menu"),B=Z("click-outside");return k((a(),r("div",{ref:"selectRef",class:l([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),onMouseenter:s=>e.states.inputHovering=!0,onMouseleave:s=>e.states.inputHovering=!1},[c(p,{ref:"tooltipRef",visible:e.dropdownMenuVisible,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:s=>e.states.isBeforeHide=!1},{default:n(()=>[o("div",{ref:"wrapperRef",class:l([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:d(e.toggleMenu,["prevent"])},[e.$slots.prefix?(a(),r("div",{key:0,ref:"prefixRef",class:l(e.nsSelect.e("prefix"))},[i(e.$slots,"prefix")],2)):f("v-if",!0),o("div",{ref:"selectionRef",class:l([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.modelValue.length)])},[e.multiple?i(e.$slots,"tag",{key:0},()=>[(a(!0),r(R,null,z(e.showTagList,s=>(a(),r("div",{key:e.getValueKey(e.getValue(s)),class:l(e.nsSelect.e("selected-item"))},[c(g,{closable:!e.selectDisabled&&!e.getDisabled(s),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:w(e.tagStyle),onClose:C=>e.deleteTag(C,s)},{default:n(()=>[o("span",{class:l(e.nsSelect.e("tags-text"))},[i(e.$slots,"label",{label:e.getLabel(s),value:e.getValue(s)},()=>[E(m(e.getLabel(s)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.modelValue.length>e.maxCollapseTags?(a(),v(p,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:n(()=>[o("div",{ref:"collapseItemRef",class:l(e.nsSelect.e("selected-item"))},[c(g,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,style:w(e.collapseTagStyle),"disable-transitions":""},{default:n(()=>[o("span",{class:l(e.nsSelect.e("tags-text"))}," + "+m(e.modelValue.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:n(()=>[o("div",{ref:"tagMenuRef",class:l(e.nsSelect.e("selection"))},[(a(!0),r(R,null,z(e.collapseTagList,s=>(a(),r("div",{key:e.getValueKey(e.getValue(s)),class:l(e.nsSelect.e("selected-item"))},[c(g,{class:"in-tooltip",closable:!e.selectDisabled&&!e.getDisabled(s),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:C=>e.deleteTag(C,s)},{default:n(()=>[o("span",{class:l(e.nsSelect.e("tags-text"))},[i(e.$slots,"label",{label:e.getLabel(s),value:e.getValue(s)},()=>[E(m(e.getLabel(s)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):f("v-if",!0)]):f("v-if",!0),o("div",{class:l([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[k(o("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":s=>e.states.inputValue=s,style:w(e.inputStyle),autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-label":e.ariaLabel,class:l([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,onInput:e.onInput,onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onKeydown:[b(d(s=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),b(d(s=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),b(d(e.onKeyboardSelect,["stop","prevent"]),["enter"]),b(d(e.handleEsc,["stop","prevent"]),["esc"]),b(d(e.handleDel,["stop"]),["delete"])],onClick:d(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[L,e.states.inputValue]]),e.filterable?(a(),r("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:l(e.nsSelect.e("input-calculator")),textContent:m(e.states.inputValue)},null,10,["textContent"])):f("v-if",!0)],2),e.shouldShowPlaceholder?(a(),r("div",{key:1,class:l([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?i(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[o("span",null,m(e.currentPlaceholder),1)]):(a(),r("span",{key:1},m(e.currentPlaceholder),1))],2)):f("v-if",!0)],2),o("div",{ref:"suffixRef",class:l(e.nsSelect.e("suffix"))},[e.iconComponent?k((a(),v(u,{key:0,class:l([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:n(()=>[(a(),v(V(e.iconComponent)))]),_:1},8,["class"])),[[H,!e.showClearBtn]]):f("v-if",!0),e.showClearBtn&&e.clearIcon?(a(),v(u,{key:1,class:l([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.nsSelect.e("clear")]),onClick:d(e.handleClear,["prevent","stop"])},{default:n(()=>[(a(),v(V(e.clearIcon)))]),_:1},8,["class","onClick"])):f("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(a(),v(u,{key:2,class:l([e.nsInput.e("icon"),e.nsInput.e("validateIcon"),e.nsInput.is("loading",e.validateState==="validating")])},{default:n(()=>[(a(),v(V(e.validateIcon)))]),_:1},8,["class"])):f("v-if",!0)],2)],10,["onClick"])]),content:n(()=>[c(y,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},x({default:n(s=>[i(e.$slots,"default",J(_(s)))]),_:2},[e.$slots.header?{name:"header",fn:n(()=>[o("div",{class:l(e.nsSelect.be("dropdown","header"))},[i(e.$slots,"header")],2)])}:void 0,e.$slots.loading&&e.loading?{name:"loading",fn:n(()=>[o("div",{class:l(e.nsSelect.be("dropdown","loading"))},[i(e.$slots,"loading")],2)])}:e.loading||e.filteredOptions.length===0?{name:"empty",fn:n(()=>[o("div",{class:l(e.nsSelect.be("dropdown","empty"))},[i(e.$slots,"empty",{},()=>[o("span",null,m(e.emptyText),1)])],2)])}:void 0,e.$slots.footer?{name:"footer",fn:n(()=>[o("div",{class:l(e.nsSelect.be("dropdown","footer"))},[i(e.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[B,e.handleClickOutside,e.popperRef]])}var ce=q(le,[["render",se],["__file","select.vue"]]);export{ce as S};
