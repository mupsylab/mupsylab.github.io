import{b as p,c as S,d as A,r as N}from"./vendor-8jHm-DXstvPfe.js";import{T as D}from"./vendor-ixTu-B_aMp52B.js";import{h as G,a as J,r as K}from"./vendor-7XBs-C2ZIZBcB.js";import{d as R}from"./vendor-9Eji-ZqQOO7NL.js";import{l as Y,n as F}from"./vendor-RE7Z-DOm9JKld.js";import{r as T}from"./vendor-eqDO-Ti6p_k8X.js";function f(d,a,u=.03){return d-a>u}function oe(d){const a=Y(D),u=T(""),x=T(F("div")),m=(e,t,o)=>{var l;const n=a,r=p(e);let i;const s=(l=n==null?void 0:n.vnode.el)==null?void 0:l.dataset.prefix;r&&(i=S({columns:d.store.states.columns.value},r,s),i&&(n==null||n.emit(`cell-${o}`,t,i,r,e))),n==null||n.emit(`row-${o}`,t,i,e)},E=(e,t)=>{m(e,t,"dblclick")},B=(e,t)=>{d.store.commit("setCurrentRow",t),m(e,t,"click")},M=(e,t)=>{m(e,t,"contextmenu")},I=R(e=>{d.store.commit("setHoverRow",e)},30),L=R(()=>{d.store.commit("setHoverRow",null)},30),_=e=>{const t=window.getComputedStyle(e,null),o=Number.parseInt(t.paddingLeft,10)||0,l=Number.parseInt(t.paddingRight,10)||0,n=Number.parseInt(t.paddingTop,10)||0,r=Number.parseInt(t.paddingBottom,10)||0;return{left:o,right:l,top:n,bottom:r}},C=(e,t,o)=>{let l=t.target.parentNode;for(;e>1&&(l=l==null?void 0:l.nextSibling,!(!l||l.nodeName!=="TR"));)o(l,"hover-row hover-fixed-row"),e--};return{handleDoubleClick:E,handleClick:B,handleContextMenu:M,handleMouseEnter:I,handleMouseLeave:L,handleCellMouseEnter:(e,t,o)=>{var l,n,r;const i=a,s=p(e),b=(l=i==null?void 0:i.vnode.el)==null?void 0:l.dataset.prefix;let h;if(s){h=S({columns:d.store.states.columns.value},s,b),s.rowSpan>1&&C(s.rowSpan,e,J);const v=i.hoverState={cell:s,column:h,row:t};i==null||i.emit("cell-mouse-enter",v.row,v.column,v.cell,e)}if(!o)return;const c=e.target.querySelector(".cell");if(!(G(c,`${b}-tooltip`)&&c.childNodes.length))return;const g=document.createRange();g.setStart(c,0),g.setEnd(c,c.childNodes.length);const{width:k,height:y}=g.getBoundingClientRect(),{width:w,height:H}=c.getBoundingClientRect(),{top:P,left:W,right:$,bottom:j}=_(c),q=W+$,z=P+j;f(k+q,w)||f(y+z,H)||f(c.scrollWidth,w)?A(o,s.innerText||s.textContent,t,h,s,i):((n=N)==null?void 0:n.trigger)===s&&((r=N)==null||r())},handleCellMouseLeave:e=>{const t=p(e);if(!t)return;t.rowSpan>1&&C(t.rowSpan,e,K);const o=a==null?void 0:a.hoverState;a==null||a.emit("cell-mouse-leave",o==null?void 0:o.row,o==null?void 0:o.column,o==null?void 0:o.cell,e)},tooltipContent:u,tooltipTrigger:x}}export{oe as u};
