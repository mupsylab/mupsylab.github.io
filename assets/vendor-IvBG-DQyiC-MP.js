import{E as P}from"./vendor-CO0n-CZ7yfaio.js";import{F as A}from"./vendor-9d5l-CSqZmTWH.js";import{u as B}from"./vendor-E7eL-CgltKzKq.js";import{T as D}from"./vendor-ixTu-B_aMp52B.js";import{u as _}from"./vendor-GCAm-CdNJAEwl.js";import{u as j}from"./vendor-zbOt-DqIYmvnf.js";import{u as N}from"./vendor-oTe7-tc2uS-OQ.js";import{u as $}from"./vendor-unoq-CFxLHdLI.js";import{d as q,n as a,l as G,w as V,e as z,t as F,g as I}from"./vendor-RE7Z-DOm9JKld.js";import{r as O,a as J}from"./vendor-eqDO-Ti6p_k8X.js";var re=q({name:"ElTableHeader",components:{ElCheckbox:P},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})},appendFilterPanelTo:{type:String},allowDragLastColumn:{type:Boolean}},setup(l,{emit:w}){const p=I(),r=G(D),H=$("table"),c=O({}),{onColumnsChange:f,onScrollableChange:u}=B(r),M=(r==null?void 0:r.props.tableLayout)==="auto",s=J(new Map),h=O(),o=()=>{setTimeout(()=>{s.size>0&&(s.forEach((m,R)=>{const E=h.value.querySelector(`.${R.replace(/\s/g,".")}`);if(E){const x=E.getBoundingClientRect().width;m.width=x}}),s.clear())})};V(s,o),z(async()=>{await F(),await F();const{prop:m,order:R}=l.defaultSort;r==null||r.store.commit("sort",{prop:m,order:R,init:!0}),o()});const{handleHeaderClick:b,handleHeaderContextMenu:g,handleMouseDown:C,handleMouseMove:k,handleMouseOut:T,handleSortClick:S,handleFilterClick:i}=_(l,w),{getHeaderRowStyle:n,getHeaderRowClass:e,getHeaderCellStyle:d,getHeaderCellClass:y}=j(l),{isGroup:t,toggleAllSelection:v,columnRows:L}=N(l);return p.state={onColumnsChange:f,onScrollableChange:u},p.filterPanels=c,{ns:H,filterPanels:c,onColumnsChange:f,onScrollableChange:u,columnRows:L,getHeaderRowClass:e,getHeaderRowStyle:n,getHeaderCellClass:y,getHeaderCellStyle:d,handleHeaderClick:b,handleHeaderContextMenu:g,handleMouseDown:C,handleMouseMove:k,handleMouseOut:T,handleSortClick:S,handleFilterClick:i,isGroup:t,toggleAllSelection:v,saveIndexSelection:s,isTableLayoutAuto:M,theadRef:h,updateFixedColumnStyle:o}},render(){const{ns:l,isGroup:w,columnRows:p,getHeaderCellStyle:r,getHeaderCellClass:H,getHeaderRowClass:c,getHeaderRowStyle:f,handleHeaderClick:u,handleHeaderContextMenu:M,handleMouseDown:s,handleMouseMove:h,handleSortClick:o,handleMouseOut:b,store:g,$parent:C,saveIndexSelection:k,isTableLayoutAuto:T}=this;let S=1;return a("thead",{ref:"theadRef",class:{[l.is("group")]:w}},p.map((i,n)=>a("tr",{class:c(n),key:n,style:f(n)},i.map((e,d)=>{e.rowSpan>S&&(S=e.rowSpan);const y=H(n,d,i,e);return T&&e.fixed&&k.set(y,e),a("th",{class:y,colspan:e.colSpan,key:`${e.id}-thead`,rowspan:e.rowSpan,style:r(n,d,i,e),onClick:t=>{t.currentTarget.classList.contains("noclick")||u(t,e)},onContextmenu:t=>M(t,e),onMousedown:t=>s(t,e),onMousemove:t=>h(t,e),onMouseout:b},[a("div",{class:["cell",e.filteredValue&&e.filteredValue.length>0?"highlight":""]},[e.renderHeader?e.renderHeader({column:e,$index:d,store:g,_self:C}):e.label,e.sortable&&a("span",{onClick:t=>o(t,e),class:"caret-wrapper"},[a("i",{onClick:t=>o(t,e,"ascending"),class:"sort-caret ascending"}),a("i",{onClick:t=>o(t,e,"descending"),class:"sort-caret descending"})]),e.filterable&&a(A,{store:g,placement:e.filterPlacement||"bottom-start",appendTo:C.appendFilterPanelTo,column:e,upDataColumn:(t,v)=>{e[t]=v}},{"filter-icon":()=>e.renderFilterIcon?e.renderFilterIcon({filterOpened:e.filterOpened}):null})])])}))))}});export{re as T};
