import{d as H}from"./vendor-7avT-DhdrFwTb.js";import{t as L}from"./vendor-0rdd-Cq9Fpw4b.js";import{a as N}from"./vendor-HWBx-H0iAIG7V.js";import{a as w}from"./vendor-aqi2-CgBKjudC.js";import{t as v}from"./vendor-Y0Io-CY82OFkb.js";import{t as E}from"./vendor-RE7Z-DOm9JKld.js";const r="ElInfiniteScroll",A=50,O=200,C=0,D={delay:{type:Number,default:O},distance:{type:Number,default:C},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},p=(t,n)=>Object.entries(D).reduce((o,[e,i])=>{var u,s;const{type:d,default:l}=i,a=t.getAttribute(`infinite-scroll-${e}`);let c=(s=(u=n[a])!=null?u:a)!=null?s:l;return c=c==="false"?!1:c,c=d(c),o[e]=Number.isNaN(c)?l:c,o},{}),g=t=>{const{observer:n}=t[r];n&&(n.disconnect(),delete t[r].observer)},I=(t,n)=>{const{container:o,containerEl:e,instance:i,observer:u,lastScrollTop:s}=t[r],{disabled:d,distance:l}=p(t,i),{clientHeight:a,scrollHeight:c,scrollTop:f}=e,h=f-s;if(t[r].lastScrollTop=f,u||d||h<0)return;let b=!1;if(o===t)b=c-(a+f)<=l;else{const{clientTop:T,scrollHeight:S}=t,y=w(t,e);b=f+a>=y+T+S-l}b&&n.call(i)};function m(t,n){const{containerEl:o,instance:e}=t[r],{disabled:i}=p(t,e);i||o.clientHeight===0||(o.scrollHeight<=o.clientHeight?n.call(e):g(t))}const U={async mounted(t,n){const{instance:o,value:e}=n;H(e)||L(r,"'v-infinite-scroll' binding value must be a function"),await E();const{delay:i,immediate:u}=p(t,o),s=N(t,!0),d=s===window?document.documentElement:s,l=v(I.bind(null,t,e),i);if(s){if(t[r]={instance:o,container:s,containerEl:d,delay:i,cb:e,onScroll:l,lastScrollTop:d.scrollTop},u){const a=new MutationObserver(v(m.bind(null,t,e),A));t[r].observer=a,a.observe(t,{childList:!0,subtree:!0}),m(t,e)}s.addEventListener("scroll",l)}},unmounted(t){if(!t[r])return;const{container:n,onScroll:o}=t[r];n==null||n.removeEventListener("scroll",o),g(t)},async updated(t){if(!t[r])await E();else{const{containerEl:n,cb:o,observer:e}=t[r];n.clientHeight&&e&&m(t,o)}}};export{U as I};
