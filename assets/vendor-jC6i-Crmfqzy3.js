import{T as g,c as ve,d as he,e as ye,f as Ne,C as ke}from"./vendor-ykdH-CZ0IrpdW.js";import{u as ge}from"./vendor-ICye-B0ah-M2p.js";import{u as Ce}from"./vendor-ce8x-BGm6vNC3.js";import{j as pe}from"./vendor-7avT-DhdrFwTb.js";import{r as E,s as Ke}from"./vendor-eqDO-Ti6p_k8X.js";import{w as I,c as v,t as Ee}from"./vendor-RE7Z-DOm9JKld.js";function we(o,h){const i=E(new Set(o.defaultExpandedKeys)),d=E(),s=Ke(),k=E();I(()=>o.currentNodeKey,e=>{d.value=e},{immediate:!0}),I(()=>o.data,e=>{w(e)},{immediate:!0});const{isIndeterminate:R,isChecked:m,toggleCheckbox:C,getCheckedKeys:A,getCheckedNodes:H,getHalfCheckedKeys:F,getHalfCheckedNodes:P,setChecked:j,setCheckedKeys:B}=ge(o,s),{doFilter:G,hiddenNodeKeySet:U,isForceHiddenExpandIcon:X}=Ce(o,s),Y=v(()=>{var e;return((e=o.props)==null?void 0:e.value)||g.KEY}),q=v(()=>{var e;return((e=o.props)==null?void 0:e.children)||g.CHILDREN}),z=v(()=>{var e;return((e=o.props)==null?void 0:e.disabled)||g.DISABLED}),J=v(()=>{var e;return((e=o.props)==null?void 0:e.label)||g.LABEL}),p=v(()=>{var e;const t=i.value,n=U.value,l=[],a=((e=s.value)==null?void 0:e.treeNodes)||[],f=[];for(let r=a.length-1;r>=0;--r)f.push(a[r]);for(;f.length;){const r=f.pop();if(!n.has(r.key)&&(l.push(r),r.children&&t.has(r.key)))for(let u=r.children.length-1;u>=0;--u)f.push(r.children[u])}return l}),Q=v(()=>p.value.length>0);function V(e){const t=new Map,n=new Map;let l=1;function a(r,u=1,fe=void 0){var L;const M=[];for(const y of r){const S=K(y),c={level:u,key:S,data:y};c.label=$(y),c.parent=fe;const N=x(y);c.disabled=Z(y),c.isLeaf=!N||N.length===0,N&&N.length&&(c.children=a(N,u+1,c)),M.push(c),t.set(S,c),n.has(u)||n.set(u,[]),(L=n.get(u))==null||L.push(c)}return u>l&&(l=u),M}const f=a(e);return{treeNodeMap:t,levelTreeNodeMap:n,maxLevel:l,treeNodes:f}}function W(e){const t=G(e);t&&(i.value=t)}function x(e){return e[q.value]}function K(e){return e?e[Y.value]:""}function Z(e){return e[z.value]}function $(e){return e[J.value]}function b(e){i.value.has(e.key)?D(e):_(e)}function ee(e){const t=new Set,n=s.value.treeNodeMap;e.forEach(l=>{let a=n.get(l);for(;a&&!t.has(a.key);)t.add(a.key),a=a.parent}),i.value=t}function te(e,t){h(Ne,e.data,e,t),ae(e),o.expandOnClickNode&&b(e),o.showCheckbox&&o.checkOnClickNode&&!e.disabled&&C(e,!m(e),!0)}function ne(e,t){h(ye,e.data,e,t)}function ae(e){T(e)||(d.value=e.key,h(ke,e.data,e))}function oe(e,t){C(e,t)}function _(e){const t=i.value;if(s.value&&o.accordion){const{treeNodeMap:n}=s.value;t.forEach(l=>{const a=n.get(l);e&&e.level===(a==null?void 0:a.level)&&t.delete(l)})}t.add(e.key),h(he,e.data,e)}function D(e){i.value.delete(e.key),h(ve,e.data,e)}function re(e){return i.value.has(e.key)}function le(e){return!!e.disabled}function T(e){const t=d.value;return t!==void 0&&t===e.key}function ue(){var e,t;if(d.value)return(t=(e=s.value)==null?void 0:e.treeNodeMap.get(d.value))==null?void 0:t.data}function se(){return d.value}function ce(e){d.value=e}function w(e){Ee(()=>s.value=V(e))}function O(e){var t;const n=pe(e)?K(e):e;return(t=s.value)==null?void 0:t.treeNodeMap.get(n)}function ie(e,t="auto"){const n=O(e);n&&k.value&&k.value.scrollToItem(p.value.indexOf(n),t)}function de(e){var t;(t=k.value)==null||t.scrollTo(e)}return{tree:s,flattenTree:p,isNotEmpty:Q,listRef:k,getKey:K,getChildren:x,toggleExpand:b,toggleCheckbox:C,isExpanded:re,isChecked:m,isIndeterminate:R,isDisabled:le,isCurrent:T,isForceHiddenExpandIcon:X,handleNodeClick:te,handleNodeDrop:ne,handleNodeCheck:oe,getCurrentNode:ue,getCurrentKey:se,setCurrentKey:ce,getCheckedKeys:A,getCheckedNodes:H,getHalfCheckedKeys:F,getHalfCheckedNodes:P,setChecked:j,setCheckedKeys:B,filter:W,setData:w,getNode:O,expandNode:_,collapseNode:D,setExpandedKeys:ee,scrollToNode:ie,scrollTo:de}}export{we as u};
