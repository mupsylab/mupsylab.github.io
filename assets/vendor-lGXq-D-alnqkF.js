import{a as g,w as D}from"./vendor-8F4M-BzORa8vA.js";import{E as oe}from"./vendor-pkf1-gHYU-KiM.js";import{E as G}from"./vendor-AQSj-DFJim-ok.js";import{k as ie,J as ce,p as me,K as de}from"./vendor-Fq1d-qefZ2EtI.js";import{i as fe,a as pe}from"./vendor-wJoH-BidoC45U.js";import{_ as be}from"./vendor-pM4a-CqGSI99y.js";import{v as H}from"./vendor-QmjE-CI3KpIRn.js";import{u as ve}from"./vendor-cebD-BGFhTQCu.js";import{u as Ve}from"./vendor-unoq-CFxLHdLI.js";import{u as Ne}from"./vendor-eqCW-DCj8_tuZ.js";import{i as b,a as I}from"./vendor-UUu6-BeUS1t8s.js";import{t as he,d as J}from"./vendor-0rdd-Cq9Fpw4b.js";import{u as we,a as ye}from"./vendor-hmuK-B6xHqdWm.js";import{U as V,I as K,C as ge}from"./vendor-lLeK-BB_Ol6Sd.js";import{n as M,c as Ie}from"./vendor-7avT-DhdrFwTb.js";import{i as Ee}from"./vendor-q6AE-BLgGtFJm.js";import{i as $}from"./vendor-16Vo-CHIgUVhi.js";import{d as X,c as N,w as _e,e as Ae,q as Ce,a as z,o as f,y as j,C as Q,z as T,r as E,h as _,f as A,A as Se}from"./vendor-RE7Z-DOm9JKld.js";import{r as ke,a as Fe,u as t}from"./vendor-eqDO-Ti6p_k8X.js";const Pe=X({name:"ElInputNumber"}),xe=X({...Pe,props:pe,emits:fe,setup(Y,{expose:Z,emit:i}){const a=Y,{t:B}=ve(),c=Ve("input-number"),d=ke(),l=Fe({currentValue:a.modelValue,userInput:null}),{formItem:p}=Ne(),U=N(()=>b(a.modelValue)&&a.modelValue<=a.min),L=N(()=>b(a.modelValue)&&a.modelValue>=a.max),ee=N(()=>{const e=R(a.step);return I(a.precision)?Math.max(R(a.modelValue),e):(e>a.precision,a.precision)}),C=N(()=>a.controls&&a.controlsPosition==="right"),O=we(),v=ye(),S=N(()=>{if(l.userInput!==null)return l.userInput;let e=l.currentValue;if($(e))return"";if(b(e)){if(Number.isNaN(e))return"";I(a.precision)||(e=e.toFixed(a.precision))}return e}),k=(e,r)=>{if(I(r)&&(r=ee.value),r===0)return Math.round(e);let n=String(e);const u=n.indexOf(".");if(u===-1||!n.replace(".","").split("")[u+r])return e;const w=n.length;return n.charAt(w-1)==="5"&&(n=`${n.slice(0,Math.max(0,w-1))}6`),Number.parseFloat(Number(n).toFixed(r))},R=e=>{if($(e))return 0;const r=e.toString(),n=r.indexOf(".");let u=0;return n!==-1&&(u=r.length-n-1),u},W=(e,r=1)=>b(e)?k(e+a.step*r):l.currentValue,F=()=>{if(a.readonly||v.value||L.value)return;const e=Number(S.value)||0,r=W(e);h(r),i(K,l.currentValue),x()},P=()=>{if(a.readonly||v.value||U.value)return;const e=Number(S.value)||0,r=W(e,-1);h(r),i(K,l.currentValue),x()},q=(e,r)=>{const{max:n,min:u,step:s,precision:m,stepStrictly:w,valueOnClear:y}=a;n<u&&he("InputNumber","min should not be greater than max.");let o=Number(e);if($(e)||Number.isNaN(o))return null;if(e===""){if(y===null)return null;o=Ie(y)?{min:u,max:n}[y]:y}return w&&(o=k(Math.round(o/s)*s,m),o!==e&&r&&i(V,o)),I(m)||(o=k(o,m)),(o>n||o<u)&&(o=o>n?n:u,r&&i(V,o)),o},h=(e,r=!0)=>{var n;const u=l.currentValue,s=q(e);if(!r){i(V,s);return}u===s&&e||(l.userInput=null,i(V,s),u!==s&&i(ge,s,u),a.validateEvent&&((n=p==null?void 0:p.validate)==null||n.call(p,"change").catch(m=>J())),l.currentValue=s)},re=e=>{l.userInput=e;const r=e===""?null:Number(e);i(K,r),h(r,!1)},ne=e=>{const r=e!==""?Number(e):"";(b(r)&&!Number.isNaN(r)||e==="")&&h(r),x(),l.userInput=null},te=()=>{var e,r;(r=(e=d.value)==null?void 0:e.focus)==null||r.call(e)},ae=()=>{var e,r;(r=(e=d.value)==null?void 0:e.blur)==null||r.call(e)},le=e=>{i("focus",e)},ue=e=>{var r,n;l.userInput=null,Ee()&&l.currentValue===null&&((r=d.value)!=null&&r.input)&&(d.value.input.value=""),i("blur",e),a.validateEvent&&((n=p==null?void 0:p.validate)==null||n.call(p,"blur").catch(u=>J()))},x=()=>{l.currentValue!==a.modelValue&&(l.currentValue=a.modelValue)},se=e=>{document.activeElement===e.target&&e.preventDefault()};return _e(()=>a.modelValue,(e,r)=>{const n=q(e,!0);l.userInput===null&&n!==r&&(l.currentValue=n)},{immediate:!0}),Ae(()=>{var e;const{min:r,max:n,modelValue:u}=a,s=(e=d.value)==null?void 0:e.input;if(s.setAttribute("role","spinbutton"),Number.isFinite(n)?s.setAttribute("aria-valuemax",String(n)):s.removeAttribute("aria-valuemax"),Number.isFinite(r)?s.setAttribute("aria-valuemin",String(r)):s.removeAttribute("aria-valuemin"),s.setAttribute("aria-valuenow",l.currentValue||l.currentValue===0?String(l.currentValue):""),s.setAttribute("aria-disabled",String(v.value)),!b(u)&&u!=null){let m=Number(u);Number.isNaN(m)&&(m=null),i(V,m)}s.addEventListener("wheel",se,{passive:!1})}),Ce(()=>{var e,r;const n=(e=d.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${(r=l.currentValue)!=null?r:""}`)}),Z({focus:te,blur:ae}),(e,r)=>(f(),z("div",{class:M([t(c).b(),t(c).m(t(O)),t(c).is("disabled",t(v)),t(c).is("without-controls",!e.controls),t(c).is("controls-right",t(C))]),onDragstart:D(()=>{},["prevent"])},[e.controls?j((f(),z("span",{key:0,role:"button","aria-label":t(B)("el.inputNumber.decrease"),class:M([t(c).e("decrease"),t(c).is("disabled",t(U))]),onKeydown:g(P,["enter"])},[E(e.$slots,"decrease-icon",{},()=>[T(t(G),null,{default:_(()=>[t(C)?(f(),A(t(ie),{key:0})):(f(),A(t(ce),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[t(H),P]]):Q("v-if",!0),e.controls?j((f(),z("span",{key:1,role:"button","aria-label":t(B)("el.inputNumber.increase"),class:M([t(c).e("increase"),t(c).is("disabled",t(L))]),onKeydown:g(F,["enter"])},[E(e.$slots,"increase-icon",{},()=>[T(t(G),null,{default:_(()=>[t(C)?(f(),A(t(me),{key:0})):(f(),A(t(de),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[t(H),F]]):Q("v-if",!0),T(t(oe),{id:e.id,ref_key:"input",ref:d,type:"number",step:e.step,"model-value":t(S),placeholder:e.placeholder,readonly:e.readonly,disabled:t(v),size:t(O),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,onKeydown:[g(D(F,["prevent"]),["up"]),g(D(P,["prevent"]),["down"])],onBlur:ue,onFocus:le,onInput:re,onChange:ne},Se({_:2},[e.$slots.prefix?{name:"prefix",fn:_(()=>[E(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:_(()=>[E(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var Ye=be(xe,[["__file","input-number.vue"]]);export{Ye as I};
