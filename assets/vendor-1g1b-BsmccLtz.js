import{a as ft}from"./vendor-5WKb-KWd2YoVw.js";import{u as ut}from"./vendor-BriW-Dd3dX5nx.js";import{u as dt}from"./vendor-Xq2Z-cfMF-_ml.js";import{S as mt}from"./vendor-sUkH-CZLa4RLZ.js";import{i as ht,g as J,a as U}from"./vendor-E0E3-vedrsmtS.js";import{v as St}from"./vendor-CGpD-CGzusPM6.js";import{I as Q,S as X,B as vt,F as gt,H as wt,R as G,a as Ot,b as Y,A as yt,c as Tt}from"./vendor-SBXC-DnSHQime.js";import{u as Rt}from"./vendor-unoq-CFxLHdLI.js";import{i as $}from"./vendor-UUu6-BeUS1t8s.js";import{c as p,h as Et}from"./vendor-7avT-DhdrFwTb.js";import{d as bt,i as tt,n as _,F as Lt,g as Mt,c as m,e as _t,q as xt,s as zt,t as N}from"./vendor-RE7Z-DOm9JKld.js";import{r as x,u as o}from"./vendor-eqDO-Ti6p_k8X.js";import{i as It}from"./vendor-k87t-DYFOtHqs.js";const Ut=({name:K,getOffset:et,getItemSize:lt,getItemOffset:st,getEstimatedTotalSize:ot,getStartIndexForOffset:nt,getStopIndexForStartIndex:at,initCache:rt,clearCache:W,validateProps:ct})=>bt({name:K??"ElVirtualList",props:St,emits:[Q,X],setup(e,{emit:y,expose:z}){ct(e);const H=Mt(),T=Rt("vl"),h=x(rt(e,H)),R=ut(),f=x(),I=x(),A=x(),a=x({isScrolling:!1,scrollDir:"forward",scrollOffset:$(e.initScrollOffset)?e.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:e.scrollbarAlwaysOn}),C=m(()=>{const{total:t,cache:l}=e,{isScrolling:s,scrollDir:i,scrollOffset:n}=o(a);if(t===0)return[0,0,0,0];const r=nt(e,n,o(h)),c=at(e,r,n,o(h)),w=!s||i===vt?Math.max(1,l):1,O=!s||i===gt?Math.max(1,l):1;return[Math.max(0,r-w),Math.max(0,Math.min(t-1,c+O)),r,c]}),u=m(()=>ot(e,o(h))),S=m(()=>ht(e.layout)),q=m(()=>[{position:"relative",[`overflow-${S.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:e.direction,height:$(e.height)?`${e.height}px`:e.height,width:$(e.width)?`${e.width}px`:e.width},e.style]),E=m(()=>{const t=o(u),l=o(S);return{height:l?"100%":`${t}px`,pointerEvents:o(a).isScrolling?"none":void 0,width:l?`${t}px`:"100%"}}),g=m(()=>S.value?e.width:e.height),{onWheel:D}=dt({atStartEdge:m(()=>a.value.scrollOffset<=0),atEndEdge:m(()=>a.value.scrollOffset>=u.value),layout:m(()=>e.layout)},t=>{var l,s;(s=(l=A.value).onMouseUp)==null||s.call(l),d(Math.min(a.value.scrollOffset+t,u.value-g.value))});ft(f,"wheel",D,{passive:!1});const b=()=>{const{total:t}=e;if(t>0){const[n,r,c,w]=o(C);y(Q,n,r,c,w)}const{scrollDir:l,scrollOffset:s,updateRequested:i}=o(a);y(X,l,s,i)},B=t=>{const{clientHeight:l,scrollHeight:s,scrollTop:i}=t.currentTarget,n=o(a);if(n.scrollOffset===i)return;const r=Math.max(0,Math.min(i,s-l));a.value={...n,isScrolling:!0,scrollDir:U(n.scrollOffset,r),scrollOffset:r,updateRequested:!1},N(M)},V=t=>{const{clientWidth:l,scrollLeft:s,scrollWidth:i}=t.currentTarget,n=o(a);if(n.scrollOffset===s)return;const{direction:r}=e;let c=s;if(r===G)switch(J()){case Y:{c=-s;break}case Tt:{c=i-l-s;break}}c=Math.max(0,Math.min(c,i-l)),a.value={...n,isScrolling:!0,scrollDir:U(n.scrollOffset,c),scrollOffset:c,updateRequested:!1},N(M)},F=t=>{o(S)?V(t):B(t),b()},k=(t,l)=>{const s=(u.value-g.value)/l*t;d(Math.min(u.value-g.value,s))},d=t=>{t=Math.max(t,0),t!==o(a).scrollOffset&&(a.value={...o(a),scrollOffset:t,scrollDir:U(o(a).scrollOffset,t),updateRequested:!0},N(M))},L=(t,l=yt)=>{const{scrollOffset:s}=o(a);t=Math.max(0,Math.min(t,e.total-1)),d(et(e,t,l,s,o(h)))},P=t=>{const{direction:l,itemSize:s,layout:i}=e,n=R.value(W&&s,W&&i,W&&l);let r;if(Et(n,String(t)))r=n[t];else{const c=st(e,t,o(h)),w=lt(e,t,o(h)),O=o(S),Z=l===G,j=O?c:0;n[t]=r={position:"absolute",left:Z?void 0:`${j}px`,right:Z?`${j}px`:void 0,top:O?0:`${c}px`,height:O?"100%":`${w}px`,width:O?`${w}px`:"100%"}}return r},M=()=>{a.value.isScrolling=!1,N(()=>{R.value(-1,null,null)})},v=()=>{const t=f.value;t&&(t.scrollTop=0)};_t(()=>{if(!It)return;const{initScrollOffset:t}=e,l=o(f);$(t)&&l&&(o(S)?l.scrollLeft=t:l.scrollTop=t),b()}),xt(()=>{const{direction:t,layout:l}=e,{scrollOffset:s,updateRequested:i}=o(a),n=o(f);if(i&&n)if(l===wt)if(t===G)switch(J()){case Y:{n.scrollLeft=-s;break}case Ot:{n.scrollLeft=s;break}default:{const{clientWidth:r,scrollWidth:c}=n;n.scrollLeft=c-r-s;break}}else n.scrollLeft=s;else n.scrollTop=s}),zt(()=>{o(f).scrollTop=o(a).scrollOffset});const it={ns:T,clientSize:g,estimatedTotalSize:u,windowStyle:q,windowRef:f,innerRef:I,innerStyle:E,itemsToRender:C,scrollbarRef:A,states:a,getItemStyle:P,onScroll:F,onScrollbarScroll:k,onWheel:D,scrollTo:d,scrollToItem:L,resetScrollTop:v};return z({windowRef:f,innerRef:I,getItemStyleCache:R,scrollTo:d,scrollToItem:L,resetScrollTop:v,states:a}),it},render(e){var y;const{$slots:z,className:H,clientSize:T,containerElement:h,data:R,getItemStyle:f,innerElement:I,itemsToRender:A,innerStyle:a,layout:C,total:u,onScroll:S,onScrollbarScroll:q,states:E,useIsScrolling:g,windowStyle:D,ns:b}=e,[B,V]=A,F=tt(h),k=tt(I),d=[];if(u>0)for(let v=B;v<=V;v++)d.push(_(Lt,{key:v},(y=z.default)==null?void 0:y.call(z,{data:R,index:v,isScrolling:g?E.isScrolling:void 0,style:f(v)})));const L=[_(k,{style:a,ref:"innerRef"},p(k)?d:{default:()=>d})],P=_(mt,{ref:"scrollbarRef",clientSize:T,layout:C,onScroll:q,ratio:T*100/this.estimatedTotalSize,scrollFrom:E.scrollOffset/(this.estimatedTotalSize-T),total:u}),M=_(F,{class:[b.e("window"),H],style:D,onScroll:S,ref:"windowRef",key:0},p(F)?[L]:{default:()=>[L]});return _("div",{key:0,class:[b.e("wrapper"),E.scrollbarAlwaysOn?"always-on":""]},[M,P])}});export{Ut as c};
