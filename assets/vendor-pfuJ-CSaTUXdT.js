import{a as It}from"./vendor-5WKb-KWd2YoVw.js";import{S as Q}from"./vendor-sUkH-CZLa4RLZ.js";import{u as Wt}from"./vendor-0wuh-HppxV_p3.js";import{u as Dt}from"./vendor-BriW-Dd3dX5nx.js";import{b as Ft}from"./vendor-CGpD-CGzusPM6.js";import{a as C,g as Z,b as j}from"./vendor-E0E3-vedrsmtS.js";import{I as p,S as tt,F as A,B as et,A as Ot,R as $t,a as kt,b as lt,c as Gt}from"./vendor-SBXC-DnSHQime.js";import{u as Nt}from"./vendor-unoq-CFxLHdLI.js";import{i as T}from"./vendor-UUu6-BeUS1t8s.js";import{g as zt}from"./vendor-HWBx-H0iAIG7V.js";import{c as ot,h as Vt}from"./vendor-7avT-DhdrFwTb.js";import{d as Bt,g as Ht,c as m,e as qt,t as $,i as nt,n as L,F as Ut}from"./vendor-RE7Z-DOm9JKld.js";import{r as b,u as n}from"./vendor-eqDO-Ti6p_k8X.js";import{i as Kt}from"./vendor-k87t-DYFOtHqs.js";const ae=({name:k,clearCache:I,getColumnPosition:G,getColumnStartIndexForOffset:rt,getColumnStopIndexForStartIndex:ct,getEstimatedTotalHeight:N,getEstimatedTotalWidth:z,getColumnOffset:at,getRowOffset:st,getRowPosition:it,getRowStartIndexForOffset:ht,getRowStopIndexForStartIndex:ut,initCache:dt,injectToInstance:V,validateProps:mt})=>Bt({name:k??"ElVirtualList",props:Ft,emits:[p,tt],setup(l,{emit:B,expose:ft,slots:H}){const R=Nt("vl");mt(l);const W=Ht(),v=b(dt(l,W));V==null||V(W,v);const E=b(),q=b(),U=b(),K=b(null),h=b({isScrolling:!1,scrollLeft:T(l.initScrollLeft)?l.initScrollLeft:0,scrollTop:T(l.initScrollTop)?l.initScrollTop:0,updateRequested:!1,xAxisScrollDir:A,yAxisScrollDir:A}),D=Dt(),y=m(()=>Number.parseInt(`${l.height}`,10)),_=m(()=>Number.parseInt(`${l.width}`,10)),P=m(()=>{const{totalColumn:t,totalRow:e,columnCache:o}=l,{isScrolling:a,xAxisScrollDir:r,scrollLeft:c}=n(h);if(t===0||e===0)return[0,0,0,0];const s=rt(l,c,n(v)),i=ct(l,s,c,n(v)),u=!a||r===et?Math.max(1,o):1,d=!a||r===A?Math.max(1,o):1;return[Math.max(0,s-u),Math.max(0,Math.min(t-1,i+d)),s,i]}),X=m(()=>{const{totalColumn:t,totalRow:e,rowCache:o}=l,{isScrolling:a,yAxisScrollDir:r,scrollTop:c}=n(h);if(t===0||e===0)return[0,0,0,0];const s=ht(l,c,n(v)),i=ut(l,s,c,n(v)),u=!a||r===et?Math.max(1,o):1,d=!a||r===A?Math.max(1,o):1;return[Math.max(0,s-u),Math.max(0,Math.min(e-1,i+d)),s,i]}),x=m(()=>N(l,n(v))),g=m(()=>z(l,n(v))),St=m(()=>{var t;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:l.direction,height:T(l.height)?`${l.height}px`:l.height,width:T(l.width)?`${l.width}px`:l.width},(t=l.style)!=null?t:{}]}),vt=m(()=>{const t=`${n(g)}px`;return{height:`${n(x)}px`,pointerEvents:n(h).isScrolling?"none":void 0,width:t}}),F=()=>{const{totalColumn:t,totalRow:e}=l;if(t>0&&e>0){const[i,u,d,w]=n(P),[f,S,O,At]=n(X);B(p,{columnCacheStart:i,columnCacheEnd:u,rowCacheStart:f,rowCacheEnd:S,columnVisibleStart:d,columnVisibleEnd:w,rowVisibleStart:O,rowVisibleEnd:At})}const{scrollLeft:o,scrollTop:a,updateRequested:r,xAxisScrollDir:c,yAxisScrollDir:s}=n(h);B(tt,{xAxisScrollDir:c,scrollLeft:o,yAxisScrollDir:s,scrollTop:a,updateRequested:r})},wt=t=>{const{clientHeight:e,clientWidth:o,scrollHeight:a,scrollLeft:r,scrollTop:c,scrollWidth:s}=t.currentTarget,i=n(h);if(i.scrollTop===c&&i.scrollLeft===r)return;let u=r;if(j(l.direction))switch(Z()){case lt:u=-r;break;case Gt:u=s-o-r;break}h.value={...i,isScrolling:!0,scrollLeft:u,scrollTop:Math.max(0,Math.min(c,a-e)),updateRequested:!0,xAxisScrollDir:C(i.scrollLeft,u),yAxisScrollDir:C(i.scrollTop,c)},$(()=>Y()),J(),F()},xt=(t,e)=>{const o=n(y),a=(x.value-o)/e*t;M({scrollTop:Math.min(x.value-o,a)})},gt=(t,e)=>{const o=n(_),a=(g.value-o)/e*t;M({scrollLeft:Math.min(g.value-o,a)})},{onWheel:Tt}=Wt({atXStartEdge:m(()=>h.value.scrollLeft<=0),atXEndEdge:m(()=>h.value.scrollLeft>=g.value-n(_)),atYStartEdge:m(()=>h.value.scrollTop<=0),atYEndEdge:m(()=>h.value.scrollTop>=x.value-n(y))},(t,e)=>{var o,a,r,c;(a=(o=q.value)==null?void 0:o.onMouseUp)==null||a.call(o),(c=(r=U.value)==null?void 0:r.onMouseUp)==null||c.call(r);const s=n(_),i=n(y);M({scrollLeft:Math.min(h.value.scrollLeft+t,g.value-s),scrollTop:Math.min(h.value.scrollTop+e,x.value-i)})});It(E,"wheel",Tt,{passive:!1});const M=({scrollLeft:t=h.value.scrollLeft,scrollTop:e=h.value.scrollTop})=>{t=Math.max(t,0),e=Math.max(e,0);const o=n(h);e===o.scrollTop&&t===o.scrollLeft||(h.value={...o,xAxisScrollDir:C(o.scrollLeft,t),yAxisScrollDir:C(o.scrollTop,e),scrollLeft:t,scrollTop:e,updateRequested:!0},$(()=>Y()),J(),F())},Lt=(t=0,e=0,o=Ot)=>{const a=n(h);e=Math.max(0,Math.min(e,l.totalColumn-1)),t=Math.max(0,Math.min(t,l.totalRow-1));const r=zt(R.namespace.value),c=n(v),s=N(l,c),i=z(l,c);M({scrollLeft:at(l,e,o,a.scrollLeft,c,i>l.width?r:0),scrollTop:st(l,t,o,a.scrollTop,c,s>l.height?r:0)})},bt=(t,e)=>{const{columnWidth:o,direction:a,rowHeight:r}=l,c=D.value(I&&o,I&&r,I&&a),s=`${t},${e}`;if(Vt(c,s))return c[s];{const[,i]=G(l,e,n(v)),u=n(v),d=j(a),[w,f]=it(l,t,u),[S]=G(l,e,u);return c[s]={position:"absolute",left:d?void 0:`${i}px`,right:d?`${i}px`:void 0,top:`${f}px`,height:`${w}px`,width:`${S}px`},c[s]}},Y=()=>{h.value.isScrolling=!1,$(()=>{D.value(-1,null,null)})};qt(()=>{if(!Kt)return;const{initScrollLeft:t,initScrollTop:e}=l,o=n(E);o&&(T(t)&&(o.scrollLeft=t),T(e)&&(o.scrollTop=e)),F()});const J=()=>{const{direction:t}=l,{scrollLeft:e,scrollTop:o,updateRequested:a}=n(h),r=n(E);if(a&&r){if(t===$t)switch(Z()){case lt:{r.scrollLeft=-e;break}case kt:{r.scrollLeft=e;break}default:{const{clientWidth:c,scrollWidth:s}=r;r.scrollLeft=s-c-e;break}}else r.scrollLeft=Math.max(0,e);r.scrollTop=Math.max(0,o)}},{resetAfterColumnIndex:Et,resetAfterRowIndex:Mt,resetAfter:Rt}=W.proxy;ft({windowRef:E,innerRef:K,getItemStyleCache:D,scrollTo:M,scrollToItem:Lt,states:h,resetAfterColumnIndex:Et,resetAfterRowIndex:Mt,resetAfter:Rt});const yt=()=>{const{scrollbarAlwaysOn:t,scrollbarStartGap:e,scrollbarEndGap:o,totalColumn:a,totalRow:r}=l,c=n(_),s=n(y),i=n(g),u=n(x),{scrollLeft:d,scrollTop:w}=n(h),f=L(Q,{ref:q,alwaysOn:t,startGap:e,endGap:o,class:R.e("horizontal"),clientSize:c,layout:"horizontal",onScroll:gt,ratio:c*100/i,scrollFrom:d/(i-c),total:r,visible:!0}),S=L(Q,{ref:U,alwaysOn:t,startGap:e,endGap:o,class:R.e("vertical"),clientSize:s,layout:"vertical",onScroll:xt,ratio:s*100/u,scrollFrom:w/(u-s),total:a,visible:!0});return{horizontalScrollbar:f,verticalScrollbar:S}},_t=()=>{var t;const[e,o]=n(P),[a,r]=n(X),{data:c,totalColumn:s,totalRow:i,useIsScrolling:u,itemKey:d}=l,w=[];if(i>0&&s>0)for(let f=a;f<=r;f++)for(let S=e;S<=o;S++){const O=d({columnIndex:S,data:c,rowIndex:f});w.push(L(Ut,{key:O},(t=H.default)==null?void 0:t.call(H,{columnIndex:S,data:c,isScrolling:u?n(h).isScrolling:void 0,style:bt(f,S),rowIndex:f})))}return w},Ct=()=>{const t=nt(l.innerElement),e=_t();return[L(t,{style:n(vt),ref:K},ot(t)?e:{default:()=>e})]};return()=>{const t=nt(l.containerElement),{horizontalScrollbar:e,verticalScrollbar:o}=yt(),a=Ct();return L("div",{key:0,class:R.e("wrapper"),role:l.role},[L(t,{class:l.className,style:n(St),onScroll:wt,ref:E},ot(t)?a:{default:()=>a}),e,o])}}});export{ae as c};
