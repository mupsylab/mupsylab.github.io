import{o as S,f as $,s as b,a as B,b as C,d as M,c as P}from"./vendor-18dF-DYV3Ipb1.js";import{i as T,c as z,d as D}from"./vendor-7avT-DhdrFwTb.js";import{k as H}from"./vendor-X8P5-CF3LkWx9.js";import{r as E,u as e}from"./vendor-eqDO-Ti6p_k8X.js";import{e as O,w as R,j as _,c as x,m as F}from"./vendor-RE7Z-DOm9JKld.js";import{i as L}from"./vendor-k87t-DYFOtHqs.js";const Y=(o,l,i,c,f)=>{const r=E(null),v=()=>{let n;return z(o.value)?n=document.querySelector(o.value):D(o.value)?n=o.value():n=o.value,n},m=()=>{const n=v();if(!n||!l.value){r.value=null;return}U(n)||n.scrollIntoView(f.value);const{left:a,top:s,width:d,height:h}=n.getBoundingClientRect();r.value={left:a,top:s,width:d,height:h,radius:0}};O(()=>{R([l,o],()=>{m()},{immediate:!0}),window.addEventListener("resize",m)}),_(()=>{window.removeEventListener("resize",m)});const w=n=>{var a;return(a=T(i.value.offset)?i.value.offset[n]:i.value.offset)!=null?a:6},u=x(()=>{var n;if(!r.value)return r.value;const a=w(0),s=w(1),d=((n=i.value)==null?void 0:n.radius)||2;return{left:r.value.left-a,top:r.value.top-s,width:r.value.width+a*2,height:r.value.height+s*2,radius:d}}),p=x(()=>{const n=v();return!c.value||!n||!window.DOMRect?n||void 0:{getBoundingClientRect(){var a,s,d,h;return window.DOMRect.fromRect({width:((a=u.value)==null?void 0:a.width)||0,height:((s=u.value)==null?void 0:s.height)||0,x:((d=u.value)==null?void 0:d.left)||0,y:((h=u.value)==null?void 0:h.top)||0})}}});return{mergedPosInfo:u,triggerTarget:p}},A=Symbol("ElTour");function U(o){const l=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,{top:c,right:f,bottom:r,left:v}=o.getBoundingClientRect();return c>=0&&v>=0&&f<=l&&r<=i}const J=(o,l,i,c,f,r,v,m)=>{const w=E(),u=E(),p=E({}),n={x:w,y:u,placement:c,strategy:f,middlewareData:p},a=x(()=>{const t=[S(e(r)),$(),b(),V()];return e(m)&&e(i)&&t.push(B({element:e(i)})),t}),s=async()=>{if(!L)return;const t=e(o),g=e(l);if(!t||!g)return;const I=await P(t,g,{placement:e(c),strategy:e(f),middleware:e(a)});H(n).forEach(W=>{n[W].value=I[W]})},d=x(()=>{if(!e(o))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:e(v)};const{overflow:t}=e(p);return{position:e(f),zIndex:e(v),top:e(u)!=null?`${e(u)}px`:"",left:e(w)!=null?`${e(w)}px`:"",maxWidth:t!=null&&t.maxWidth?`${t==null?void 0:t.maxWidth}px`:""}}),h=x(()=>{if(!e(m))return{};const{arrow:t}=e(p);return{left:(t==null?void 0:t.x)!=null?`${t==null?void 0:t.x}px`:"",top:(t==null?void 0:t.y)!=null?`${t==null?void 0:t.y}px`:""}});let y;return O(()=>{const t=e(o),g=e(l);t&&g&&(y=C(t,g,s)),F(()=>{s()})}),_(()=>{y&&y()}),{update:s,contentStyle:d,arrowStyle:h}},V=()=>({name:"overflow",async fn(o){const l=await M(o);let i=0;return l.left>0&&(i=l.left),l.right>0&&(i=l.right),{data:{maxWidth:o.rects.floating.width-i}}}});export{Y as a,A as t,J as u};
