import{S as E,N as I,a as O}from"./vendor-ykdH-CZ0IrpdW.js";import{r as w}from"./vendor-eqDO-Ti6p_k8X.js";import{g as G,w as j,t as S}from"./vendor-RE7Z-DOm9JKld.js";function F(l,a){const u=w(new Set),k=w(new Set),{emit:K}=G();j([()=>a.value,()=>l.defaultCheckedKeys],()=>S(()=>{N(l.defaultCheckedKeys)}),{immediate:!0});const r=()=>{if(!a.value||!l.showCheckbox||l.checkStrictly)return;const{levelTreeNodeMap:e,maxLevel:t}=a.value,c=u.value,s=new Set;for(let n=t-1;n>=1;--n){const o=e.get(n);o&&o.forEach(d=>{const i=d.children;if(i){let h=!0,f=!1;for(const A of i){const m=A.key;if(c.has(m))f=!0;else if(s.has(m)){h=!1,f=!0;break}else h=!1}h?c.add(d.key):f?(s.add(d.key),c.delete(d.key)):(c.delete(d.key),s.delete(d.key))}})}k.value=s},g=e=>u.value.has(e.key),x=e=>k.value.has(e.key),C=(e,t,c=!0,s=!0)=>{const n=u.value,o=(d,i)=>{n[i?E.ADD:E.DELETE](d.key);const h=d.children;!l.checkStrictly&&h&&h.forEach(f=>{f.disabled||o(f,i)})};o(e,t),s&&r(),c&&b(e,t)},b=(e,t)=>{const{checkedNodes:c,checkedKeys:s}=y(),{halfCheckedNodes:n,halfCheckedKeys:o}=v();K(I,e.data,{checkedKeys:s,checkedNodes:c,halfCheckedKeys:o,halfCheckedNodes:n}),K(O,e.data,t)};function H(e=!1){return y(e).checkedKeys}function D(e=!1){return y(e).checkedNodes}function M(){return v().halfCheckedKeys}function _(){return v().halfCheckedNodes}function y(e=!1){const t=[],c=[];if(a!=null&&a.value&&l.showCheckbox){const{treeNodeMap:s}=a.value;u.value.forEach(n=>{const o=s.get(n);o&&(!e||e&&o.isLeaf)&&(c.push(n),t.push(o.data))})}return{checkedKeys:c,checkedNodes:t}}function v(){const e=[],t=[];if(a!=null&&a.value&&l.showCheckbox){const{treeNodeMap:c}=a.value;k.value.forEach(s=>{const n=c.get(s);n&&(t.push(s),e.push(n.data))})}return{halfCheckedNodes:e,halfCheckedKeys:t}}function L(e){u.value.clear(),k.value.clear(),S(()=>{N(e)})}function T(e,t){if(a!=null&&a.value&&l.showCheckbox){const c=a.value.treeNodeMap.get(e);c&&C(c,t,!1)}}function N(e){if(a!=null&&a.value){const{treeNodeMap:t}=a.value;if(l.showCheckbox&&t&&(e==null?void 0:e.length)>0){for(const c of e){const s=t.get(c);s&&!g(s)&&C(s,!0,!1,!1)}r()}}}return{updateCheckedKeys:r,toggleCheckbox:C,isChecked:g,isIndeterminate:x,getCheckedKeys:H,getCheckedNodes:D,getHalfCheckedKeys:M,getHalfCheckedNodes:_,setChecked:T,setCheckedKeys:L}}export{F as u};
