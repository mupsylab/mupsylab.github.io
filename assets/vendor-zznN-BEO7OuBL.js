import{b as T,w as z}from"./vendor-8F4M-BzORa8vA.js";import{E as F}from"./vendor-MxHc-DHRJLLZd.js";import{m as q,a as A}from"./vendor-fbQy-DHVgIO98.js";import{_ as P}from"./vendor-pM4a-CqGSI99y.js";import{u as j}from"./vendor-unoq-CFxLHdLI.js";import{u as G}from"./vendor-cebD-BGFhTQCu.js";import{s as J}from"./vendor-HWBx-H0iAIG7V.js";import{d as C,c as _,w as K,a as d,o as p,C as b,y as Q,r as c,z as U,h as W,F as X,D as Y,b as Z,E as x,t as ee}from"./vendor-RE7Z-DOm9JKld.js";import{r as f,u as t}from"./vendor-eqDO-Ti6p_k8X.js";import{n as u,t as D}from"./vendor-7avT-DhdrFwTb.js";const oe=C({name:"ElMentionDropdown"}),se=C({...oe,props:A,emits:q,setup(I,{expose:S,emit:w}){const n=I,a=j("mention"),{t:M}=G(),o=f(-1),h=f(),g=f(),k=f(),R=(e,l)=>[a.be("dropdown","item"),a.is("hovering",o.value===l),a.is("disabled",e.disabled||n.disabled)],N=e=>{e.disabled||n.disabled||w("select",e)},V=e=>{o.value=e},y=_(()=>n.disabled||n.options.every(e=>e.disabled)),m=_(()=>n.options[o.value]),O=()=>{m.value&&w("select",m.value)},$=e=>{const{options:l}=n;if(l.length===0||y.value)return;e==="next"?(o.value++,o.value===l.length&&(o.value=0)):e==="prev"&&(o.value--,o.value<0&&(o.value=l.length-1));const s=l[o.value];if(s.disabled){$(e);return}ee(()=>B(s))},B=e=>{var l,s,r,i;const{options:H}=n,L=H.findIndex(v=>v.value===e.value),E=(l=g.value)==null?void 0:l[L];if(E){const v=(r=(s=k.value)==null?void 0:s.querySelector)==null?void 0:r.call(s,`.${a.be("dropdown","wrap")}`);v&&J(v,E)}(i=h.value)==null||i.handleScroll()};return K(()=>n.options,()=>{y.value||n.options.length===0?o.value=-1:o.value=0},{immediate:!0}),S({hoveringIndex:o,navigateOptions:$,selectHoverOption:O,hoverOption:m}),(e,l)=>(p(),d("div",{ref_key:"dropdownRef",ref:k,class:u(t(a).b("dropdown"))},[e.$slots.header?(p(),d("div",{key:0,class:u(t(a).be("dropdown","header"))},[c(e.$slots,"header")],2)):b("v-if",!0),Q(U(t(F),{id:e.contentId,ref_key:"scrollbarRef",ref:h,tag:"ul","wrap-class":t(a).be("dropdown","wrap"),"view-class":t(a).be("dropdown","list"),role:"listbox","aria-label":e.ariaLabel,"aria-orientation":"vertical"},{default:W(()=>[(p(!0),d(X,null,Y(e.options,(s,r)=>(p(),d("li",{id:`${e.contentId}-${r}`,ref_for:!0,ref_key:"optionRefs",ref:g,key:r,class:u(R(s,r)),role:"option","aria-disabled":s.disabled||e.disabled||void 0,"aria-selected":o.value===r,onMousemove:i=>V(r),onClick:z(i=>N(s),["stop"])},[c(e.$slots,"label",{item:s,index:r},()=>{var i;return[Z("span",null,D((i=s.label)!=null?i:s.value),1)]})],42,["id","aria-disabled","aria-selected","onMousemove","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class","aria-label"]),[[T,e.options.length>0&&!e.loading]]),e.loading?(p(),d("div",{key:1,class:u(t(a).be("dropdown","loading"))},[c(e.$slots,"loading",{},()=>[x(D(t(M)("el.mention.loading")),1)])],2)):b("v-if",!0),e.$slots.footer?(p(),d("div",{key:2,class:u(t(a).be("dropdown","footer"))},[c(e.$slots,"footer")],2)):b("v-if",!0)],2))}});var fe=P(se,[["__file","mention-dropdown.vue"]]);export{fe as E};
