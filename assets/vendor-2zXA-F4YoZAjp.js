import{b as L,w as s}from"./vendor-8F4M-BzORa8vA.js";import{E as P}from"./vendor-AOIz-Bx1mEe3u.js";import{E as V}from"./vendor-CO0n-CZ7yfaio.js";import{E as j}from"./vendor-AQSj-DFJim-ok.js";import{l as H,d as q}from"./vendor-Fq1d-qefZ2EtI.js";import{N as G}from"./vendor-SOjO-NBF1ts1u.js";import{g as J,h as Q}from"./vendor-RODT-CrxIlgye.js";import{u as U}from"./vendor-w6ry-D33Z4WlJ.js";import{d as W}from"./vendor-1esc-CwBhTk4T.js";import{N as X}from"./vendor-YNJc-BV066b5N.js";import{_ as Y}from"./vendor-pM4a-CqGSI99y.js";import{u as Z}from"./vendor-unoq-CFxLHdLI.js";import{n as f,a as x,d as _,c as ee}from"./vendor-7avT-DhdrFwTb.js";import{d as ne,v as i,y as R,a as D,o as r,b as oe,z as E,f as m,C as N,h as K,i as de,F as ae,D as re,l as F,w as g,t as T,g as te,p as se}from"./vendor-RE7Z-DOm9JKld.js";import{r as C}from"./vendor-eqDO-Ti6p_k8X.js";const le=ne({name:"ElTreeNode",components:{ElCollapseTransition:P,ElCheckbox:V,NodeContent:G,ElIcon:j,Loading:H},props:{node:{type:X,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,w){const S=Z("tree"),{broadcastExpanded:B}=U(e),o=F("RootTree"),c=C(!1),l=C(!1),h=C(),u=C(),k=C(),p=F(W),t=te();se("NodeInstance",t),e.node.expanded&&(c.value=!0,l.value=!0);const v=o.props.props.children||"children";g(()=>{var n;const d=(n=e.node.data)==null?void 0:n[v];return d&&[...d]},()=>{e.node.updateChildren()}),g(()=>e.node.indeterminate,n=>{b(e.node.checked,n)}),g(()=>e.node.checked,n=>{b(n,e.node.indeterminate)}),g(()=>e.node.childNodes.length,()=>e.node.reInitChecked()),g(()=>e.node.expanded,n=>{T(()=>c.value=n),n&&(l.value=!0)});const $=n=>J(o.props.nodeKey,n.data),z=n=>{const d=e.props.class;if(!d)return{};let a;if(_(d)){const{data:y}=n;a=d(y,n)}else a=d;return ee(a)?{[a]:!0}:a},b=(n,d)=>{(h.value!==n||u.value!==d)&&o.ctx.emit("check-change",e.node.data,n,d),h.value=n,u.value=d},A=n=>{Q(o.store,o.ctx.emit,()=>{var d;if((d=o==null?void 0:o.props)==null?void 0:d.nodeKey){const y=$(e.node);o.store.value.setCurrentNodeKey(y)}else o.store.value.setCurrentNode(e.node)}),o.currentNode.value=e.node,o.props.expandOnClickNode&&I(),o.props.checkOnClickNode&&!e.node.disabled&&O(!e.node.checked),o.ctx.emit("node-click",e.node.data,e.node,t,n)},M=n=>{var d;(d=o.instance.vnode.props)!=null&&d.onNodeContextmenu&&(n.stopPropagation(),n.preventDefault()),o.ctx.emit("node-contextmenu",n,e.node.data,e.node,t)},I=()=>{e.node.isLeaf||(c.value?(o.ctx.emit("node-collapse",e.node.data,e.node,t),e.node.collapse()):e.node.expand(()=>{w.emit("node-expand",e.node.data,e.node,t)}))},O=n=>{e.node.setChecked(n,!(o!=null&&o.props.checkStrictly)),T(()=>{const d=o.store.value;o.ctx.emit("check",e.node.data,{checkedNodes:d.getCheckedNodes(),checkedKeys:d.getCheckedKeys(),halfCheckedNodes:d.getHalfCheckedNodes(),halfCheckedKeys:d.getHalfCheckedKeys()})})};return{ns:S,node$:k,tree:o,expanded:c,childNodeRendered:l,oldChecked:h,oldIndeterminate:u,getNodeKey:$,getNodeClass:z,handleSelectChange:b,handleClick:A,handleContextMenu:M,handleExpandIconClick:I,handleCheckChange:O,handleChildNodeExpand:(n,d,a)=>{B(d),o.ctx.emit("node-expand",n,d,a)},handleDragStart:n=>{o.props.draggable&&p.treeNodeDragStart({event:n,treeNode:e})},handleDragOver:n=>{n.preventDefault(),o.props.draggable&&p.treeNodeDragOver({event:n,treeNode:{$el:k.value,node:e.node}})},handleDrop:n=>{n.preventDefault()},handleDragEnd:n=>{o.props.draggable&&p.treeNodeDragEnd(n)},CaretRight:q}}});function ie(e,w,S,B,o,c){const l=i("el-icon"),h=i("el-checkbox"),u=i("loading"),k=i("node-content"),p=i("el-tree-node"),t=i("el-collapse-transition");return R((r(),D("div",{ref:"node$",class:f([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:s(e.handleClick,["stop"]),onContextmenu:e.handleContextMenu,onDragstart:s(e.handleDragStart,["stop"]),onDragover:s(e.handleDragOver,["stop"]),onDragend:s(e.handleDragEnd,["stop"]),onDrop:s(e.handleDrop,["stop"])},[oe("div",{class:f(e.ns.be("node","content")),style:x({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(r(),m(l,{key:0,class:f([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:s(e.handleExpandIconClick,["stop"])},{default:K(()=>[(r(),m(de(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):N("v-if",!0),e.showCheckbox?(r(),m(h,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:s(()=>{},["stop"]),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):N("v-if",!0),e.node.loading?(r(),m(l,{key:2,class:f([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:K(()=>[E(u)]),_:1},8,["class"])):N("v-if",!0),E(k,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),E(t,null,{default:K(()=>[!e.renderAfterExpand||e.childNodeRendered?R((r(),D("div",{key:0,class:f(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[(r(!0),D(ae,null,re(e.node.childNodes,v=>(r(),m(p,{key:e.getNodeKey(v),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:v,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded"])),[[L,e.expanded]]):N("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[L,e.node.visible]])}var Ie=Y(le,[["render",ie],["__file","tree-node.vue"]]);export{Ie as E};
