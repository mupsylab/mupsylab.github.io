import{r as g}from"./vendor-8F4M-BzORa8vA.js";import{M as T}from"./vendor-SWgY-BsCXNrzQ.js";import{m as y,a as b}from"./vendor-WMoX-vkUJ93fA.js";import{i as a}from"./vendor-PkwG-DImsd0bZ.js";import{m as t}from"./vendor-uh4a-J_f0upCC.js";import{i as m,c as h,b as z}from"./vendor-UUu6-BeUS1t8s.js";import{c as C,d}from"./vendor-7avT-DhdrFwTb.js";import{i as w}from"./vendor-k87t-DYFOtHqs.js";import{k as v,z as E}from"./vendor-RE7Z-DOm9JKld.js";let M=1;const x=o=>{const s=!o||C(o)||v(o)||d(o)?{message:o}:o,e={...b,...s};if(!e.appendTo)e.appendTo=document.body;else if(C(e.appendTo)){let n=document.querySelector(e.appendTo);z(n)||(n=document.body),e.appendTo=n}return h(t.grouping)&&!e.grouping&&(e.grouping=t.grouping),m(t.duration)&&e.duration===3e3&&(e.duration=t.duration),m(t.offset)&&e.offset===16&&(e.offset=t.offset),h(t.showClose)&&!e.showClose&&(e.showClose=t.showClose),e},N=o=>{const s=a.indexOf(o);if(s===-1)return;a.splice(s,1);const{handler:e}=o;e.close()},_=({appendTo:o,...s},e)=>{const n=`message_${M++}`,i=s.onClose,l=document.createElement("div"),r={...s,id:n,onClose:()=>{i==null||i(),N(u)},onDestroy:()=>{g(null,l)}},c=E(T,r,d(r.message)||v(r.message)?{default:d(r.message)?r.message:()=>r.message}:null);c.appContext=e||p._context,g(c,l),o.appendChild(l.firstElementChild);const f=c.component,u={id:n,vnode:c,vm:f,handler:{close:()=>{f.exposed.visible.value=!1}},props:c.component.props};return u},p=(o={},s)=>{if(!w)return{close:()=>{}};const e=x(o);if(e.grouping&&a.length){const i=a.find(({vnode:l})=>{var r;return((r=l.props)==null?void 0:r.message)===e.message});if(i)return i.props.repeatNum+=1,i.props.type=e.type,i.handler}if(m(t.max)&&a.length>=t.max)return{close:()=>{}};const n=_(e,s);return a.push(n),n.handler};y.forEach(o=>{p[o]=(s={},e)=>{const n=x(s);return p({...n,type:o},e)}});function O(o){for(const s of a)(!o||o===s.props.type)&&s.handler.close()}p.closeAll=O;p._context=null;export{p as m};
